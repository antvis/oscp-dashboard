/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@antv/g-dom-mutation-observer-api@2.0.6/dist/index.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{ElementEvent as t,MutationEvent as e,runtime as r}from"../g-lite@2.0.6/_esm.js";var i,n,s=function(){function t(t,e){this.type=t,this.target=e,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return t.copy=function(e){var r=new t(e.type,e.target);return r.addedNodes=e.addedNodes.slice(),r.removedNodes=e.removedNodes.slice(),r.previousSibling=e.previousSibling,r.nextSibling=e.nextSibling,r.attributeName=e.attributeName,r.attributeNamespace=e.attributeNamespace,r.oldValue=e.oldValue,r},t}(),o=0,a=new WeakMap,u=function(){function o(t,e,r){this.observer=t,this.target=e,this.options=r,this.transientObservedNodes=[]}return o.prototype.enqueue=function(t){var e,s=this.observer.records,o=s.length;if(s.length>0){var a=function(t,e){return t===e?t:n&&function(t){return t===n||t===i}(t)?n:null}(s[o-1],t);if(a)return void(s[o-1]=a)}else e=this.observer,v.push(e),c||(c=!0,void 0!==r.globalThis?r.globalThis.setTimeout(b):b());s[o]=t},o.prototype.addListeners=function(){this.addListeners_(this.target)},o.prototype.addListeners_=function(e){var r=this.options;r.attributes&&e.addEventListener(t.ATTR_MODIFIED,this,!0),r.childList&&e.addEventListener(t.INSERTED,this,!0),(r.childList||r.subtree)&&e.addEventListener(t.REMOVED,this,!0)},o.prototype.removeListeners=function(){this.removeListeners_(this.target)},o.prototype.removeListeners_=function(e){var r=this.options;r.attributes&&e.removeEventListener(t.ATTR_MODIFIED,this,!0),r.childList&&e.removeEventListener(t.INSERTED,this,!0),(r.childList||r.subtree)&&e.removeEventListener(t.REMOVED,this,!0)},o.prototype.removeTransientObservers=function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach((function(t){this.removeListeners_(t);for(var e=a.get(t),r=0;r<e.length;r++)if(e[r]===this){e.splice(r,1);break}}),this)},o.prototype.handleEvent=function(r){var o,a;switch(r.stopImmediatePropagation(),r.type){case t.ATTR_MODIFIED:var u=r.attrName,d=r.relatedNode.namespaceURI;a=r.target,(o=l("attributes",a)).attributeName=u,o.attributeNamespace=d;var c=r.attrChange===e.ADDITION?null:r.prevValue;h(a,(function(t){var e;if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(u)||-1!==t.attributeFilter.indexOf(d)))return t.attributeOldValue?(e=c,n||((n=s.copy(i)).oldValue=e,n)):o}));break;case t.REMOVED:case t.INSERTED:a=r.relatedNode;var v=r.target,b=void 0,f=void 0;r.type===t.INSERTED?(b=[v],f=[]):(b=[],f=[v]);var p=v.previousSibling,g=v.nextSibling;(o=l("childList",a)).addedNodes=b,o.removedNodes=f,o.previousSibling=p,o.nextSibling=g,h(a,(function(t){if(t.childList)return o}))}i=n=void 0},o}(),d=function(){function t(t){this.callback=t,this.nodes=[],this.records=[],this.uid=o++}return t.prototype.observe=function(t,e){if(!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var r,i=a.get(t);i||a.set(t,i=[]);for(var n=0;n<i.length;n++)if(i[n].observer===this){(r=i[n]).removeListeners(),r.options=e;break}r||(r=new u(this,t,e),i.push(r),this.nodes.push(t)),r.addListeners()},t.prototype.disconnect=function(){var t=this;this.nodes.forEach((function(e){for(var r=a.get(e),i=0;i<r.length;i++){var n=r[i];if(n.observer===t){n.removeListeners(),r.splice(i,1);break}}}),this),this.records=[]},t.prototype.takeRecords=function(){var t=this.records;return this.records=[],t},t}();function l(t,e){return i=new s(t,e)}function h(t,e){for(var r=t;r;r=r.parentNode){var i=a.get(r);if(i)for(var n=0;n<i.length;n++){var s=i[n],o=s.options;if(r===t||o.subtree){var u=e(o);u&&s.enqueue(u)}}}}var c=!1,v=[];function b(){c=!1;var t=v;v=[],t.sort((function(t,e){return t.uid-e.uid}));var e=!1;t.forEach((function(t){var r=t.takeRecords();!function(t){t.nodes.forEach((function(e){var r=a.get(e);r&&r.forEach((function(e){e.observer===t&&e.removeTransientObservers()}))}))}(t),r.length&&(t.callback(r,t),e=!0)})),e&&b()}export{d as MutationObserver,s as MutationRecord,u as Registration};export default null;
