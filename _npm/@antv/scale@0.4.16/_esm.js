/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@antv/scale@0.4.16/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{isUndefined as t,isNull as n,isNumber as e,deepMix as o,size as r,indexOf as s,identity as i}from"../util@3.3.7/_esm.js";import a from"../../color-string@1.9.1/_esm.js";import{format as u}from"../../fecha@4.2.3/_esm.js";function c(t,...n){return n.reduce(((t,n)=>e=>t(n(e))),t)}function h(t,n){return n-t?e=>(e-t)/(n-t):t=>.5}function l(t,n,e,o,r){let s=e||0,i=o||t.length;const a=r||(t=>t);for(;s<i;){const e=Math.floor((s+i)/2);a(t[e])>n?i=e:s=e+1}return s}const d=Math.sqrt(50),p=Math.sqrt(10),g=Math.sqrt(2);function f(t,n,e){const o=(n-t)/Math.max(0,e),r=Math.floor(Math.log(o)/Math.LN10),s=o/10**r;return r>=0?(s>=d?10:s>=p?5:s>=g?2:1)*10**r:-(10**-r)/(s>=d?10:s>=p?5:s>=g?2:1)}function m(t,n,e){const o=Math.abs(n-t)/Math.max(0,e);let r=10**Math.floor(Math.log(o)/Math.LN10);const s=o/r;return s>=d?r*=10:s>=p?r*=5:s>=g&&(r*=2),n<t?-r:r}const M=(t,n,e=5)=>{const o=[t,n];let r,s=0,i=o.length-1,a=o[s],u=o[i];return u<a&&([a,u]=[u,a],[s,i]=[i,s]),r=f(a,u,e),r>0?(a=Math.floor(a/r)*r,u=Math.ceil(u/r)*r,r=f(a,u,e)):r<0&&(a=Math.ceil(a*r)/r,u=Math.floor(u*r)/r,r=f(a,u,e)),r>0?(o[s]=Math.floor(a/r)*r,o[i]=Math.ceil(u/r)*r):r<0&&(o[s]=Math.ceil(a*r)/r,o[i]=Math.floor(u*r)/r),o},v=1e3,k=6e4,y=36e5,w=864e5,T=6048e5,D=2592e6,x=31536e6;function O(t,n,e,o){const r=(t,r)=>{r&&((t,n)=>{const r=t=>o(t)%n==0;let s=n;for(;s&&!r(t);)e(t,-1),s-=1})(t,r),n(t)},s=(t,n)=>{const o=new Date(+t-1);return r(o,n),e(o,n),r(o),o};return{ceil:s,floor:(t,n)=>{const e=new Date(+t);return r(e,n),e},range:(t,n,o,i)=>{const a=[],u=Math.floor(o);for(let c=i?s(t,o):s(t);c<n;e(c,u),r(c))a.push(new Date(+c));return a},duration:t}}const C=O(1,(t=>t),((t,n=1)=>{t.setTime(+t+n)}),(t=>t.getTime())),b=O(v,(t=>{t.setMilliseconds(0)}),((t,n=1)=>{t.setTime(+t+v*n)}),(t=>t.getSeconds())),I=O(k,(t=>{t.setSeconds(0,0)}),((t,n=1)=>{t.setTime(+t+k*n)}),(t=>t.getMinutes())),U=O(y,(t=>{t.setMinutes(0,0,0)}),((t,n=1)=>{t.setTime(+t+y*n)}),(t=>t.getHours())),R=O(w,(t=>{t.setHours(0,0,0,0)}),((t,n=1)=>{t.setTime(+t+w*n)}),(t=>t.getDate()-1)),S=O(D,(t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,n=1)=>{const e=t.getMonth();t.setMonth(e+n)}),(t=>t.getMonth())),N=O(T,(t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)}),((t,n=1)=>{t.setDate(t.getDate()+7*n)}),(t=>{const n=S.floor(t),e=new Date(+t);return Math.floor((+e-+n)/T)})),K=O(x,(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n=1)=>{const e=t.getFullYear();t.setFullYear(e+n)}),(t=>t.getFullYear())),A={millisecond:C,second:b,minute:I,hour:U,day:R,week:N,month:S,year:K},j=O(1,(t=>t),((t,n=1)=>{t.setTime(+t+n)}),(t=>t.getTime())),F=O(v,(t=>{t.setUTCMilliseconds(0)}),((t,n=1)=>{t.setTime(+t+v*n)}),(t=>t.getUTCSeconds())),B=O(k,(t=>{t.setUTCSeconds(0,0)}),((t,n=1)=>{t.setTime(+t+k*n)}),(t=>t.getUTCMinutes())),P=O(y,(t=>{t.setUTCMinutes(0,0,0)}),((t,n=1)=>{t.setTime(+t+y*n)}),(t=>t.getUTCHours())),W=O(w,(t=>{t.setUTCHours(0,0,0,0)}),((t,n=1)=>{t.setTime(+t+w*n)}),(t=>t.getUTCDate()-1)),H=O(D,(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,n=1)=>{const e=t.getUTCMonth();t.setUTCMonth(e+n)}),(t=>t.getUTCMonth())),Y=O(T,(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)}),((t,n=1)=>{t.setTime(+t+T*n)}),(t=>{const n=H.floor(t),e=new Date(+t);return Math.floor((+e-+n)/T)})),q=O(x,(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n=1)=>{const e=t.getUTCFullYear();t.setUTCFullYear(e+n)}),(t=>t.getUTCFullYear())),$={millisecond:j,second:F,minute:B,hour:P,day:W,week:Y,month:H,year:q};function z(t,n,e,o,r){const s=+t,i=+n,{tickIntervals:a,year:u,millisecond:c}=function(t){const n=t?$:A,{year:e,month:o,week:r,day:s,hour:i,minute:a,second:u,millisecond:c}=n;return{tickIntervals:[[u,1],[u,5],[u,15],[u,30],[a,1],[a,5],[a,15],[a,30],[i,1],[i,3],[i,6],[i,12],[s,1],[s,2],[r,1],[o,1],[o,3],[e,1]],year:e,millisecond:c}}(r),h=([t,n])=>t.duration*n,d=o?(i-s)/o:e||5,p=o||(i-s)/d,g=a.length,f=l(a,p,0,g,h);let M;if(f===g){M=[u,m(s/u.duration,i/u.duration,d)]}else if(f){const t=p/h(a[f-1])<h(a[f])/p,[n,e]=t?a[f-1]:a[f];M=[n,o?Math.ceil(o/n.duration):e]}else{M=[c,Math.max(m(s,i,d),1)]}return M}const E=(t,n,e,o,r)=>{const s=t>n,i=s?n:t,a=s?t:n,[u,c]=z(i,a,e,o,r),h=[u.floor(i,c),u.ceil(a,c)];return s?h.reverse():h};function L(e){return!t(e)&&!n(e)&&!Number.isNaN(e)}const J=t=>n=>-t(-n),G=(t,n)=>{const e=Math.log(t),o=t===Math.E?Math.log:10===t?Math.log10:2===t?Math.log2:t=>Math.log(t)/e;return n?J(o):o},Q=(t,n)=>{const e=t===Math.E?Math.exp:n=>t**n;return n?J(e):e},V=(t,n,e,o)=>{const r=t<0,s=G(o,r),i=Q(o,r),a=t>n,u=a?n:t,c=a?t:n,h=[i(Math.floor(s(u))),i(Math.ceil(s(c)))];return a?h.reverse():h};function X(t,n){return o=>{o.prototype.rescale=function(){this.initRange(),this.nice();const[t]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t))},o.prototype.initRange=function(){const{interpolator:n}=this.options;this.options.range=t(n)},o.prototype.composeOutput=function(t,o){const{domain:r,interpolator:s,round:i}=this.getOptions(),a=n(r.map(t)),u=i?(t=>n=>{const o=t(n);return e(o)?Math.round(o):o})(s):s;this.output=c(u,a,o,t)},o.prototype.invert=void 0}}function Z(t,n,e){let o=e;return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(n-t)*o:o<.5?n:o<2/3?t+(n-t)*(2/3-o)*6:t}function _(t){const n=a.get(t);if(!n)return null;const{model:e,value:o}=n;return"rgb"===e?o:"hsl"===e?function(t){const n=t[0]/360,e=t[1]/100,o=t[2]/100,r=t[3];if(0===e)return[255*o,255*o,255*o,r];const s=o<.5?o*(1+e):o+e-o*e,i=2*o-s;return[255*Z(i,s,n+1/3),255*Z(i,s,n),255*Z(i,s,n-1/3),r]}(o):null}const tt=(t,n)=>e=>t*(1-e)+n*e,nt=(t,n)=>{const e=_(t),o=_(n);return null===e||null===o?e?()=>t:()=>n:t=>{const n=new Array(4);for(let r=0;r<4;r+=1){const s=e[r],i=o[r];n[r]=s*(1-t)+i*t}const[r,s,i,a]=n;return`rgba(${Math.round(r)}, ${Math.round(s)}, ${Math.round(i)}, ${a})`}},et=(t,n)=>"number"==typeof t&&"number"==typeof n?tt(t,n):"string"==typeof t&&"string"==typeof n?nt(t,n):()=>t,ot=(t,n)=>{const e=tt(t,n);return t=>Math.round(e(t))};function rt({map:t,initKey:n},e){const o=n(e);return t.has(o)?t.get(o):e}function st(t){return"object"==typeof t?t.valueOf():t}class it extends Map{constructor(t){if(super(),this.map=new Map,this.initKey=st,null!==t)for(const[n,e]of t)this.set(n,e)}get(t){return super.get(rt({map:this.map,initKey:this.initKey},t))}has(t){return super.has(rt({map:this.map,initKey:this.initKey},t))}set(t,n){return super.set(function({map:t,initKey:n},e){const o=n(e);return t.has(o)?t.get(o):(t.set(o,e),e)}({map:this.map,initKey:this.initKey},t),n)}delete(t){return super.delete(function({map:t,initKey:n},e){const o=n(e);return t.has(o)&&(e=t.get(o),t.delete(o)),e}({map:this.map,initKey:this.initKey},t))}}class at{constructor(t){this.options=o({},this.getDefaultOptions()),this.update(t)}getOptions(){return this.options}update(t={}){this.options=o({},this.options,t),this.rescale(t)}rescale(t){}}const ut=Symbol("defaultUnknown");function ct(t,n,e){for(let o=0;o<n.length;o+=1)t.has(n[o])||t.set(e(n[o]),o)}function ht(t){const{value:n,from:e,to:o,mapper:r,notFoundReturn:s}=t;let i=r.get(n);if(void 0===i){if(s!==ut)return s;i=e.push(n)-1,r.set(n,i)}return o[i%o.length]}function lt(t){return t instanceof Date?t=>`${t}`:"object"==typeof t?t=>JSON.stringify(t):t=>t}class dt extends at{getDefaultOptions(){return{domain:[],range:[],unknown:ut}}constructor(t){super(t)}map(t){return 0===this.domainIndexMap.size&&ct(this.domainIndexMap,this.getDomain(),this.domainKey),ht({value:this.domainKey(t),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(t){return 0===this.rangeIndexMap.size&&ct(this.rangeIndexMap,this.getRange(),this.rangeKey),ht({value:this.rangeKey(t),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(t){const[n]=this.options.domain,[e]=this.options.range;if(this.domainKey=lt(n),this.rangeKey=lt(e),!this.rangeIndexMap)return this.rangeIndexMap=new Map,void(this.domainIndexMap=new Map);t&&!t.range||this.rangeIndexMap.clear(),(!t||t.domain||t.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new dt(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:t,compare:n}=this.options;return this.sortedDomain=n?[...t].sort(n):t,this.sortedDomain}}function pt(t){return Math.round(1e12*t)/1e12}function gt(t){const{domain:n,range:e,paddingOuter:o,paddingInner:r,flex:s,round:i,align:a}=t,u=n.length,c=function(t,n){const e=n-t.length;return e>0?[...t,...new Array(e).fill(1)]:e<0?t.slice(0,n):t}(s,u),[h,l]=e,d=l-h,p=d/(2/u*o+1-1/u*r),g=p*r/u,f=p-u*g,m=function(t){const n=Math.min(...t);return t.map((t=>t/n))}(c),M=f/m.reduce(((t,n)=>t+n)),v=new it(n.map(((t,n)=>{const e=m[n]*M;return[t,i?Math.floor(e):e]}))),k=new it(n.map(((t,n)=>{const e=m[n]*M+g;return[t,i?Math.floor(e):e]}))),y=Array.from(k.values()).reduce(((t,n)=>t+n)),w=h+(d-(y-y/u*r))*a;let T=i?Math.round(w):w;const D=new Array(u);for(let t=0;t<u;t+=1){D[t]=pt(T);const e=n[t];T+=k.get(e)}return{valueBandWidth:v,valueStep:k,adjustedRange:D}}class ft extends dt{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:ut,flex:[]}}constructor(t){super(t)}clone(){return new ft(this.options)}getStep(t){return void 0===this.valueStep?1:"number"==typeof this.valueStep?this.valueStep:void 0===t?Array.from(this.valueStep.values())[0]:this.valueStep.get(t)}getBandWidth(t){return void 0===this.valueBandWidth?1:"number"==typeof this.valueBandWidth?this.valueBandWidth:void 0===t?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(t)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:t,paddingInner:n}=this.options;return t>0?t:n}getPaddingOuter(){const{padding:t,paddingOuter:n}=this.options;return t>0?t:n}rescale(){super.rescale();const{align:t,domain:n,range:e,round:o,flex:r}=this.options,{adjustedRange:s,valueBandWidth:i,valueStep:a}=function(t){var n;const{domain:e}=t,o=e.length;if(0===o)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(null===(n=t.flex)||void 0===n?void 0:n.length)return gt(t);const{range:r,paddingOuter:s,paddingInner:i,round:a,align:u}=t;let c,h,l=r[0];const d=r[1]-l,p=2*s,g=o-i;c=d/Math.max(1,p+g),a&&(c=Math.floor(c)),l+=(d-c*(o-i))*u,h=c*(1-i),a&&(l=Math.round(l),h=Math.round(h));const f=new Array(o).fill(0).map(((t,n)=>l+n*c));return{valueStep:c,valueBandWidth:h,adjustedRange:f}}({align:t,range:e,round:o,flex:r,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=a,this.valueBandWidth=i,this.adjustedRange=s}}const mt=(t,n,e)=>{let o,r,s=t,i=n;if(s===i&&e>0)return[s];let a=f(s,i,e);if(0===a||!Number.isFinite(a))return[];if(a>0){s=Math.ceil(s/a),i=Math.floor(i/a),r=new Array(o=Math.ceil(i-s+1));for(let t=0;t<o;t+=1)r[t]=(s+t)*a}else{a=-a,s=Math.ceil(s*a),i=Math.floor(i*a),r=new Array(o=Math.ceil(i-s+1));for(let t=0;t<o;t+=1)r[t]=(s+t)/a}return r};class Mt extends at{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:mt}}map(t){const[n]=this.options.range;return void 0!==n?n:this.options.unknown}invert(t){const[n]=this.options.range;return t===n&&void 0!==n?this.options.domain:[]}getTicks(){const{tickMethod:t,domain:n,tickCount:o}=this.options,[r,s]=n;return e(r)&&e(s)?t(r,s,o):[]}clone(){return new Mt(this.options)}}function vt(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const kt=[1,5,2,2.5,4,3],yt=100*Number.EPSILON;function wt(t,n,e,o,i,a){const u=r(n),c=s(n,t);let h=0;const l=function(t,n){return(t%n+n)%n}(o,a);return(l<yt||a-l<yt)&&o<=0&&i>=0&&(h=1),1-c/(u-1)-e+h}function Tt(t,n,e){const o=r(n);return 1-s(n,t)/(o-1)-e+1}function Dt(t,n,e,o,r,s){const i=(t-1)/(s-r),a=(n-1)/(Math.max(s,o)-Math.min(e,r));return 2-Math.max(i/a,a/i)}function xt(t,n){return t>=n?2-(t-1)/(n-1):1}function Ot(t,n,e,o){return 1-.5*((n-o)**2+(t-e)**2)/(.1*(n-t))**2}function Ct(t,n,e){const o=n-t;if(e>o){return 1-((e-o)/2)**2/(.1*o)**2}return 1}const bt=(t,n,e=5,o=!0,r=kt,s=[.25,.2,.5,.05])=>{const i=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(n)||"number"!=typeof t||"number"!=typeof n||!i)return[];if(n-t<1e-15||1===i)return[t];const a={score:-2,lmin:0,lmax:0,lstep:0};let u=1;for(;u<1/0;){for(let e=0;e<r.length;e+=1){const c=r[e],h=Tt(c,r,u);if(s[0]*h+s[1]+s[2]+s[3]<a.score){u=1/0;break}let l=2;for(;l<1/0;){const e=xt(l,i);if(s[0]*h+s[1]+s[2]*e+s[3]<a.score)break;const d=(n-t)/(l+1)/u/c;let p=Math.ceil(Math.log10(d));for(;p<1/0;){const d=u*c*10**p,g=Ct(t,n,d*(l-1));if(s[0]*h+s[1]*g+s[2]*e+s[3]<a.score)break;const f=Math.floor(n/d)*u-(l-1)*u,m=Math.ceil(t/d)*u;if(f<=m){const e=m-f;for(let h=0;h<=e;h+=1){const e=(f+h)*(d/u),p=e+d*(l-1),g=d,m=wt(c,r,u,e,p,g),M=Ot(t,n,e,p),v=Dt(l,i,t,n,e,p),k=1,y=s[0]*m+s[1]*M+s[2]*v+s[3]*k;y>a.score&&(!o||e<=t&&p>=n)&&(a.lmin=e,a.lmax=p,a.lstep=g,a.score=y)}}p+=1}l+=1}}u+=1}const c=vt(a.lmax),h=vt(a.lmin),l=vt(a.lstep),d=Math.floor(function(t){return Math.round(1e12*t)/1e12}((c-h)/l))+1,p=new Array(d);p[0]=vt(h);for(let t=1;t<d;t+=1)p[t]=vt(p[t-1]+l);return p};class It extends at{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:bt}}map(t){return L(t)?t:this.options.unknown}invert(t){return this.map(t)}clone(){return new It(this.options)}getTicks(){const{domain:t,tickCount:n,tickMethod:o}=this.options,[r,s]=t;return e(r)&&e(s)?o(r,s,n):[]}}const Ut=(t,n,e)=>{const[o,r]=t,[s,i]=n;let a,u;return o<r?(a=h(o,r),u=e(s,i)):(a=h(r,o),u=e(i,s)),c(u,a)},Rt=(t,n,e)=>{const o=Math.min(t.length,n.length)-1,r=new Array(o),s=new Array(o),i=t[0]>t[o],a=i?[...t].reverse():t,u=i?[...n].reverse():n;for(let t=0;t<o;t+=1)r[t]=h(a[t],a[t+1]),s[t]=e(u[t],u[t+1]);return n=>{const e=l(t,n,1,o)-1,i=r[e];return c(s[e],i)(n)}},St=(t,n,e,o)=>(Math.min(t.length,n.length)>2?Rt:Ut)(t,n,o?ot:e);class Nt extends at{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:tt,tickCount:5}}map(t){return L(t)?this.output(t):this.options.unknown}invert(t){return L(t)?this.input(t):this.options.unknown}nice(){if(!this.options.nice)return;const[t,n,e,...o]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(t,n,e,...o)}getTicks(){const{tickMethod:t}=this.options,[n,e,o,...r]=this.getTickMethodOptions();return t(n,e,o,...r)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options;return[t[0],t[t.length-1],n]}chooseNice(){return M}rescale(){this.nice();const[t,n]=this.chooseTransforms();this.composeOutput(t,this.chooseClamp(t)),this.composeInput(t,n,this.chooseClamp(n))}chooseClamp(t){const{clamp:n,range:e}=this.options,o=this.options.domain.map(t),r=Math.min(o.length,e.length);return n?function(t,n){const e=n<t?n:t,o=t>n?t:n;return t=>Math.min(Math.max(e,t),o)}(o[0],o[r-1]):i}composeOutput(t,n){const{domain:e,range:o,round:r,interpolate:s}=this.options,i=St(e.map(t),o,s,r);this.output=c(i,n,t)}composeInput(t,n,e){const{domain:o,range:r}=this.options,s=St(r,o.map(t),tt);this.input=c(n,e,s)}}class Kt extends Nt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:et,tickMethod:mt,tickCount:5}}chooseTransforms(){return[i,i]}clone(){return new Kt(this.options)}}class At extends ft{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:ut,paddingInner:1,paddingOuter:0}}constructor(t){super(t)}getPaddingInner(){return 1}clone(){return new At(this.options)}update(t){super.update(t)}getPaddingOuter(){return this.options.padding}}const jt=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class Ft extends Nt{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:et,tickMethod:mt,tickCount:5}}constructor(t){super(t)}chooseTransforms(){const{exponent:t}=this.options;if(1===t)return[i,i];const n=.5===t?jt:(t=>n=>n<0?-((-n)**t):n**t)(t),e=(t=>n=>n<0?-((-n)**(1/t)):n**(1/t))(t);return[n,e]}clone(){return new Ft(this.options)}}class Bt extends Ft{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:et,tickMethod:mt,tickCount:5,exponent:.5}}constructor(t){super(t)}update(t){super.update(t)}clone(){return new Bt(this.options)}}class Pt extends at{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(t){super(t)}map(t){if(!L(t))return this.options.unknown;const n=l(this.thresholds,t,0,this.n);return this.options.range[n]}invert(t){const{range:n}=this.options,e=n.indexOf(t),o=this.thresholds;return[o[e-1],o[e]]}clone(){return new Pt(this.options)}rescale(){const{domain:t,range:n}=this.options;this.n=Math.min(t.length,n.length-1),this.thresholds=t}}const Wt=(t,n,e,o=10)=>{const r=t<0,s=Q(o,r),i=G(o,r),a=n<t,u=a?n:t,c=a?t:n;let h=i(u),l=i(c),d=[];if(!(o%1)&&l-h<e){if(h=Math.floor(h),l=Math.ceil(l),r)for(;h<=l;h+=1){const t=s(h);for(let n=o-1;n>=1;n-=1){const e=t*n;if(e>c)break;e>=u&&d.push(e)}}else for(;h<=l;h+=1){const t=s(h);for(let n=1;n<o;n+=1){const e=t*n;if(e>c)break;e>=u&&d.push(e)}}2*d.length<e&&(d=mt(u,c,e))}else{const t=-1===e?l-h:Math.min(l-h,e);d=mt(h,l,t).map(s)}return a?d.reverse():d};class Ht extends Nt{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:et,tickMethod:Wt,tickCount:5}}chooseNice(){return V}getTickMethodOptions(){const{domain:t,tickCount:n,base:e}=this.options;return[t[0],t[t.length-1],n,e]}chooseTransforms(){const{base:t,domain:n}=this.options,e=n[0]<0;return[G(t,e),Q(t,e)]}clone(){return new Ht(this.options)}}class Yt extends Pt{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:bt}}constructor(t){super(t)}nice(){const{nice:t}=this.options;if(t){const[t,n,e]=this.getTickMethodOptions();this.options.domain=M(t,n,e)}}getTicks(){const{tickMethod:t}=this.options,[n,e,o]=this.getTickMethodOptions();return t(n,e,o)}getTickMethodOptions(){const{domain:t,tickCount:n}=this.options;return[t[0],t[t.length-1],n]}rescale(){this.nice();const{range:t,domain:n}=this.options,[e,o]=n;this.n=t.length-1,this.thresholds=new Array(this.n);for(let t=0;t<this.n;t+=1)this.thresholds[t]=((t+1)*o-(t-this.n)*e)/(this.n+1)}invert(t){const[n,e]=super.invert(t),[o,r]=this.options.domain;return void 0===n&&void 0===e?[n,e]:[n||o,e||r]}getThresholds(){return this.thresholds}clone(){return new Yt(this.options)}}function qt(t,n){const e=t.length;if(!e)return;if(e<2)return t[e-1];const o=(e-1)*n,r=Math.floor(o),s=t[r];return s+(t[r+1]-s)*(o-r)}class $t extends Pt{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:bt}}constructor(t){super(t)}rescale(){const{domain:t,range:n}=this.options;this.n=n.length-1,this.thresholds=function(t,n,e=!1){const o=t;e||o.sort(((t,n)=>t-n));const r=[];for(let t=1;t<n;t+=1)r.push(qt(o,t/n));return r}(t,this.n+1,!1)}invert(t){const[n,e]=super.invert(t),{domain:o}=this.options,r=o[0],s=o[o.length-1];return void 0===n&&void 0===e?[n,e]:[n||r,e||s]}getThresholds(){return this.thresholds}clone(){return new $t(this.options)}getTicks(){const{tickCount:t,domain:n,tickMethod:e}=this.options,o=n.length-1;return e(n[0],n[o],t)}}const zt=(t,n,e,o,r)=>{const s=t>n,i=s?n:t,a=s?t:n,[u,c]=z(i,a,e,o,r),h=u.range(i,new Date(+a+1),c,!0);return s?h.reverse():h};function Et(t){const n=t.getTimezoneOffset(),e=new Date(t);return e.setMinutes(e.getMinutes()+n,e.getSeconds(),e.getMilliseconds()),e}class Lt extends Nt{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:zt,interpolate:tt,mask:void 0,utc:!1}}chooseTransforms(){return[t=>+t,t=>new Date(t)]}chooseNice(){return E}getTickMethodOptions(){const{domain:t,tickCount:n,tickInterval:e,utc:o}=this.options;return[t[0],t[t.length-1],n,e,o]}getFormatter(){const{mask:t,utc:n}=this.options,e=n?$:A,o=n?Et:i;return n=>u(o(n),t||function(t,n){const{second:e,minute:o,hour:r,day:s,week:i,month:a,year:u}=n;return e.floor(t)<t?".SSS":o.floor(t)<t?":ss":r.floor(t)<t?"hh:mm":s.floor(t)<t?"hh A":a.floor(t)<t?i.floor(t)<t?"MMM DD":"ddd DD":u.floor(t)<t?"MMMM":"YYYY"}(n,e))}clone(){return new Lt(this.options)}}var Jt,Gt=function(t,n,e,o){var r,s=arguments.length,i=s<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,e,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(s<3?r(i):s>3?r(n,e,i):r(n,e))||i);return s>3&&i&&Object.defineProperty(n,e,i),i};let Qt=Jt=class extends Kt{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:i,tickMethod:mt,tickCount:5}}constructor(t){super(t)}clone(){return new Jt(this.options)}};Qt=Jt=Gt([X((function(t){return[t(0),t(1)]}),(t=>{const[n,e]=t;return c(tt(0,1),h(n,e))}))],Qt);var Vt,Xt=function(t,n,e,o){var r,s=arguments.length,i=s<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,n,e,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(s<3?r(i):s>3?r(n,e,i):r(n,e))||i);return s>3&&i&&Object.defineProperty(n,e,i),i};let Zt=Vt=class extends Kt{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:i,tickMethod:mt,tickCount:5}}constructor(t){super(t)}clone(){return new Vt(this.options)}};Zt=Vt=Xt([X((function(t){return[t(0),t(.5),t(1)]}),(t=>{const[n,e,o]=t,r=c(tt(0,.5),h(n,e)),s=c(tt(.5,1),h(e,o));return t=>n>o?t<e?s(t):r(t):t<e?r(t):s(t)}))],Zt);const _t=(t,n,e=5)=>{if(t===n)return[t];const o=e<0?0:Math.round(e);if(0===o)return[];const r=(n-t)/o,s=10**Math.floor(Math.log10(r));let i=s;2*s-r<1.5*(r-i)&&(i=2*s,5*s-r<2.75*(r-i)&&(i=5*s,10*s-r<1.5*(r-i)&&(i=10*s)));const a=Math.ceil(n/i),u=Math.floor(t/i),c=Math.max(a*i,n),h=Math.min(u*i,t),l=Math.floor((c-h)/i)+1,d=new Array(l);for(let t=0;t<l;t+=1)d[t]=vt(h+t*i);return d};export{ft as Band,at as Base,Mt as Constant,Nt as Continuous,w as DURATION_DAY,y as DURATION_HOUR,k as DURATION_MINUTE,D as DURATION_MONTH,v as DURATION_SECOND,T as DURATION_WEEK,x as DURATION_YEAR,Zt as Diverging,It as Identity,Kt as Linear,Ht as Log,dt as Ordinal,At as Point,Ft as Pow,$t as Quantile,Yt as Quantize,Qt as Sequential,Bt as Sqrt,Pt as Threshold,Lt as Time,nt as createInterpolateColor,tt as createInterpolateNumber,et as createInterpolateValue,Wt as d3Log,mt as d3Ticks,zt as d3Time,_t as rPretty,bt as wilkinsonExtended};export default null;
