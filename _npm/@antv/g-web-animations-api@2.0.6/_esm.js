/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@antv/g-web-animations-api@2.0.6/dist/index.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{FederatedEvent as t,ERROR_MSG_METHOD_NOT_IMPLEMENTED as i,runtime as e,propertyMetadataCache as n}from"../g-lite@2.0.5/_esm.js";import{__extends as r,__spreadArray as s,__read as o}from"../../tslib@2.6.3/_esm.js";import{isNil as a,clamp as u,isNumber as h}from"../util@3.3.7/_esm.js";var f=function(t){function i(i,e,n,r){var s=t.call(this,i)||this;return s.currentTime=n,s.timelineTime=r,s.target=e,s.type="finish",s.bubbles=!1,s.currentTarget=e,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=n,s.timelineTime=r,s}return r(i,t),i}(t),c=0,l=function(){function t(t,i){var e;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=t,t.animation=this,this.timeline=i,this.id="".concat(c++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(e=this.effect)||void 0===e?void 0:e.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(t.prototype,"pending",{get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(i,e){t.resolveReadyPromise=function(){i(t)},t.rejectReadyPromise=function(){e(new Error)}})),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(i,e){t.resolveFinishedPromise=function(){i(t)},t.rejectFinishedPromise=function(){e(new Error)}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){var i;t=Number(t),isNaN(t)||(this.timeline.restart(),this._paused||null===this._startTime||(this._startTime=Number(null===(i=this.timeline)||void 0===i?void 0:i.currentTime)-t/this.playbackRate),this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),t=Number(t),isNaN(t))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var i=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==i&&(this.currentTime=i),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_needsTick",{get:function(){return this.pending||"running"===this.playState||!this._finishedFlag},enumerable:!1,configurable:!0}),t.prototype.updatePromises=function(){var t=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==t&&("idle"===i?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===i&&(this.readyPromise=void 0)),this.finishedPromise&&i!==t&&("idle"===i?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===i?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise},t.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()},t.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()},t.prototype.finish=function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.cancel=function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var i=new f(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(i)}))}},t.prototype.reverse=function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()},t.prototype.updatePlaybackRate=function(t){this.playbackRate=t},t.prototype.targetAnimations=function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()},t.prototype.markTarget=function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)},t.prototype.unmarkTarget=function(){var t=this.targetAnimations(),i=t.indexOf(this);-1!==i&&t.splice(i,1)},t.prototype.tick=function(t,i){this._idle||this._paused||(null===this._startTime?i&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),i&&(this.currentTimePending=!1,this.fireEvents(t))},t.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else{if(!(this._totalDuration<1/0))throw new Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}},t.prototype.persist=function(){throw new Error(i)},t.prototype.addEventListener=function(t,e,n){throw new Error(i)},t.prototype.removeEventListener=function(t,e,n){throw new Error(i)},t.prototype.dispatchEvent=function(t){throw new Error(i)},t.prototype.commitStyles=function(){throw new Error(i)},t.prototype.ensureAlive=function(){var t,i;this.playbackRate<0&&0===this.currentTime?this._inEffect=!!(null===(t=this.effect)||void 0===t?void 0:t.update(-1)):this._inEffect=!!(null===(i=this.effect)||void 0===i?void 0:i.update(this.currentTime)),this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))},t.prototype.tickCurrentTime=function(t,i){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!i&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},t.prototype.fireEvents=function(t){var i=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var e=new f(null,this,this.currentTime,t);setTimeout((function(){i.onfinish&&i.onfinish(e)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var n=new f(null,this,this.currentTime,t);this.onframe(n)}this._finishedFlag=!1}},t}(),m=.1,p="function"==typeof Float32Array,d=function(t,i){return 1-3*i+3*t},y=function(t,i){return 3*i-6*t},v=function(t){return 3*t},g=function(t,i,e){return((d(i,e)*t+y(i,e))*t+v(i))*t},b=function(t,i,e){return 3*d(i,e)*t*t+2*y(i,e)*t+v(i)},T=function(t,i,e,n){if(!(0<=t&&t<=1&&0<=e&&e<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===i&&e===n)return function(t){return t};for(var r=p?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=g(s*m,t,e);var o=function(i){for(var n=0,s=1;10!==s&&r[s]<=i;++s)n+=m;--s;var o=n+(i-r[s])/(r[s+1]-r[s])*m,a=b(o,t,e);return a>=.001?function(t,i,e,n){for(var r=0;r<4;++r){var s=b(i,e,n);if(0===s)return i;i-=(g(i,e,n)-t)/s}return i}(i,o,t,e):0===a?o:function(t,i,e,n,r){var s,o,a=0;do{(s=g(o=i+(e-i)/2,n,r)-t)>0?e=o:i=o}while(Math.abs(s)>1e-7&&++a<10);return o}(i,n,n+m,t,e)};return function(t){return 0===t||1===t?t:g(o(t),i,n)}},_=function(t){return Math.pow(t,2)},P=function(t){return Math.pow(t,3)},k=function(t){return Math.pow(t,4)},w=function(t){return Math.pow(t,5)},A=function(t){return Math.pow(t,6)},F=function(t){return 1-Math.cos(t*Math.PI/2)},E=function(t){return 1-Math.sqrt(1-t*t)},O=function(t){return t*t*(3*t-2)},N=function(t){for(var i,e=4;t<((i=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*i-2)/22-t,2)},R=function(t,i){void 0===i&&(i=[]);var e=o(i,2),n=e[0],r=void 0===n?1:n,s=e[1],a=void 0===s?.5:s,h=u(Number(r),1,10),f=u(Number(a),.1,2);return 0===t||1===t?t:-h*Math.pow(2,10*(t-1))*Math.sin((t-1-f/(2*Math.PI)*Math.asin(1/h))*(2*Math.PI)/f)},x=function(t,i,e){void 0===i&&(i=[]);var n=o(i,4),r=n[0],s=void 0===r?1:r,a=n[1],h=void 0===a?100:a,f=n[2],c=void 0===f?10:f,l=n[3],m=void 0===l?0:l;s=u(s,.1,1e3),h=u(h,.1,1e3),c=u(c,.1,1e3),m=u(m,.1,1e3);var p=Math.sqrt(h/s),d=c/(2*Math.sqrt(h*s)),y=d<1?p*Math.sqrt(1-d*d):0,v=d<1?(d*p-m)/y:-m+p,g=e?e*t/1e3:t;return g=d<1?Math.exp(-g*d*p)*(1*Math.cos(y*g)+v*Math.sin(y*g)):(1+v*g)*Math.exp(-g*p),0===t||1===t?t:1-g},M=function(t,i){void 0===i&&(i=[]);var e=o(i,2),n=e[0],r=void 0===n?10:n;return("start"==e[1]?Math.ceil:Math.floor)(u(t,0,1)*r)/r},S=function(t,i){void 0===i&&(i=[]);var e=o(i,4),n=e[0],r=e[1],s=e[2],a=e[3];return T(n,r,s,a)(t)},D=T(.42,0,1,1),q=function(t){return function(i,e,n){return void 0===e&&(e=[]),1-t(1-i,e,n)}},C=function(t){return function(i,e,n){return void 0===e&&(e=[]),i<.5?t(2*i,e,n)/2:1-t(-2*i+2,e,n)/2}},j=function(t){return function(i,e,n){return void 0===e&&(e=[]),i<.5?(1-t(1-2*i,e,n))/2:(t(2*i-1,e,n)+1)/2}},I={steps:M,"step-start":function(t){return M(t,[1,"start"])},"step-end":function(t){return M(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":S,ease:function(t){return S(t,[.25,.1,.25,1])},in:D,out:q(D),"in-out":C(D),"out-in":j(D),"in-quad":_,"out-quad":q(_),"in-out-quad":C(_),"out-in-quad":j(_),"in-cubic":P,"out-cubic":q(P),"in-out-cubic":C(P),"out-in-cubic":j(P),"in-quart":k,"out-quart":q(k),"in-out-quart":C(k),"out-in-quart":j(k),"in-quint":w,"out-quint":q(w),"in-out-quint":C(w),"out-in-quint":j(w),"in-expo":A,"out-expo":q(A),"in-out-expo":C(A),"out-in-expo":j(A),"in-sine":F,"out-sine":q(F),"in-out-sine":C(F),"out-in-sine":j(F),"in-circ":E,"out-circ":q(E),"in-out-circ":C(E),"out-in-circ":j(E),"in-back":O,"out-back":q(O),"in-out-back":C(O),"out-in-back":j(O),"in-bounce":N,"out-bounce":q(N),"in-out-bounce":C(N),"out-in-bounce":j(N),"in-elastic":R,"out-elastic":q(R),"in-out-elastic":C(R),"out-in-elastic":j(R),spring:x,"spring-in":x,"spring-out":q(x),"spring-in-out":C(x),"spring-out-in":j(x)},W=function(t){return I[function(t){return(i=t,"-"===(i=i.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();var i}(t)]||I.linear},K=function(t){return t},z=1,V=.5,L=0;function G(t,i){return function(e){if(e>=1)return 1;var n=1/t;return(e+=i*n)-e%n}}var U="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Z=new RegExp("cubic-bezier\\("+U+","+U+","+U+","+U+"\\)"),B=/steps\(\s*(\d+)\s*\)/,H=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function J(t){var i=Z.exec(t);if(i)return T.apply(void 0,s([],o(i.slice(1).map(Number)),!1));var e=B.exec(t);if(e)return G(Number(e[1]),L);var n=H.exec(t);return n?G(Number(n[1]),{start:z,middle:V,end:L}[n[2]]):W(t)}function Q(t){return Math.abs(function(t){var i;if(0===t.duration||0===t.iterations)return 0;return("auto"===t.duration?0:Number(t.duration))*(null!==(i=t.iterations)&&void 0!==i?i:1)}(t)/(t.playbackRate||1))}var X=0,Y=1,$=2,tt=3;function it(t,i,e){var n=function(t,i,e){if(null===i)return X;var n=e.endTime;return i<Math.min(e.delay,n)?Y:i>=Math.min(e.delay+t+e.endDelay,n)?$:tt}(t,i,e),r=function(t,i,e,n,r){switch(n){case Y:return"backwards"===i||"both"===i?0:null;case tt:return e-r;case $:return"forwards"===i||"both"===i?t:null;case X:return null}}(t,e.fill,i,n,e.delay);if(null===r)return null;var s="auto"===e.duration?0:e.duration,o=function(t,i,e,n,r){var s=r;return 0===t?i!==Y&&(s+=e):s+=n/t,s}(s,n,e.iterations,r,e.iterationStart),a=function(t,i,e,n,r,s){var o=t===1/0?i%1:t%1;return 0!==o||e!==$||0===n||0===r&&0!==s||(o=1),o}(o,e.iterationStart,n,e.iterations,r,s),u=function(t,i,e,n){return t===$&&i===1/0?1/0:1===e?Math.floor(n)-1:Math.floor(n)}(n,e.iterations,a,o),h=function(t,i,e){var n=t;if("normal"!==t&&"reverse"!==t){var r=i;"alternate-reverse"===t&&(r+=1),n="normal",r!==1/0&&r%2!=0&&(n="reverse")}return"normal"===n?e:1-e}(e.direction,u,a);return e.currentIteration=u,e.progress=h,e.easingFunction(h)}function et(t,i,e){var n=function(t,i){for(var e={},n=0;n<t.length;n++)for(var r in t[n])if(nt(r)){var s={offset:t[n].offset,computedOffset:t[n].computedOffset,easing:t[n].easing,easingFunction:J(t[n].easing)||i.easingFunction,value:t[n][r]};e[r]=e[r]||[],e[r].push(s)}return e}(t,i),r=function(t,i){var e=[];for(var n in t)for(var r=t[n],s=0;s<r.length-1;s++){var o=s,a=s+1,u=r[o].computedOffset,h=r[a].computedOffset,f=u,c=h;0===s&&(f=-1/0,0===h&&(a=o)),s===r.length-2&&(c=1/0,1===u&&(o=a)),e.push({applyFrom:f,applyTo:c,startOffset:r[o].computedOffset,endOffset:r[a].computedOffset,easingFunction:r[o].easingFunction,property:n,interpolation:st(n,r[o].value,r[a].value,i)})}return e.sort((function(t,i){return t.startOffset-i.startOffset})),e}(n,e);return function(t,i){if(null!==i)r.filter((function(t){return i>=t.applyFrom&&i<t.applyTo})).forEach((function(e){var n=i-e.startOffset,r=e.endOffset-e.startOffset,s=0===r?0:n/r;t.setAttribute(e.property,e.interpolation(s),!1,!1)}));else for(var e in n)nt(e)&&t.setAttribute(e,null)}}function nt(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var rt=function(t,i,n){return function(r){var s=ot(t,i,r);return!e.enableCSSParsing&&h(s)?s:n(s)}};function st(t,i,r,a){var u=n[t];if(u&&u.syntax&&u.int){var h=e.styleValueRegistry.getPropertySyntax(u.syntax);if(h){var f=void 0,c=void 0;if(e.enableCSSParsing){var l=e.styleValueRegistry.parseProperty(t,i,a,!1),m=e.styleValueRegistry.parseProperty(t,r,a,!1);f=e.styleValueRegistry.computeProperty(t,l,a,!1),c=e.styleValueRegistry.computeProperty(t,m,a,!1)}else{var p=h.parserWithCSSDisabled;f=p?p(i,a):i,c=p?p(r,a):r}var d=h.mixer(f,c,a);if(d){var y=rt.apply(void 0,s([],o(d),!1));return function(t){return 0===t?i:1===t?r:y(t)}}}}return rt(!1,!0,(function(t){return t?r:i}))}function ot(t,i,e){if("number"==typeof t&&"number"==typeof i)return t*(1-e)+i*e;if("boolean"==typeof t&&"boolean"==typeof i||"string"==typeof t&&"string"==typeof i)return e<.5?t:i;if(Array.isArray(t)&&Array.isArray(i)){for(var n=t.length,r=i.length,s=Math.max(n,r),o=[],a=0;a<s;a++)o.push(ot(t[a<n?a:n-1],i[a<r?a:r-1],e));return o}throw new Error("Mismatched interpolation arguments "+t+":"+i)}var at=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=K,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},set:function(t){this.easingFunction=J(t),this._easing=t},enumerable:!1,configurable:!0}),t}();function ut(t,i){if(null===t)return[];Array.isArray(t)||(t=function(t){var i=[];for(var e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var r=n.length,s=0;s<r;s++){if(!i[s]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),i[s]=o}void 0!==n[s]&&null!==n[s]&&(i[s][e]=n[s])}}return i.sort((function(t,i){return(t.computedOffset||0)-(i.computedOffset||0)})),i}(t));for(var e=t.map((function(t){var e={};for(var n in(null==i?void 0:i.composite)&&(e.composite="auto"),t){var r=t[n];if("offset"===n){if(null!==r){if(r=Number(r),!isFinite(r))throw new Error("Keyframe offsets must be numbers.");if(r<0||r>1)throw new Error("Keyframe offsets must be between 0 and 1.");e.computedOffset=r}}else if("composite"===n&&-1===["replace","add","accumulate","auto"].indexOf(r))throw new Error("".concat(r," compositing is not supported"));e[n]=r}return void 0===e.offset&&(e.offset=null),void 0===e.easing&&(e.easing=(null==i?void 0:i.easing)||"linear"),void 0===e.composite&&(e.composite="auto"),e})),n=!0,r=-1/0,s=0;s<e.length;s++){var o=e[s].offset;if(a(o))n=!1;else{if(o<r)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=o}}return e=e.filter((function(t){return Number(t.offset)>=0&&Number(t.offset)<=1})),n||function(){var t,i,n=e.length;e[n-1].computedOffset=Number(null!==(t=e[n-1].offset)&&void 0!==t?t:1),n>1&&(e[0].computedOffset=Number(null!==(i=e[0].offset)&&void 0!==i?i:0));for(var r=0,s=Number(e[0].computedOffset),o=1;o<n;o++){var u=e[o].computedOffset;if(!a(u)&&!a(s)){for(var h=1;h<o-r;h++)e[r+h].computedOffset=s+(Number(u)-s)*h/(o-r);r=o,s=Number(u)}}}(),e}var ht="backwards|forwards|both|none".split("|"),ft="reverse|alternate|alternate-reverse".split("|");function ct(t,i){var e=new at;return i&&(e.fill="both",e.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(i){if(void 0!==t[i]&&null!==t[i]&&"auto"!==t[i]){if(("number"==typeof e[i]||"duration"===i)&&("number"!=typeof t[i]||isNaN(t[i])))return;if("fill"===i&&-1===ht.indexOf(t[i]))return;if("direction"===i&&-1===ft.indexOf(t[i]))return;e[i]=t[i]}})):e.duration=t,e}function lt(t,i){return ct(t=mt(null!=t?t:{duration:"auto"}),i)}function mt(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}var pt=function(){function t(t,i,n){var r=this;this.composite="replace",this.iterationComposite="replace",this.target=t,this.timing=lt(n,!1),this.timing.effect=this,this.timing.activeDuration=Q(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=ut(i,this.timing),this.interpolations=et(this.normalizedKeyframes,this.timing,this.target);var s=e.globalThis.Proxy;this.computedTiming=s?new s(this.timing,{get:function(t,i){return"duration"===i?"auto"===t.duration?0:t.duration:"fill"===i?"auto"===t.fill?"none":t.fill:"localTime"===i?r.animation&&r.animation.currentTime||null:"currentIteration"===i?r.animation&&"running"===r.animation.playState?t.currentIteration||0:null:"progress"===i?r.animation&&"running"===r.animation.playState?t.progress||0:null:t[i]},set:function(){return!0}}):this.timing}return t.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},t.prototype.update=function(t){return null!==t&&(this.timeFraction=it(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)},t.prototype.getKeyframes=function(){return this.normalizedKeyframes},t.prototype.setKeyframes=function(t){this.normalizedKeyframes=ut(t)},t.prototype.getComputedTiming=function(){return this.computedTiming},t.prototype.getTiming=function(){return this.timing},t.prototype.updateTiming=function(t){var i=this;Object.keys(t||{}).forEach((function(e){i.timing[e]=t[e]}))},t}();function dt(t,i){return Number(t.id)-Number(i.id)}var yt=function(){function t(t){var i=this;this.document=t,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){i.currentTime=t,i.discardAnimations(),0===i.animations.length?i.timelineTicking=!1:i.requestAnimationFrame(i.webAnimationsNextTick)},this.processRafCallbacks=function(t){var e=i.rafCallbacks;i.rafCallbacks=[],t<Number(i.currentTime)&&(t=Number(i.currentTime)),i.animations.sort(dt),i.animations=i.tick(t,!0,i.animations)[0],e.forEach((function(i){i[1](t)})),i.applyPendingEffects()}}return t.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},t.prototype.isTicking=function(){return this.inTick},t.prototype.play=function(t,i,e){var n=new pt(t,i,e),r=new l(n,this);return this.animations.push(r),this.restartWebAnimationsNextTick(),r.updatePromises(),r.play(),r.updatePromises(),r},t.prototype.applyDirtiedAnimation=function(t){var i=this;if(!this.inTick){t.markTarget();var e=t.targetAnimations();e.sort(dt),this.tick(Number(this.currentTime),!1,e.slice())[1].forEach((function(t){var e=i.animations.indexOf(t);-1!==e&&i.animations.splice(e,1)})),this.applyPendingEffects()}},t.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},t.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},t.prototype.applyPendingEffects=function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]},t.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))},t.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))},t.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},t.prototype.rAF=function(t){var i=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([i,t]),i},t.prototype.requestAnimationFrame=function(t){var i=this;return this.rAF((function(e){i.updateAnimationsPromises(),t(e),i.updateAnimationsPromises()}))},t.prototype.tick=function(t,i,e){var n,r,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var u=[],h=[],f=[],c=[];return e.forEach((function(e){e.tick(t,i),e._inEffect?(h.push(e.effect),e.markTarget()):(u.push(e.effect),e.unmarkTarget()),e._needsTick&&(a.ticking=!0);var n=e._inEffect||e._needsTick;e._inTimeline=n,n?f.push(e):c.push(e)})),(n=this.pendingEffects).push.apply(n,s([],o(u),!1)),(r=this.pendingEffects).push.apply(r,s([],o(h),!1)),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[f,c]},t}();e.EasingFunction=J,e.AnimationTimeline=yt;export{l as Animation,f as AnimationEvent,yt as AnimationTimeline,I as EasingFunctions,pt as KeyframeEffect,dt as compareAnimations,ct as makeTiming,ut as normalizeKeyframes,lt as normalizeTimingInput,mt as numericTimingToObject};export default null;
