/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@antv/g-plugin-canvas-path-generator@2.0.5/dist/index.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__extends as a,__spreadArray as t,__read as e}from"../../tslib@2.6.3/_esm.js";import{Shape as r,AbstractRendererPlugin as n,isDisplayObject as o}from"../g-lite@2.0.5/_esm.js";import{clamp as i}from"../util@3.3.7/_esm.js";function s(a,t){var e=t.cx,r=void 0===e?0:e,n=t.cy,o=void 0===n?0:n,i=t.r;a.arc(r,o,i,0,2*Math.PI,!1)}function h(a,t){var e=t.cx,r=void 0===e?0:e,n=t.cy,o=void 0===n?0:n,i=t.rx,s=t.ry;if(a.ellipse)a.ellipse(r,o,i,s,0,0,2*Math.PI,!1);else{var h=i>s?i:s,c=i>s?1:i/s,l=i>s?s/i:1;a.save(),a.scale(c,l),a.arc(r,o,h,0,2*Math.PI)}}function c(a,t){var e,r,n=t.x1,i=t.y1,s=t.x2,h=t.y2,c=t.markerStart,l=t.markerEnd,M=t.markerStartOffset,v=t.markerEndOffset,f=0,m=0,d=0,T=0,p=0;c&&o(c)&&M&&(e=s-n,r=h-i,p=Math.atan2(r,e),f=Math.cos(p)*(M||0),m=Math.sin(p)*(M||0)),l&&o(l)&&v&&(e=n-s,r=i-h,p=Math.atan2(r,e),d=Math.cos(p)*(v||0),T=Math.sin(p)*(v||0)),a.moveTo(n+f,i+m),a.lineTo(s+d,h+T)}function l(a,t){var r,n,i=t.markerStart,s=t.markerEnd,h=t.markerStartOffset,c=t.markerEndOffset,l=t.d,M=l.absolutePath,v=l.segments,f=0,m=0,d=0,T=0,p=0;if(i&&o(i)&&h){var u=e(i.parentNode.getStartTangent(),2),P=u[0],k=u[1];r=P[0]-k[0],n=P[1]-k[1],p=Math.atan2(n,r),f=Math.cos(p)*(h||0),m=Math.sin(p)*(h||0)}if(s&&o(s)&&c){var I=e(s.parentNode.getEndTangent(),2);P=I[0],k=I[1];r=P[0]-k[0],n=P[1]-k[1],p=Math.atan2(n,r),d=Math.cos(p)*(c||0),T=Math.sin(p)*(c||0)}for(var E=0;E<M.length;E++){var g=M[E],y=g[0],x=M[E+1],O=0===E&&(0!==f||0!==m),S=(E===M.length-1||x&&("M"===x[0]||"Z"===x[0]))&&0!==d&&0!==T;switch(y){case"M":O?(a.moveTo(g[1]+f,g[2]+m),a.lineTo(g[1],g[2])):a.moveTo(g[1],g[2]);break;case"L":S?a.lineTo(g[1]+d,g[2]+T):a.lineTo(g[1],g[2]);break;case"Q":a.quadraticCurveTo(g[1],g[2],g[3],g[4]),S&&a.lineTo(g[3]+d,g[4]+T);break;case"C":a.bezierCurveTo(g[1],g[2],g[3],g[4],g[5],g[6]),S&&a.lineTo(g[5]+d,g[6]+T);break;case"A":var b=v[E].arcParams,L=b.cx,C=b.cy,A=b.rx,G=b.ry,N=b.startAngle,R=b.endAngle,w=b.xRotation,F=b.sweepFlag;if(a.ellipse)a.ellipse(L,C,A,G,w,N,R,!!(1-F));else{var H=A>G?A:G,Y=A>G?1:A/G,Z=A>G?G/A:1;a.translate(L,C),a.rotate(w),a.scale(Y,Z),a.arc(0,0,H,N,R,!!(1-F)),a.scale(1/Y,1/Z),a.rotate(-w),a.translate(-L,-C)}S&&a.lineTo(g[6]+d,g[7]+T);break;case"Z":a.closePath()}}}function M(a,t){var e,r,n=t.markerStart,i=t.markerEnd,s=t.markerStartOffset,h=t.markerEndOffset,c=t.points.points,l=c.length,M=c[0][0],v=c[0][1],f=c[l-1][0],m=c[l-1][1],d=0,T=0,p=0,u=0,P=0;n&&o(n)&&s&&(e=c[1][0]-c[0][0],r=c[1][1]-c[0][1],P=Math.atan2(r,e),d=Math.cos(P)*(s||0),T=Math.sin(P)*(s||0)),i&&o(i)&&h&&(e=c[l-1][0]-c[0][0],r=c[l-1][1]-c[0][1],P=Math.atan2(r,e),p=Math.cos(P)*(h||0),u=Math.sin(P)*(h||0)),a.moveTo(M+(d||p),v+(T||u));for(var k=1;k<l-1;k++){var I=c[k];a.lineTo(I[0],I[1])}a.lineTo(f,m)}function v(a,t){var e,r,n=t.markerStart,i=t.markerEnd,s=t.markerStartOffset,h=t.markerEndOffset,c=t.points.points,l=c.length,M=c[0][0],v=c[0][1],f=c[l-1][0],m=c[l-1][1],d=0,T=0,p=0,u=0,P=0;n&&o(n)&&s&&(e=c[1][0]-c[0][0],r=c[1][1]-c[0][1],P=Math.atan2(r,e),d=Math.cos(P)*(s||0),T=Math.sin(P)*(s||0)),i&&o(i)&&h&&(e=c[l-2][0]-c[l-1][0],r=c[l-2][1]-c[l-1][1],P=Math.atan2(r,e),p=Math.cos(P)*(h||0),u=Math.sin(P)*(h||0)),a.moveTo(M+d,v+T);for(var k=1;k<l-1;k++){var I=c[k];a.lineTo(I[0],I[1])}a.lineTo(f+p,m+u)}function f(a,t){var r=t.x,n=void 0===r?0:r,o=t.y,s=void 0===o?0:o,h=t.radius,c=t.width,l=t.height,M=c,v=l;if(h&&h.some((function(a){return 0!==a}))){var f=c>0?1:-1,m=l>0?1:-1,d=f+m===0,T=e(h.map((function(a){return i(a,0,Math.min(Math.abs(M)/2,Math.abs(v)/2))})),4),p=T[0],u=T[1],P=T[2],k=T[3];a.moveTo(f*p+n,s),a.lineTo(M-f*u+n,s),0!==u&&a.arc(M-f*u+n,m*u+s,u,-m*Math.PI/2,f>0?0:Math.PI,d),a.lineTo(M+n,v-m*P+s),0!==P&&a.arc(M-f*P+n,v-m*P+s,P,f>0?0:Math.PI,m>0?Math.PI/2:1.5*Math.PI,d),a.lineTo(f*k+n,v+s),0!==k&&a.arc(f*k+n,v-m*k+s,k,m>0?Math.PI/2:-Math.PI/2,f>0?Math.PI:0,d),a.lineTo(n,m*p+s),0!==p&&a.arc(f*p+n,m*p+s,p,f>0?Math.PI:0,m>0?1.5*Math.PI:Math.PI/2,d)}else a.rect(n,s,M,v)}var m=function(n){function o(){var a=n.apply(this,t([],e(arguments),!1))||this;return a.name="canvas-path-generator",a}return a(o,n),o.prototype.init=function(){var a,t=((a={})[r.CIRCLE]=s,a[r.ELLIPSE]=h,a[r.RECT]=f,a[r.LINE]=c,a[r.POLYLINE]=v,a[r.POLYGON]=M,a[r.PATH]=l,a[r.TEXT]=void 0,a[r.GROUP]=void 0,a[r.IMAGE]=void 0,a[r.HTML]=void 0,a[r.MESH]=void 0,a);this.context.pathGeneratorFactory=t},o.prototype.destroy=function(){delete this.context.pathGeneratorFactory},o}(n);export{m as Plugin};export default null;
