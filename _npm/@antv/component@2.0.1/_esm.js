/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@antv/component@2.0.1/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__extends as t,__spreadArray as e,__read as n,__rest as i,__assign as r,__classPrivateFieldGet as a,__values as o}from"../../tslib@2.6.3/_esm.js";import{isFunction as s,isPlainObject as l,isArray as u,memoize as c,isString as h,isNumber as d,isObject as p,isNil as f,isUndefined as y,deepMix as g,pick as v,clamp as b,isEqual as m,clone as x,min as w,minBy as S,max as k,maxBy as L,get as B,debounce as P,noop as A,set as C,createDOM as O,substitute as M,isElement as E,assign as z,omit as N}from"../util@3.3.7/_esm.js";import{ElementEvent as T,Group as j,Text as _,runtime as I,Rect as H,Circle as V,Path as F,Ellipse as G,Image as W,Line as D,Polygon as R,Polyline as Y,HTML as q,CustomElement as Z,DisplayObject as K,CustomEvent as U,parseColor as $}from"../g@6.0.10/_esm.js";import X from"../../svg-path-parser@1.1.0/_esm.js";import{Linear as J,Band as Q}from"../scale@0.4.16/_esm.js";function tt(t,e){e(t),t.children&&t.children.forEach((function(t){t&&tt(t,e)}))}function et(t){it(t,!0)}function nt(t){it(t,!1)}function it(t,e){var n=e?"visible":"hidden";tt(t,(function(t){t.attr("visibility",n)}))}var rt=function(i){function r(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=i.apply(this,e([],n(t),!1))||this;return a.isMutationObserved=!0,a.addEventListener(T.INSERTED,(function(){nt(a)})),a}return t(r,i),r}(j);function at(t){var e=t.appendChild(new rt({class:"offscreen"}));return nt(e),e}function ot(t){for(var e=t;e;){if("offscreen"===e.className)return!0;e=e.parent}return!1}var st=function(e){function n(t){void 0===t&&(t={});var n=t.style,a=i(t,["style"]);return e.call(this,r({style:r({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},a))||this}return t(n,e),Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=at(this)),this._offscreen},enumerable:!1,configurable:!0}),n.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},n}(_);function lt(t){return t*Math.PI/180}function ut(t){return Number((180*t/Math.PI).toPrecision(5))}var ct=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},t}();function ht(t){var e=t.getRenderBounds(),i=n(e.min,2),r=i[0],a=i[1],o=n(e.max,2),s=o[0],l=o[1];return new ct(r,a,s-r,l-a)}function dt(t,i){return s(t)?t.apply(void 0,e([],n(i),!1)):t}var pt,ft,yt=function(t,e){var i=function(t){return"".concat(e,"-").concat(t)},r=Object.fromEntries(Object.entries(t).map((function(t){var e=n(t,2),r=e[0],a=e[1],o=i(a);return[r,{name:o,class:".".concat(o),id:"#".concat(o),toString:function(){return o}}]})));return Object.assign(r,{prefix:i}),r},gt=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=5),Object.entries(e).forEach((function(a){var o=n(a,2),s=o[0],c=o[1],h=t;Object.prototype.hasOwnProperty.call(e,s)&&(c?l(c)?(l(t[s])||(h[s]={}),i<r?gt(t[s],c,i+1,r):h[s]=e[s]):u(c)?(h[s]=[],h[s]=h[s].concat(c)):h[s]=c:h[s]=c)}))},vt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=0;i<e.length;i+=1)gt(t,e[i]);return t},bt=function(t){return void 0!==t&&null!=t&&!Number.isNaN(t)};function mt(t){ft=t}var xt=c((function(t,e){var n=e.fontSize,i=e.fontFamily,r=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return ft?ft(t,n):(pt||(pt=I.offscreenCanvasCreator.getOrCreateContext(void 0)),pt.font=[a,o,r,"".concat(n,"px"),i].join(" "),pt.measureText(t).width)}),(function(t,e){return[t,Object.values(e||wt(t)).join()].join("")}),4096),wt=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",i=t.style.fontStyle||"normal",r=t.style.fontVariant,a=t.style.fontSize;return{fontSize:a="object"==typeof a?a.value:a,fontFamily:e,fontWeight:n,fontStyle:i,fontVariant:r}};function St(t){return"text"===t.nodeName?t:"g"===t.nodeName&&1===t.children.length&&"text"===t.children[0].nodeName?t.children[0]:null}function kt(t,e){var n=St(t);n&&n.attr(e)}function Lt(t,e,n){void 0===n&&(n="..."),kt(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function Bt(t,e,n,i){void 0===n&&(n=2),void 0===i&&(i="top"),kt(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:i})}function Pt(t){var e=t.canvas,n=t.touches,i=t.offsetX,r=t.offsetY;if(e)return[e.x,e.y];if(n){var a=n[0];return[a.clientX,a.clientY]}return i&&r?[i,r]:[0,0]}function At(t){return"function"==typeof t?t():h(t)||d(t)?new st({style:{text:String(t)}}):t}function Ct(t,e,n,i,r,a){return(t===e||Math.min(t,e)<=r&&r<=Math.max(t,e))&&(n===i||Math.min(n,i)<=a&&a<=Math.max(n,i))}function Ot(t,e,n){var i=t;(!t.length||e<t[0]||e===t[0]&&n<t[1])&&(i[0]=e,i[1]=n)}function Mt(t,e,i,r){var a=n(t,2),o=a[0],s=a[1],l=n(e,2),u=l[0],c=l[1],h=n(i,2),d=h[0],p=h[1],f=n(r,2),y=f[0],g=f[1],v=[];if((g-p)*(u-o)==(c-s)*(y-d))(c-s)*(d-o)==(p-s)*(u-o)&&(Ct(o,u,s,c,d,p)&&Ot(v,d,p),Ct(o,u,s,c,y,g)&&Ot(v,y,g),Ct(d,y,p,g,o,s)&&Ot(v,o,s),Ct(d,y,p,g,u,c)&&Ot(v,u,c));else{var b=(d*(g-p)+s*(y-d)-p*(y-d)-o*(g-p))/((u-o)*(g-p)-(y-d)*(c-s)),m=(o*(c-s)+p*(u-o)-s*(u-o)-d*(c-s))/((y-d)*(c-s)-(u-o)*(g-p));b>=0&&b<=1&&m>=0&&m<=1&&(v[0]=o+b*(u-o),v[1]=s+b*(c-s))}return v}function Et(t,e){var i=n(t,2),r=i[0],a=i[1],o=n(e,2),s=o[0],l=o[1];return Math.pow(Math.pow(r-s,2)+Math.pow(a-l,2),.5)}function zt(t,e){return t.reduce((function(t,n){return(t[n[e]]=t[n[e]]||[]).push(n),t}),{})}function Nt(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild}function Tt(t){return"string"==typeof t?Nt(t):t}function jt(t,e,n,i,r){return void 0===i&&(i=!0),void 0===r&&(r=function(t){t.node().removeChildren()}),t?n(e):(i&&r(e),null)}function _t(t,e,n,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!1),!!(i&&t===e||r&&t===n)||t>e&&t<n}var It=function(t,e){return function(n){return t*(1-n)+e*n}};function Ht(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0;return function(r){var a=new Array(i),o=new Array(n),s=0;for(s=0;s<i;++s)a[s]=Ft(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<i;++s)o[s]=a[s](r);return o}}function Vt(t,e){void 0===t&&(t={}),void 0===e&&(e={});var i={},r={};return Object.entries(e).forEach((function(e){var a=n(e,2),o=a[0],s=a[1];o in t?i[o]=Ft(t[o],s):r[o]=s})),function(t){return Object.entries(i).forEach((function(e){var i=n(e,2),a=i[0],o=i[1];return r[a]=o(t)})),r}}function Ft(t,e){return"number"==typeof t&&"number"==typeof e?It(t,e):Array.isArray(t)&&Array.isArray(e)?Ht(t,e):"object"==typeof t&&"object"==typeof e?Vt(t,e):function(e){return t}}function Gt(t,e,n,i){if(!i)return t.attr("__keyframe_data__",n),null;var a=i.duration,o=void 0===a?0:a,s=Ft(e,n),l=Math.ceil(+o/16),u=new Array(l).fill(0).map((function(t,e,n){return{__keyframe_data__:s(e/(n.length-1))}}));return t.animate(u,r({fill:"both"},i))}function Wt(t){for(var e=1/0,i=1/0,r=-1/0,a=-1/0,o=0;o<t.length;o++){var s=t[o],l=s.x,u=s.y,c=s.width,h=s.height,d=n([l+c,u+h],2),p=d[0],f=d[1];l<e&&(e=l),u<i&&(i=u),p>r&&(r=p),f>a&&(a=f)}return new ct(e,i,r-e,a-i)}var Dt=function(t,e,i){var r=t.width,a=t.height,o=i.flexDirection,s=void 0===o?"row":o;i.flexWrap;var l=i.justifyContent,u=void 0===l?"flex-start":l;i.alignContent;var c=i.alignItems,h=void 0===c?"flex-start":c,d="row"===s,p="row"===s||"column"===s,f=d?p?[1,0]:[-1,0]:p?[0,1]:[0,-1],y=n([0,0],2),g=y[0],v=y[1],b=e.map((function(t){var e,i=t.width,r=t.height,a=n([g,v],2),o=a[0],s=a[1];return e=n([g+i*f[0],v+r*f[1]],2),g=e[0],v=e[1],new ct(o,s,i,r)})),m=Wt(b),x={"flex-start":0,"flex-end":d?r-m.width:a-m.height,center:d?(r-m.width)/2:(a-m.height)/2},w=b.map((function(t){var e=t.x,n=t.y,i=ct.fromRect(t);return i.x=d?e+x[u]:e,i.y=d?n:n+x[u],i}));Wt(w);var S=function(t){var e=n(d?["height",a]:["width",r],2),i=e[0],o=e[1];switch(h){case"flex-start":default:return 0;case"flex-end":return o-t[i];case"center":return o/2-t[i]/2}},k=w.map((function(t){var e=t.x,n=t.y,i=ct.fromRect(t);return i.x=d?e:e+S(i),i.y=d?n+S(i):n,i})).map((function(e){var n,i,r=ct.fromRect(e);return r.x+=null!==(n=t.x)&&void 0!==n?n:0,r.y+=null!==(i=t.y)&&void 0!==i?i:0,r}));return k},Rt=function(t,e,n){return[]},Yt=function(t,e,n){if(0===e.length)return[];var i={flex:Dt,grid:Rt},r=n.display in i?i[n.display]:null;return(null==r?void 0:r.call(null,t,e,n))||[]};function qt(t,e){return[t[0]*e,t[1]*e]}function Zt(t,e){return[t[0]+e[0],t[1]+e[1]]}function Kt(t,e){return[t[0]-e[0],t[1]-e[1]]}function Ut(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function $t(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function Xt(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function Jt(t){if(0===t[0]&&0===t[1])return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function Qt(t,e,i){var r=n(t,2),a=r[0],o=r[1],s=n(e,2),l=s[0],u=s[1],c=a-l,h=o-u,d=Math.sin(i),p=Math.cos(i);return[c*p-h*d+l,c*d+h*p+u]}function te(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function ee(t,e){return+t.toPrecision(e)}function ne(t){return t.toLocaleString()}function ie(t){return t.toExponential()}function re(t,e){return void 0===e&&(e=0),Math.abs(t)<1e3?String(t):"".concat(ee(t/1e3,e).toLocaleString(),"K")}var ae=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},oe=function(t,e,n){return t>0&&Number.isFinite(t)?e:n},se=function(t,e){return t*e},le=function(t,e){return t/2+(e||0)/2};function ue(t,e){var n={},i=Array.isArray(e)?e:[e];for(var r in t)i.includes(r)||(n[r]=t[r]);return n}function ce(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=[[0,0],[1,1]]);for(var r=!!e,a=[],o=0,s=t.length;o<s;o+=2)a.push([t[o],t[o+1]]);var l,u,c,h=function(t,e,i,r){var a,o,s,l,u,c,h=[],d=!!r,p=[1/0,1/0],f=[-1/0,-1/0];if(d){p=(a=n(r,2))[0],f=a[1];for(var y=0,g=t.length;y<g;y+=1)p=Ut(p,b=t[y]),f=$t(f,b)}y=0;for(var v=t.length;y<v;y+=1){var b=t[y];if(0!==y||i)if(y!==v-1||i){o=t[[y?y-1:v-1,y-1][i?0:1]];var m=[0,0];m=qt(m=Kt(s=t[i?(y+1)%v:y+1],o),e);var x=Xt(b,o),w=Xt(b,s),S=x+w;0!==S&&(x/=S,w/=S);var k=qt(m,-x),L=qt(m,w);u=Zt(b,k),l=Ut(l=Zt(b,L),$t(s,b)),l=$t(l,Ut(s,b)),u=Ut(u=Zt(b,k=qt(k=Kt(l,b),-x/w)),$t(o,b)),l=Zt(b,L=qt(L=Kt(b,u=$t(u,Ut(o,b))),w/x)),d&&(u=Ut(u=$t(u,p),f),l=Ut(l=$t(l,p),f)),h.push(c),h.push(u),c=l}else u=b,h.push(c),h.push(u);else c=b}return i&&h.push(h.shift()),h}(a,.4,r,i),d=a.length,p=[];for(o=0;o<d-1;o+=1)l=h[2*o],u=h[2*o+1],c=a[o+1],p.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]]);return r&&(l=h[d],u=h[d+1],c=n(a,1)[0],p.push(["C",l[0],l[1],u[0],u[1],c[0],c[1]])),p}var he=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function de(t){return he.includes(t)}function pe(t){var e={};for(var n in t)de(n)&&(e[n]=t[n]);return e}function fe(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),i=[],r=0;r<t.length;r+=n)i.push(t[r]);return i}function ye(t,e,n){void 0===n&&(n=!1);var i=t.getBBox(),r=i.width,a=i.height,o=e/Math.max(r,a);return n&&(t.style.transform="scale(".concat(o,")")),o}var ge=function(){function t(t,e,n,r,a,o,s){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),void 0===a&&(a=[null,null,null,null,null]),void 0===o&&(o=[]),void 0===s&&(s=[]),i.add(this),this._elements=Array.from(t),this._data=e,this._parent=n,this._document=r,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}var i,r,s;return t.prototype.selectAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new r(e,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t):t;return new r(this._elements,null,this._parent,this._document,void 0,void 0,e)},t.prototype.select=function(t){var e="string"==typeof t?this._parent.querySelectorAll(t)[0]||null:t;return new r([e],null,e,this._document)},t.prototype.append=function(t){var e=this,i="function"==typeof t?t:function(){return e.createElement(t)},a=[];if(null!==this._data){for(var o=0;o<this._data.length;o++){var s=this._data[o],l=n(Array.isArray(s)?s:[s,null],2),u=l[0],c=l[1];(d=i(u,o)).__data__=u,null!==c&&(d.__fromElements__=c),this._parent.appendChild(d),a.push(d)}return new r(a,null,this._parent,this._document)}for(o=0;o<this._elements.length;o++){var h=this._elements[o],d=i(u=h.__data__,o);h.appendChild(d),a.push(d)}return new r(a,null,a[0],this._document)},t.prototype.maybeAppend=function(t,e){var n=a(this,i,"m",s).call(this,"#"===t[0]?t:"#".concat(t),e);return n.attr("id",t),n},t.prototype.maybeAppendByClassName=function(t,e){var n=t.toString(),r=a(this,i,"m",s).call(this,"."===n[0]?n:".".concat(n),e);return r.attr("className",n),r},t.prototype.maybeAppendByName=function(t,e){var n=a(this,i,"m",s).call(this,'[name="'.concat(t,'"]'),e);return n.attr("name",t),n},t.prototype.data=function(t,e,n){var i,a;void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(){return null});for(var s,l,u,c=[],h=[],d=new Set(this._elements),p=[],f=new Set,y=new Map(this._elements.map((function(t,n){return[e(t.__data__,n),t]}))),g=new Map(this._facetElements.map((function(t,n){return[e(t.__data__,n),t]}))),v=(s=this._elements,l=function(t){return n(t.__data__)},u=new Map,s.forEach((function(t){var e=l(t);u.has(e)||u.set(e,[]),u.get(e).push(t)})),u),b=0;b<t.length;b++){var m=t[b],x=e(m,b),w=n(m,b);if(y.has(x))(B=y.get(x)).__data__=m,B.__facet__=!1,h.push(B),d.delete(B),y.delete(x);else if(g.has(x)){(B=g.get(x)).__data__=m,B.__facet__=!0,h.push(B),g.delete(x)}else if(v.has(x)){var S=v.get(x);p.push([m,S]);try{for(var k=(i=void 0,o(S)),L=k.next();!L.done;L=k.next()){var B=L.value;d.delete(B)}}catch(t){i={error:t}}finally{try{L&&!L.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}v.delete(x)}else if(y.has(w)){(B=y.get(w)).__toData__?B.__toData__.push(m):B.__toData__=[m],f.add(B),d.delete(B)}else c.push(m)}var P=[new r([],c,this._parent,this._document),new r(h,null,this._parent,this._document),new r(d,null,this._parent,this._document),new r([],p,this._parent,this._document),new r(f,null,this._parent,this._document)];return new r(this._elements,null,this._parent,this._document,P)},t.prototype.merge=function(t){var i=e(e([],n(this._elements),!1),n(t._elements),!1),a=e(e([],n(this._transitions),!1),n(t._transitions),!1);return new r(i,null,this._parent,this._document,void 0,a)},t.prototype.createElement=function(t){if(this._document)return this._document.createElement(t,{});var e=r.registry[t];return e?new e:function(t){throw new Error(t)}("Unknown node type: ".concat(t))},t.prototype.join=function(t,e,n,i,r){void 0===t&&(t=function(t){return t}),void 0===e&&(e=function(t){return t}),void 0===n&&(n=function(t){return t.remove()}),void 0===i&&(i=function(t){return t}),void 0===r&&(r=function(t){return t.remove()});var a=t(this._enter),o=e(this._update),s=n(this._exit),l=i(this._merge),u=r(this._split);return o.merge(a).merge(s).merge(l).merge(u)},t.prototype.remove=function(){for(var t=function(t){var n=e._elements[t],i=e._transitions[t];i?i.then((function(){return n.remove()})):n.remove()},e=this,n=0;n<this._elements.length;n++)t(n);return new r([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(t){for(var e=0;e<this._elements.length;e++){var n=this._elements[e],i=n.__data__;t.call(n,i,e)}return this},t.prototype.attr=function(t,e){var n="function"!=typeof e?function(){return e}:e;return this.each((function(i,r){void 0!==e&&(this[t]=n.call(this,i,r))}))},t.prototype.style=function(t,e,n){void 0===n&&(n=!0);var i="function"==typeof e&&n?e:function(){return e};return this.each((function(n,r){void 0!==e&&(this.style[t]=i.call(this,n,r))}))},t.prototype.styles=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!0),this.each((function(i,r){var a=this;Object.entries(t).forEach((function(t){var o=n(t,2),s=o[0],l=o[1],u="function"==typeof l&&e?l:function(){return l};void 0!==l&&a.attr(s,u.call(a,i,r))}))}))},t.prototype.update=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,i){t&&this.update&&this.update(n.call(this,e,i))}))},t.prototype.maybeUpdate=function(t,e){void 0===e&&(e=!0);var n="function"==typeof t&&e?t:function(){return t};return this.each((function(e,i){t&&this.update&&this.update(n.call(this,e,i))}))},t.prototype.transition=function(t){var e=this._transitions;return this.each((function(n,i){e[i]=t.call(this,n,i)}))},t.prototype.on=function(t,e){return this.each((function(){this.addEventListener(t,e)})),this},t.prototype.call=function(t){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return t.call.apply(t,e([this._parent,this],n(i),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter((function(t){return!!t}))},t.prototype.parent=function(){return this._parent},r=t,i=new WeakSet,s=function(t,e){var n=this._elements[0],i=n.querySelector(t);if(i)return new r([i],null,this._parent,this._document);var a="string"==typeof e?this.createElement(e):e();return n.appendChild(a),new r([a],null,this._parent,this._document)},t.registry={g:j,rect:H,circle:V,path:F,text:st,ellipse:G,image:W,line:D,polygon:R,polyline:Y,html:q},t}();function ve(t){return new ge([t],null,t,t.ownerDocument)}function be(t,e,n){return t.querySelector(e)?ve(t).select(e):ve(t).append(n)}function me(t){if(d(t))return[t,t,t,t];if(u(t)){var e=t.length;if(1===e)return[t[0],t[0],t[0],t[0]];if(2===e)return[t[0],t[1],t[0],t[1]];if(3===e)return[t[0],t[1],t[2],t[1]];if(4===e)return t}return[0,0,0,0]}function xe(t){var e=t&&t.getRenderBounds();if(!e)return{width:0,height:0};var n=e.getMax(),i=e.getMin();return{width:n[0]-i[0],height:n[1]-i[1]}}function we(t){var e=t.getLocalBounds(),i=e.min,r=e.max,a=n([i,r],2),o=n(a[0],2),s=o[0],l=o[1],u=n(a[1],2),c=u[0],h=u[1];return{x:s,y:l,width:c-s,height:h-l,left:s,bottom:h,top:l,right:c}}function Se(t,e){var n=ve(t).append("text").node();return n.attr(r(r({},e),{visibility:"hidden"})),n}function ke(t,e){var i=n(t,2),r=i[0],a=i[1],o=n(e,2),s=o[0],l=o[1];return r!==s&&a===l}function Le(t,e){var i=n(t,2),r=i[0],a=i[1],o=n(e,2),s=o[0],l=o[1];return r===s&&a!==l}function Be(t,e){var i,r,a=e.attributes;try{for(var s=o(Object.entries(a)),l=s.next();!l.done;l=s.next()){var u=n(l.value,2),c=u[0],h=u[1];"id"!==c&&"className"!==c&&t.attr(c,h)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}}function Pe(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function Ae(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function Ce(t,e){return"".concat(e).concat(Pe(t))}function Oe(t,e,n){var i;void 0===n&&(n=!0);var r=e||(null===(i=t.match(/^([a-z][a-z0-9]+)/))||void 0===i?void 0:i[0])||"",a=t.replace(new RegExp("^(".concat(r,")")),"");return n?Ae(a):a}function Me(t,i){Object.entries(i).forEach((function(i){var r=n(i,2),a=r[0],o=r[1];e([t],n(t.querySelectorAll(a)),!1).filter((function(t){return t.matches(a)})).forEach((function(t){t&&(t.style.cssText+=Object.entries(o).reduce((function(t,e){return"".concat(t).concat(e.join(":"),";")}),""))}))}))}var Ee=function(t,e){if(!(null==t?void 0:t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function ze(t,e,i){void 0===i&&(i=!1);var r={};return Object.entries(t).forEach((function(t){var a=n(t,2),o=a[0],s=a[1];if("className"===o||"class"===o);else if(Ee(o,"show")&&Ee(Oe(o,"show"),e)!==i)o===Ce(e,"show")?r[o]=s:r[o.replace(new RegExp(Pe(e)),"")]=s;else if(!Ee(o,"show")&&Ee(o,e)!==i){var l=Oe(o,e);"filter"===l&&"function"==typeof s||(r[l]=s)}})),r}function Ne(t,e){return Object.entries(t).reduce((function(t,i){var r=n(i,2),a=r[0],o=r[1];return a.startsWith("show")?t["show".concat(e).concat(a.slice(4))]=o:t["".concat(e).concat(Pe(a))]=o,t}),{})}function Te(t,e){void 0===e&&(e=["x","y","class","className"]);var i=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},a={};return Object.entries(t).forEach((function(t){var o=n(t,2),s=o[0],l=o[1];e.includes(s)||(-1!==i.indexOf(s)?a[s]=l:r[s]=l)})),[r,a]}function je(t,e,i){return void 0===e&&(e=1024),void 0===i&&(i=1014),function(r,a,o){return X(t).map((function(t){var s=[];return s.push(!0===t.relative?t.code.toLowerCase():t.code.toUpperCase()),[[t.x1,t.y1],[t.x2,t.y2],[t.x,t.y]].forEach((function(l){var u=n(l,2),c=u[0],h=u[1];void 0!==c&&s.push(!0===t.relative?c/e*2*o:r-o+2*o*(c/e)),void 0!==h&&s.push(!0===t.relative?h/i*2*o:a-o+2*o*(h/i))})),s}))}}function _e(t){var e=/<path\s+d="(.*?)"/i.exec(t),n=/viewBox="\d+\s+\d+\s+(\d+)\s+(\d+)"/i.exec(t);if(null===e||e.length<2)return function(){return[]};var i=1024,r=1024;return null!==n&&n.length>=3&&(Number.isNaN(parseInt(n[1],10))||(i=parseInt(n[1],10)),Number.isNaN(parseInt(n[2],10))||(r=parseInt(n[2],10))),je(e[1],i,r)}function Ie(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),function(n,i,r){var a,o=r.value;"function"==typeof o&&(r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!a){var r=this;e&&o.apply(r,n),a=window.setTimeout((function(){o.apply(r,n),a=null}),t)}})}}var He=["year","month","day","hour","minute","second"],Ve=["YYYY","MM","DD","hh","mm","ss"];function Fe(t){return t instanceof Date?t:new Date(t)}function Ge(t){for(var e=n(t,2),i=e[0],r=e[1],a=He.indexOf(i),o=He.indexOf(r),s="",l=a;l<=o;l+=1)if(s+=Ve[l],l<o){var u="-";2===l?u=" ":l>2&&(u=":"),s+=u}return s}function We(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},i=e;return Object.keys(n).forEach((function(t){var e=n[t];i=i.replace(t,"YYYY"===t?"".concat(e):"".concat(e).padStart(2,"0"))})),i}function De(t,e){return Fe(t).getTime()-Fe(e).getTime()}function Re(t,e){var i=n([Fe(t),Fe(e)],2),r=i[0],a=i[1];return r.getFullYear()!==a.getFullYear()?"year":r.getMonth()!==a.getMonth()?"month":r.getDay()!==a.getDay()?"day":r.getHours()!==a.getHours()?"hour":r.getMinutes()!==a.getMinutes()?"minute":"second"}function Ye(t,e){var n=new Date(t);return{year:function(t){t.setMonth(0),t.setHours(0,0,0,0)},month:function(t){t.setDate(1),t.setHours(0,0,0,0)},day:function(t){return t.setHours(0,0,0,0)},hour:function(t){return t.setMinutes(0,0,0)},minute:function(t){return t.setSeconds(0,0)},second:function(t){return t.setMilliseconds(0)}}[e](n),We(n,Ge(["year",e]))}function qe(t){var e=localStorage.getItem("__debug__");return function(n,i,r){var a="[".concat(i,"] ").concat(t),o=r.value;"function"==typeof o&&(r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e&&console.time(a),o.apply(this,t),e&&console.timeEnd(a)})}}function Ze(t,e,i){var r=t.getBBox(),a=r.width,o=r.height,s=n([e,i].map((function(t,e){var n;return t.includes("%")?parseFloat((null===(n=t.match(/[+-]?([0-9]*[.])?[0-9]+/))||void 0===n?void 0:n[0])||"0")/100*(0===e?a:o):t})),2);return[s[0],s[1]]}function Ke(t,e){if(e)try{var n=e.replace(/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,(function(e,n,i){return"translate(".concat(Ze(t,n,i),")")}));t.attr("transform",n)}catch(t){}}function Ue(t){var e;return(null===(e=t[0])||void 0===e?void 0:e.map((function(e,n){return t.map((function(t){return t[n]}))})))||[]}function $e(){it(this,"hidden"!==this.attributes.visibility)}var Xe=function(e){function n(t,n){void 0===n&&(n={});var i=e.call(this,vt({},{style:n},t))||this;return i.initialized=!1,i._defaultOptions=n,i}return t(n,e),Object.defineProperty(n.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=at(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),n.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},n.prototype.disconnectedCallback=function(){var t;null===(t=this._offscreen)||void 0===t||t.destroy()},n.prototype.attributeChangedCallback=function(t){"visibility"===t&&$e.call(this)},n.prototype.update=function(t,e){var n;return this.attr(vt({},this.attributes,t||{})),null===(n=this.render)||void 0===n?void 0:n.call(this,this.attributes,this,e)},n.prototype.clear=function(){this.removeChildren()},n.prototype.bindEvents=function(t,e){},n.prototype.getSubShapeStyle=function(t){return t.x,t.y,t.transform,t.transformOrigin,t.class,t.className,t.zIndex,i(t,["x","y","transform","transformOrigin","class","className","zIndex"])},n}(Z),Je=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},Qe=Je,tn=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},en=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},nn=en;function rn(t){var e=function(t){var e="default";if(p(t)&&t instanceof Image)e="image";else if(s(t))e="symbol";else if(h(t)){var n=new RegExp("data:(image|text)");e=t.match(n)?"base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?"url":"symbol"}return e}(t);return["base64","url","image"].includes(e)?"image":t&&"symbol"===e?"path":null}var an=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(t,e){var a=t.x,o=void 0===a?0:a,l=t.y,u=void 0===l?0:l,c=this.getSubShapeStyle(t),h=c.symbol,d=c.size,p=void 0===d?16:d,f=i(c,["symbol","size"]),y=rn(h);jt(!!y,ve(e),(function(t){t.maybeAppendByClassName("marker",y).attr("className","marker ".concat(y,"-marker")).call((function(t){if("image"===y){var e=2*p;t.styles({img:h,width:e,height:e,x:o-p,y:u-p})}else{e=p/2;var i=s(h)?h:n.getSymbol(h);t.styles(r({d:null==i?void 0:i(o,u,e)},f))}}))}))},n.MARKER_SYMBOL_MAP=new Map,n.registerSymbol=function(t,e){n.MARKER_SYMBOL_MAP.set(t,e)},n.getSymbol=function(t){return n.MARKER_SYMBOL_MAP.get(t)},n.getSymbols=function(){return Array.from(n.MARKER_SYMBOL_MAP.keys())},n}(Xe);an.registerSymbol("cross",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]})),an.registerSymbol("hyphen",(function(t,e,n){return[["M",t-n,e],["L",t+n,e]]})),an.registerSymbol("line",tn),an.registerSymbol("plus",(function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]})),an.registerSymbol("tick",(function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]})),an.registerSymbol("circle",Je),an.registerSymbol("point",Qe),an.registerSymbol("bowtie",(function(t,e,n){var i=n-1.5;return[["M",t-n,e-i],["L",t+n,e+i],["L",t+n,e-i],["L",t-n,e+i],["Z"]]})),an.registerSymbol("hexagon",(function(t,e,n){var i=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+i,e-n/2],["L",t+i,e+n/2],["L",t,e+n],["L",t-i,e+n/2],["L",t-i,e-n/2],["Z"]]})),an.registerSymbol("square",(function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]})),an.registerSymbol("diamond",(function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]})),an.registerSymbol("triangle",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+i],["L",t,e-i],["L",t+n,e+i],["Z"]]})),an.registerSymbol("triangle-down",(function(t,e,n){var i=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+i],["Z"]]})),an.registerSymbol("line",tn),an.registerSymbol("dot",en),an.registerSymbol("dash",nn),an.registerSymbol("smooth",(function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]})),an.registerSymbol("hv",(function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]})),an.registerSymbol("vh",(function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]})),an.registerSymbol("hvh",(function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]})),an.registerSymbol("vhv",(function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}));var on=function(e){function i(t){return e.call(this,t,{padding:4,spacing:4})||this}return t(i,e),i.prototype.render=function(t,e){var i=t.padding,a=void 0===i?0:i,o=t.marker,s=t.text,l=t.radius,u=t.spacing,c=t.align,h=t.verticalAlign,d=ze(t,"label"),p=ze(t,"background"),y=n(me(a),4),g=y[0],v=y[1],b=y[2],m=y[3],x=be(e,".tag-content","g").attr("className","tag-content").style("zIndex",0).node(),w=o||{symbol:"triangle",size:0},S=function(t,e){var n=t.getLocalBounds();return{x:n.halfExtents[0]?n.max[0]+(e||0):t.style.x,y:n.halfExtents[1]?(n.min[1]+n.max[1])/2:t.style.y}}(be(x,".tag-marker",(function(){return new an({style:w})})).attr("className","tag-marker").update(w).node(),u),k=S.x,L=S.y;ve(x).maybeAppendByClassName("tag-text",(function(){return new st})).styles(r(r({fontSize:12,text:f(s)?"":"".concat(s),x:k,y:L},d),{textBaseline:"middle"})).call((function(t){s||t.remove()})),function(t,e,n,i,r){var a=t.getLocalBounds(),o=0,s=0;"start"===i&&(o=e),"center"===i&&(o=-a.halfExtents[0]),"end"===i&&(o=-e-2*a.halfExtents[0]),"top"===r&&(s=n+a.halfExtents[1]),"middle"===r&&(s=0),"bottom"===r&&(s=n-2*a.halfExtents[1]),t.setLocalPosition([o,s])}(x,m,g,c||"start",h||"top");var B=x.getLocalBounds();ve(e).maybeAppendByClassName("tag-background","rect").styles(r({zIndex:-1,y:B.min[1]-g,x:B.min[0]-m,width:null!==p?m+v+2*B.halfExtents[0]:0,height:null!==p?g+b+2*B.halfExtents[1]:0,radius:null!=l?l:2,fill:"#fafafa",stroke:"#d9d9d9",lineWidth:1},p))},i.tag="tag",i}(Xe),sn={small:{textFontSize:10,buttonWidth:40,buttonHeight:20,markerSize:8},middle:{textFontSize:12,buttonWidth:60,buttonHeight:30,markerSize:12},large:{textFontSize:16,buttonWidth:80,buttonHeight:40,markerSize:16}},ln={primary:{default:{textFill:"#fff",buttonFill:"#1890ff",buttonLineWidth:0,markerFill:"#1890ff"},active:{buttonFill:"#40a9ff",markerFill:"#40a9ff"},disabled:{}},dashed:{default:{buttonFill:"transparent",buttonStroke:"#bbb",buttonLineDash:[5,5]},active:{},disabled:{}},link:{default:{textFill:"#1890ff",buttonFill:"transparent",buttonLineWidth:0,markerFill:"#1890ff"},active:{},disabled:{}},text:{default:{textFill:"#000",buttonFill:"transparent",buttonLineWidth:0,markerFill:"#000"},active:{},disabled:{}},default:{default:{textFill:"#000",buttonFill:"transparent",buttonStroke:"#bbb",markerFill:"#bbb"},active:{textFill:"#1890ff",buttonStroke:"#1890ff",markerStroke:"#1890ff"},disabled:{}}},un={strict:{textFill:"#b8b8b8"},buttonStroke:"#d9d9d9",buttonFill:"#f5f5f5",markerStroke:"#d9d9d9"},cn=function(e){function i(t){var n=e.call(this,t,{cursor:"pointer",padding:10,size:"middle",type:"default",text:"",state:"default",markerAlign:"left",markerSpacing:5,default:{buttonLineWidth:1,buttonRadius:5},active:{}})||this;return n.state="default",n.clickEvents=function(){var t=n.attributes,e=t.onClick;"disabled"!==t.state&&(null==e||e.call(n,n))},n.mouseenterEvent=function(){"disabled"!==n.attributes.state&&(n.state="active",n.render(n.attributes,n))},n.mouseleaveEvent=function(){var t=n.attributes.state;n.state=t,n.render(n.attributes,n)},n}return t(i,e),Object.defineProperty(i.prototype,"markerSize",{get:function(){var t=this.attributes.markerSymbol,e=this.getStyle("marker");return t?(null==e?void 0:e.size)||2:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textAvailableWidth",{get:function(){var t=this.attributes,e=t.markerSymbol,n=t.padding,i=t.ellipsis,r=t.width,a=t.markerSpacing;if(!i)return 1/0;var o=y(r)?this.getStyle("button").width:r;return e?o-2*n-a-this.markerSize:o-2*n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buttonHeight",{get:function(){var t=this.attributes.height;return t?+t:+this.getStyle("button").height},enumerable:!1,configurable:!0}),i.prototype.getStyle=function(t){var e=this.attributes,n=e.size,i=e.type,r=this.state,a=g({},sn[n],ln[i][r],this.attributes.default,this.attributes[r]);return"disabled"===r&&(Object.keys(a).forEach((function(t){t in un&&(a[t]=un[t])})),Object.keys(un.strict).forEach((function(t){a[t]=un.strict[t]})),g(a,this.attributes.disabled||{})),ze(a,t)},i.prototype.render=function(t,e){var i=t.text,a=void 0===i?"":i,o=t.padding,s=void 0===o?0:o,l=t.markerSymbol,u=t.markerSpacing,c=void 0===u?0:u,h=t.x,d=void 0===h?0:h,p=t.y,f=void 0===p?0:p;e.attr({cursor:"disabled"===this.state?"not-allowed":"pointer"});var y=n(me(s),4);y[0];var g=y[1];y[2];var v=y[3],b=this.buttonHeight,m=this.getStyle("marker"),x=this.markerSize,w=r(r({},m),{symbol:l,x:d+v+x/2,y:f+b/2,size:x}),S=be(e,".marker",(function(){return new an({className:"marker",style:w})})).update({style:w}).node().getLocalBounds(),k=this.getStyle("text");this.textShape=be(e,".text","text").attr("className","text").styles(r(r({x:d+(x?S.max[0]+c:v),y:f+b/2},k),{text:a,textAlign:"left",textBaseline:"middle",wordWrap:!0,wordWrapWidth:this.textAvailableWidth,maxLines:1,textOverflow:"..."})).node();var L=this.textShape.getLocalBounds(),B=this.getStyle("button");ve(e).maybeAppendByClassName(".background","rect").styles(r(r({zIndex:-1},B),{x:d,y:f,height:b,width:v+(x?x+c:0)+2*L.halfExtents[0]+g}))},i.prototype.update=function(t){void 0===t&&(t={}),this.attr(g({},this.attributes,t));var e=this.attributes.state;this.state=e,this.render(this.attributes,this)},i.prototype.setState=function(t){this.update({state:t})},i.prototype.hide=function(){this.style.visibility="hidden"},i.prototype.show=function(){this.style.visibility="visible"},i.prototype.bindEvents=function(){this.addEventListener("click",this.clickEvents),this.addEventListener("mouseenter",this.mouseenterEvent),this.addEventListener("mouseleave",this.mouseleaveEvent)},i.tag="button",i}(Xe),hn=function(e){function i(t){return e.call(this,g({},i.defaultOptions,t))||this}return t(i,e),i.prototype.render=function(t,e){var a=t.x,o=t.y,s=t.items;t.textStyle;var l=t.padding,u=void 0===l?0:l,c=t.width,h=t.separator,d=n(me(u),3),p=d[0],y=d[1],g=d[2],b=ze(t,"tag"),m=be(e,".container","g").styles({className:"container",x:a+g,y:o+p}),x=0,w=0;m.node().removeChildren();for(var S=function(t){var e=s[t],n=new on({className:"breadcrumb-item",style:r(r(r(r({transform:"translate(".concat(x,", ").concat(w,")")},b),{text:f(e.text)?e.id:e.text}),v(e,["marker"])),{padding:0})});m.append((function(){return n}));var a=n.getLocalBounds(),o=2*a.halfExtents[0],l=2*a.halfExtents[1];(x+=o,f(c))||x>c-y&&(n.attr({transform:"translateY(".concat(w+l,")")}),x=o,w+=l);k.bindInnerEvents(n,e);var u=h||{},d=u.spacing,p=void 0===d?0:d,g=u.text,S=void 0===g?"/":g,L=u.style;if(t!==s.length-1){var B=new st({className:"".concat(i.tag,"-separator"),id:"".concat(i.tag,"-separator-").concat(t),style:r(r({x:x+p,y:w+l/2},L),{text:S,textAlign:"end",textBaseline:"middle"})});m.append((function(){return B}));var P=B.getLocalBounds();x+=2*P.halfExtents[0]+p}},k=this,L=0;L<s.length;L++)S(L)},i.prototype.update=function(t){this.attr(g({},this.attributes,t)),this.render(this.attributes,this)},i.prototype.bindInnerEvents=function(t,e){var n=this.attributes,i=n.items,r=n.onClick;r&&t.addEventListener("click",(function(){r.call(t,e.id,e,i)}))},i.tag="breadcrumb",i.defaultOptions={style:{separator:{text:"/",style:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},spacing:8},textStyle:{default:{fontSize:14,fill:"rgba(0, 0, 0, 0.45)"},active:{fill:"#5468ff",cursor:"pointer"}},padding:[8,8,8,8]}},i}(Xe),dn=function(e){function n(t){var n=this,a=t.style,o=i(t,["style"]);return(n=e.call(this,g({},{type:"column"},r({style:a},o)))||this).columnsGroup=new j({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return t(n,e),n.prototype.render=function(){var t=this.attributes,e=t.columns,n=t.x,i=t.y;this.columnsGroup.style.transform="translate(".concat(n,", ").concat(i,")"),ve(this.columnsGroup).selectAll(".column").data(e.flat()).join((function(t){return t.append("rect").attr("className","column").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},n.prototype.update=function(t){this.attr(vt({},this.attributes,t)),this.render()},n.prototype.clear=function(){this.removeChildren()},n}(K),pn=function(e){function n(t){var n=this,a=t.style,o=i(t,["style"]);return(n=e.call(this,g({},{type:"lines"},r({style:a},o)))||this).linesGroup=n.appendChild(new j),n.areasGroup=n.appendChild(new j),n.render(),n}return t(n,e),n.prototype.render=function(){var t=this.attributes,e=t.lines,n=t.areas,i=t.x,r=t.y;this.style.transform="translate(".concat(i,", ").concat(r,")"),e&&this.renderLines(e),n&&this.renderAreas(n)},n.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},n.prototype.update=function(t){this.attr(vt({},this.attributes,t)),this.render()},n.prototype.renderLines=function(t){ve(this.linesGroup).selectAll(".line").data(t).join((function(t){return t.append("path").attr("className","line").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.attr(t)}))}),(function(t){return t.remove()}))},n.prototype.renderAreas=function(t){ve(this.linesGroup).selectAll(".area").data(t).join((function(t){return t.append("path").attr("className","area").each((function(t){this.attr(t)}))}),(function(t){return t.each((function(t){this.style(t)}))}),(function(t){return t.remove()}))},n}(K);function fn(t,i){void 0===i&&(i=!1);var r=i?t.length-1:0,a=t.map((function(t,i){return e([i===r?"M":"L"],n(t),!1)}));return i?a.reverse():a}function yn(t,i){if(void 0===i&&(i=!1),t.length<=2)return fn(t);for(var r=[],a=t.length,o=0;o<a;o+=1){var s=i?t[a-o-1]:t[o];m(s,r.slice(-2))||r.push.apply(r,e([],n(s),!1))}var l=ce(r,!1);return i?l.unshift(e(["M"],n(t[a-1]),!1)):l.unshift(e(["M"],n(t[0]),!1)),l}function gn(t,e,n){var i=x(t);return i.push(["L",e,n],["L",0,n],["Z"]),i}function vn(t){return 0===t.length?[0,0]:[w(S(t,(function(t){return w(t)||0}))),k(L(t,(function(t){return k(t)||0})))]}function bn(t){for(var e=x(t),i=e[0].length,r=n([Array(i).fill(0),Array(i).fill(0)],2),a=r[0],o=r[1],s=0;s<e.length;s+=1)for(var l=e[s],u=0;u<i;u+=1)l[u]>=0?(l[u]+=a[u],a[u]=l[u]):(l[u]+=o[u],o[u]=l[u]);return e}var mn=function(i){function a(t){return i.call(this,t,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return t(a,i),Object.defineProperty(a.prototype,"rawData",{get:function(){var t=this.attributes.data;if(!t||0===(null==t?void 0:t.length))return[[]];var e=x(t);return d(e[0])?[e]:e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.attributes.isStack?bn(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"baseline",{get:function(){var t=this.scales.y,e=n(t.getOptions().domain||[0,0],2),i=e[0],r=e[1];return r<0?t.map(r):t.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"containerShape",{get:function(){var t=this.attributes;return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"linesStyle",{get:function(){var t=this,i=this.attributes,a=i.type,o=i.isStack,s=i.smooth;if("line"!==a)throw new Error("linesStyle can only be used in line type");var l=ze(this.attributes,"area"),u=ze(this.attributes,"line"),c=this.containerShape.width,h=this.data;if(0===h[0].length)return{lines:[],areas:[]};var d=this.scales,p=function(t,e){var i,r=e.x,a=e.y,o=n(a.getOptions().range||[0,0],2),s=o[0],l=o[1];return l>s&&(i=n([s,l],2),l=i[0],s=i[1]),t.map((function(t){return t.map((function(t,e){return[r.map(e),b(a.map(t),l,s)]}))}))}(h,{type:"line",x:d.x,y:d.y}),f=[];if(l){var y=this.baseline;f=o?s?function(t,i,r){for(var a=[],o=t.length-1;o>=0;o-=1){var s=t[o],l=yn(s),u=void 0;if(0===o)u=gn(l,i,r);else{var c=yn(t[o-1],!0),h=s[0];c[0][0]="L",u=e(e(e([],n(l),!1),n(c),!1),[e(["M"],n(h),!1),["Z"]],!1)}a.push(u)}return a}(p,c,y):function(t,i,r){for(var a=[],o=t.length-1;o>=0;o-=1){var s=fn(t[o]),l=void 0;if(0===o)l=gn(s,i,r);else{var u=fn(t[o-1],!0);u[0][0]="L",l=e(e(e([],n(s),!1),n(u),!1),[["Z"]],!1)}a.push(l)}return a}(p,c,y):function(t,e,n,i){return t.map((function(t){return gn(e?yn(t):fn(t),n,i)}))}(p,s,c,y)}return{lines:p.map((function(e,n){return r({stroke:t.getColor(n),d:s?yn(e):fn(e)},u)})),areas:f.map((function(e,n){return r({d:e,fill:t.getColor(n)},l)}))}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"columnsStyle",{get:function(){var t=this,e=ze(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if("column"!==o)throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,u=this.rawData;if(!u)return{columns:[]};a&&(u=bn(u));var c=this.createScales(u),h=c.x,d=c.y,p=n(vn(u),2),f=p[0],y=p[1],g=new J({domain:[0,y-(f>0?0:f)],range:[0,l*s]}),v=h.getBandWidth(),b=this.rawData;return{columns:u.map((function(n,i){return n.map((function(n,o){var s=v/u.length;return r(r({fill:t.getColor(i)},e),a?{x:h.map(o),y:d.map(n),width:v,height:g.map(b[i][o])}:{x:h.map(o)+s*i,y:n>=0?d.map(n):d.map(0),width:s,height:g.map(Math.abs(n))})}))}))}},enumerable:!1,configurable:!0}),a.prototype.render=function(t,e){be(e,".container","rect").attr("className","container").node();var n=t.type,i=t.x,a=t.y,o="spark".concat(n),s=r({x:i,y:a},"line"===n?this.linesStyle:this.columnsStyle);ve(e).selectAll(".spark").data([n]).join((function(t){return t.append((function(t){return"line"===t?new pn({className:o,style:s}):new dn({className:o,style:s})})).attr("className","spark ".concat(o))}),(function(t){return t.update(s)}),(function(t){return t.remove()}))},a.prototype.getColor=function(t){var e=this.attributes.color;return u(e)?e[t%e.length]:s(e)?e.call(null,t):e},a.prototype.createScales=function(t){var e,i,r=this.attributes,a=r.type,o=r.scale,s=r.range,l=void 0===s?[]:s,u=r.spacing,c=this.containerShape,h=c.width,d=c.height,p=n(vn(t),2),f=p[0],y=p[1],g=new J({domain:[null!==(e=l[0])&&void 0!==e?e:f,null!==(i=l[1])&&void 0!==i?i:y],range:[d,d*(1-o)]});return"line"===a?{type:a,x:new J({domain:[0,t[0].length-1],range:[0,h]}),y:g}:{type:a,x:new Q({domain:t[0].map((function(t,e){return e})),range:[0,h],paddingInner:u,paddingOuter:u/2,align:.5}),y:g}},a.tag="sparkline",a}(Xe);function xn(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],i=Object.fromEntries(Object.entries(t).filter((function(t){var i=n(t,1)[0];return!e.includes(i)})));return Object.fromEntries(e.map((function(e){return function(t){return"boolean"!=typeof t&&"enter"in t&&"update"in t&&"exit"in t}(t)?!1===t[e]?[e,!1]:[e,r(r({},t[e]),i)]:[e,i]})))}function wn(t,e){t?t.finished.then(e):e()}function Sn(t,e){"update"in t?t.update(e):t.attr(e)}function kn(t,e,n){return 0===e.length?null:n?t.animate(e,n):(Sn(t,{style:e.slice(-1)[0]}),null)}function Ln(t,e,i){var a={},o={};return Object.entries(e).forEach((function(e){var i=n(e,2),r=i[0],s=i[1];if(!f(s)){var l=t.style[r]||t.parsedStyle[r]||0;l!==s&&(a[r]=l,o[r]=s)}})),i?kn(t,[a,o],r({fill:"both"},i)):(Sn(t,o),null)}function Bn(t,e){return t.style.opacity||(t.style.opacity=1),Ln(t,{opacity:0},e)}var Pn={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},An={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},Cn={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},On=yt({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Mn=yt({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),En=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(t,e){var n=t.x,a=t.y,o=t.size,s=void 0===o?10:o,l=t.radius,u=void 0===l?s/4:l,c=t.orientation,h=i(t,["x","y","size","radius","orientation"]),d=s,p=2.4*d,f=ve(e).maybeAppendByClassName(Mn.iconRect,"rect").styles(r(r({},h),{width:d,height:p,radius:u,x:n-d/2,y:a-p/2,transformOrigin:"center"})),y=n+1/3*d-d/2,g=n+2/3*d-d/2,v=a+1/4*p-p/2,b=a+3/4*p-p/2;f.maybeAppendByClassName("".concat(Mn.iconLine,"-1"),"line").styles(r({x1:y,x2:y,y1:v,y2:b},h)),f.maybeAppendByClassName("".concat(Mn.iconLine,"-2"),"line").styles(r({x1:g,x2:g,y1:v,y2:b},h)),"vertical"===c&&(f.node().style.transform="rotate(90)")},n}(Xe),zn=function(e){function a(t){return e.call(this,t,Cn)||this}return t(a,e),a.prototype.renderLabel=function(t){var e=this,a=this.attributes,o=a.x,s=a.y,l=a.showLabel,u=ze(this.attributes,"label"),c=u.x,h=void 0===c?0:c,d=u.y,p=void 0===d?0:d,f=u.transform,y=u.transformOrigin,g=i(u,["x","y","transform","transformOrigin"]),v=n(Te(g,[]),2),b=v[0],m=v[1],x=ve(t).maybeAppendByClassName(Mn.labelGroup,"g").styles(m),w=r(r({},An),b),S=w.text,k=i(w,["text"]);jt(!!l,x,(function(t){e.label=t.maybeAppendByClassName(Mn.label,"text").styles(r(r({},k),{x:o+h,y:s+p,transform:f,transformOrigin:y,text:"".concat(S)})),e.label.on("mousedown",(function(t){t.stopPropagation()})),e.label.on("touchstart",(function(t){t.stopPropagation()}))}))},a.prototype.renderIcon=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.orientation,o=e.type,s=r(r({x:n,y:i,orientation:a},Pn),ze(this.attributes,"icon")),l=this.attributes.iconShape,u=void 0===l?function(){return new En({style:s})}:l;ve(t).maybeAppendByClassName(Mn.iconGroup,"g").selectAll(Mn.icon.class).data([u]).join((function(t){return t.append("string"==typeof u?u:function(){return u(o)}).attr("className",Mn.icon.name)}),(function(t){return t.update(s)}),(function(t){return t.remove()}))},a.prototype.render=function(t,e){this.renderIcon(e),this.renderLabel(e)},a}(Xe),Nn=function(e){function i(t){var n=e.call(this,t,r(r(r({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(t){return t.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Ne(Cn,"handle")),Ne(Pn,"handleIcon")),Ne(An,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(t){return function(e){e.stopPropagation(),n.target=t,n.prevPos=n.getOrientVal(Pt(e));var i=n.availableSpace,r=i.x,a=i.y,o=n.getBBox(),s=o.x,l=o.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([r,a])-n.getOrientVal([+s,+l])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(t){var e=n.attributes,i=e.slidable,r=e.brushable,a=e.type;t.stopPropagation();var o=n.getOrientVal(Pt(t)),s=o-n.prevPos;if(s){var l=n.getRatio(s);switch(n.target){case"start":i&&n.setValuesOffset(l);break;case"end":i&&n.setValuesOffset(0,l);break;case"selection":i&&n.setValuesOffset(l,l);break;case"track":if(!r)return;n.selectionWidth+=l,"range"===a?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0)}n.prevPos=o}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(t){var e=n.attributes,i=e.onChange,r=e.type,a="range"===r?t:t[1],o="range"===r?n.getValues():n.getValues()[1],s=new U("valuechange",{detail:{oldValue:a,value:o}});n.dispatchEvent(s),null==i||i(o)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return t(i,e),Object.defineProperty(i.prototype,"values",{get:function(){return this.attributes.values},set:function(t){this.attributes.values=this.clampValues(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sparklineStyle",{get:function(){if("horizontal"!==this.attributes.orientation)return null;var t=ze(this.attributes,"sparkline");return r(r({zIndex:0},this.availableSpace),t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"shape",{get:function(){var t=this.attributes,e=t.trackLength,i=t.trackSize,r=n(this.getOrientVal([[e,i],[i,e]]),2);return{width:r[0],height:r[1]}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"availableSpace",{get:function(){var t=this.attributes;t.x,t.y;var e=t.padding,i=n(me(e),4),r=i[0],a=i[1],o=i[2],s=i[3],l=this.shape;return{x:s,y:r,width:l.width-(s+a),height:l.height-(r+o)}},enumerable:!1,configurable:!0}),i.prototype.getValues=function(){return this.values},i.prototype.setValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1),this.attributes.values=t;var n=!1!==e&&this.attributes.animate;this.updateSelectionArea(n),this.updateHandlesPosition(n)},i.prototype.updateSelectionArea=function(t){var e=this.calcSelectionArea();this.foregroundGroup.selectAll(On.selection.class).each((function(n,i){Ln(this,e[i],t)}))},i.prototype.updateHandlesPosition=function(t){this.attributes.showHandle&&(this.startHandle&&Ln(this.startHandle,this.getHandleStyle("start"),t),this.endHandle&&Ln(this.endHandle,this.getHandleStyle("end"),t))},i.prototype.innerSetValues=function(t,e){void 0===t&&(t=[0,0]),void 0===e&&(e=!1);var n=this.values,i=this.clampValues(t);this.attributes.values=i,this.setValues(i),e&&this.onValueChange(n)},i.prototype.renderTrack=function(t){var e=this.attributes,n=e.x,i=e.y,a=ze(this.attributes,"track");this.trackShape=ve(t).maybeAppendByClassName(On.track,"rect").styles(r(r({x:n,y:i},this.shape),a))},i.prototype.renderBrushArea=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.brushable;this.brushArea=ve(t).maybeAppendByClassName(On.brushArea,"rect").styles(r({x:n,y:i,fill:"transparent",cursor:a?"crosshair":"default"},this.shape))},i.prototype.renderSparkline=function(t){var e=this,n=this.attributes,i=n.x,a=n.y;jt("horizontal"===n.orientation,ve(t).maybeAppendByClassName(On.sparklineGroup,"g"),(function(t){var n=r(r({},e.sparklineStyle),{x:i,y:a});t.maybeAppendByClassName(On.sparkline,(function(){return new mn({style:n})})).update(n)}))},i.prototype.renderHandles=function(){var t,e=this,n=this.attributes,i=n.showHandle,r=n.type,a=i?"range"===r?["start","end"]:["end"]:[],o=this;null===(t=this.foregroundGroup)||void 0===t||t.selectAll(On.handle.class).data(a.map((function(t){return{type:t}})),(function(t){return t.type})).join((function(t){return t.append((function(t){var n=t.type;return new zn({style:e.getHandleStyle(n)})})).each((function(t){var e=t.type;this.attr("class","".concat(On.handle.name," ").concat(e,"-handle"));var n="".concat(e,"Handle");o[n]=this,this.addEventListener("pointerdown",o.onDragStart(e))}))}),(function(t){return t.each((function(t){var e=t.type;this.update(o.getHandleStyle(e))}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");o[n]=void 0})).remove()}))},i.prototype.renderSelection=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.type,o=e.selectionType;this.foregroundGroup=ve(t).maybeAppendByClassName(On.foreground,"g");var s=ze(this.attributes,"selection"),l=function(t){return t.style("visibility",(function(t){return t.show?"visible":"hidden"})).style("cursor",(function(t){return"select"===o?"grab":"invert"===o?"crosshair":"default"})).styles(r(r({},s),{transform:"translate(".concat(n,", ").concat(i,")")}))},u=this;this.foregroundGroup.selectAll(On.selection.class).data("value"===a?[]:this.calcSelectionArea().map((function(t,e){return{style:r({},t),index:e,show:"select"===o?1===e:1!==e}})),(function(t){return t.index})).join((function(t){return t.append("rect").attr("className",On.selection.name).call(l).each((function(t,e){var n=this;1===e?(u.selectionShape=ve(this),this.on("pointerdown",(function(t){n.attr("cursor","grabbing"),u.onDragStart("selection")(t)})),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",(function(){n.attr("cursor","grabbing")})),this.addEventListener("pointerup",(function(){n.attr("cursor","pointer")})),this.addEventListener("pointerover",(function(){n.attr("cursor","pointer")}))):this.on("pointerdown",u.onDragStart("track"))}))}),(function(t){return t.call(l)}),(function(t){return t.remove()})),this.updateSelectionArea(!1),this.renderHandles()},i.prototype.render=function(t,e){this.renderTrack(e),this.renderSparkline(e),this.renderBrushArea(e),this.renderSelection(e)},i.prototype.clampValues=function(t,e){var i;void 0===e&&(e=4);var r=n(this.range,2),a=r[0],o=r[1],s=n(this.getValues().map((function(t){return ee(t,e)})),2),l=s[0],u=s[1],c=Array.isArray(t)?t:[l,null!=t?t:u],h=n((c||[l,u]).map((function(t){return ee(t,e)})),2),d=h[0],p=h[1];if("value"===this.attributes.type)return[0,b(p,a,o)];d>p&&(d=(i=n([p,d],2))[0],p=i[1]);var f=p-d;return f>o-a?[a,o]:d<a?l===a&&u===p?[a,p]:[a,f+a]:p>o?u===o&&l===d?[d,o]:[o-f,o]:[d,p]},i.prototype.calcSelectionArea=function(t){var e=n(this.clampValues(t),2),i=e[0],r=e[1],a=this.availableSpace,o=a.x,s=a.y,l=a.width,u=a.height;return this.getOrientVal([[{y:s,height:u,x:o,width:i*l},{y:s,height:u,x:i*l+o,width:(r-i)*l},{y:s,height:u,x:r*l,width:(1-r)*l}],[{x:o,width:l,y:s,height:i*u},{x:o,width:l,y:i*u+s,height:(r-i)*u},{x:o,width:l,y:r*u,height:(1-r)*u}]])},i.prototype.calcHandlePosition=function(t){var e=this.attributes.handleIconOffset,i=this.availableSpace,r=i.x,a=i.y,o=i.width,s=i.height,l=n(this.clampValues(),2),u=l[0],c=l[1],h="start"===t?-e:e,d=("start"===t?u:c)*this.getOrientVal([o,s])+h;return{x:r+this.getOrientVal([d,o/2]),y:a+this.getOrientVal([s/2,d])}},i.prototype.inferTextStyle=function(t){return"horizontal"===this.attributes.orientation?{}:"start"===t?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:"end"===t?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},i.prototype.calcHandleText=function(t){var e,n=this.attributes,i=n.type,a=n.orientation,o=n.formatter,s=n.autoFitLabel,l=ze(this.attributes,"handle"),u=ze(l,"label"),c=l.spacing,h=this.getHandleSize(),d=this.clampValues(),p=o("start"===t?d[0]:d[1]),f=new st({style:r(r(r({},u),this.inferTextStyle(t)),{text:p})}),y=f.getBBox(),g=y.width,v=y.height;if(f.destroy(),!s){if("value"===i)return{text:p,x:0,y:-v-c};var b=c+h+("horizontal"===a?g/2:0);return(e={text:p})["horizontal"===a?"x":"y"]="start"===t?-b:b,e}var m=0,x=0,w=this.availableSpace,S=w.width,k=w.height,L=this.calcSelectionArea()[1],B=L.x,P=L.y,A=L.width,C=L.height,O=c+h;if("horizontal"===a){var M=O+g/2;if("start"===t)m=B-O-g>0?-M:M;else m=S-B-A-O>g?M:-M}else{var E=v+O;x="start"===t?P-h>v?-E:O:k-(P+C)-h>v?E:-O}return{x:m,y:x,text:p}},i.prototype.getHandleLabelStyle=function(t){var e=ze(this.attributes,"handleLabel");return r(r(r({},e),this.calcHandleText(t)),this.inferTextStyle(t))},i.prototype.getHandleIconStyle=function(){var t=this.attributes.handleIconShape,e=ze(this.attributes,"handleIcon"),n=this.getOrientVal(["ew-resize","ns-resize"]),i=this.getHandleSize();return r({cursor:n,shape:t,size:i},e)},i.prototype.getHandleStyle=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.showLabel,o=e.showLabelOnInteraction,s=e.orientation,l=this.calcHandlePosition(t),u=l.x,c=l.y,h=this.calcHandleText(t),d=a;return!a&&o&&(d=!!this.target),r(r(r({},Ne(this.getHandleIconStyle(),"icon")),Ne(r(r({},this.getHandleLabelStyle(t)),h),"label")),{transform:"translate(".concat(u+n,", ").concat(c+i,")"),orientation:s,showLabel:d,type:t,zIndex:3})},i.prototype.getHandleSize=function(){var t=this.attributes,e=t.handleIconSize,n=t.width,i=t.height;return e||Math.floor((this.getOrientVal([+i,+n])+4)/2.4)},i.prototype.getOrientVal=function(t){var e=n(t,2),i=e[0],r=e[1];return"horizontal"===this.attributes.orientation?i:r},i.prototype.setValuesOffset=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1);var r=this.attributes.type,a=n(this.getValues(),2),o=[a[0]+("range"===r?t:0),a[1]+e].sort();i?this.setValues(o):this.innerSetValues(o,!0)},i.prototype.getRatio=function(t){var e=this.availableSpace,n=e.width,i=e.height;return t/this.getOrientVal([n,i])},i.prototype.dispatchCustomEvent=function(t,e,n){var i=this;t.on(e,(function(t){t.stopPropagation(),i.dispatchEvent(new U(n,{detail:t}))}))},i.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var t=this.brushArea;this.dispatchCustomEvent(t,"click","trackClick"),this.dispatchCustomEvent(t,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(t,"pointerleave","trackMouseleave"),t.on("pointerdown",this.onDragStart("track"))},i.prototype.onScroll=function(t){if(this.attributes.scrollable){var e=t.deltaX,n=t.deltaY||e,i=this.getRatio(n);this.setValuesOffset(i,i,!0)}},i.tag="slider",i}(Xe),Tn=function(e){function i(t){var i=e.call(this,t,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return i.range=[0,1],i.onValueChange=function(t){var e=i.attributes.value;if(t!==e){var n={detail:{oldValue:t,value:e}};i.dispatchEvent(new U("scroll",n)),i.dispatchEvent(new U("valuechange",n))}},i.onTrackClick=function(t){if(i.attributes.slidable){var e=n(i.getLocalPosition(),2),r=e[0],a=e[1],o=n(i.padding,4),s=o[0],l=o[3],u=i.getOrientVal([r+l,a+s]),c=(i.getOrientVal(Pt(t))-u)/i.trackLength;i.setValue(c,!0)}},i.onThumbMouseenter=function(t){i.dispatchEvent(new U("thumbMouseenter",{detail:t.detail}))},i.onTrackMouseenter=function(t){i.dispatchEvent(new U("trackMouseenter",{detail:t.detail}))},i.onThumbMouseleave=function(t){i.dispatchEvent(new U("thumbMouseleave",{detail:t.detail}))},i.onTrackMouseleave=function(t){i.dispatchEvent(new U("trackMouseleave",{detail:t.detail}))},i}return t(i,e),Object.defineProperty(i.prototype,"padding",{get:function(){return me(this.attributes.padding)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var t=this.attributes.value,e=n(this.range,2),i=e[0],r=e[1];return b(t,i,r)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trackLength",{get:function(){var t=this.attributes,e=t.viewportLength,n=t.trackLength;return void 0===n?e:n},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"availableSpace",{get:function(){var t=this.attributes.trackSize,e=this.trackLength,i=n(this.padding,4),r=i[0],a=i[1],o=i[2],s=i[3],l=n(this.getOrientVal([[e,t],[t,e]]),2);return{x:s,y:r,width:+l[0]-(s+a),height:+l[1]-(r+o)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trackRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.trackSize;return e?n/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"thumbRadius",{get:function(){var t=this.attributes,e=t.isRound,n=t.thumbRadius;if(!e)return 0;var i=this.availableSpace,r=i.width,a=i.height;return n||this.getOrientVal([a,r])/2},enumerable:!1,configurable:!0}),i.prototype.getValues=function(t){void 0===t&&(t=this.value);var e=this.attributes,i=e.viewportLength/e.contentLength,r=n(this.range,2),a=r[0],o=t*(r[1]-a-i);return[o,o+i]},i.prototype.getValue=function(){return this.value},i.prototype.renderSlider=function(t){var e=this.attributes,n=e.x,i=e.y,a=e.orientation,o=e.trackSize,s=e.padding,l=e.slidable,u=ze(this.attributes,"track"),c=ze(this.attributes,"thumb"),h=r(r({x:n,y:i,brushable:!1,orientation:a,padding:s,selectionRadius:this.thumbRadius,showHandle:!1,slidable:l,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:o,values:this.getValues()},Ne(u,"track")),Ne(c,"selection"));this.slider=ve(t).maybeAppendByClassName("scrollbar",(function(){return new Nn({style:h})})).update(h).node()},i.prototype.render=function(t,e){this.renderSlider(e)},i.prototype.setValue=function(t,e){void 0===e&&(e=!1);var i=this.attributes.value,r=n(this.range,2),a=r[0],o=r[1];this.slider.setValues(this.getValues(b(t,a,o)),e),this.onValueChange(i)},i.prototype.bindEvents=function(){var t=this;this.slider.addEventListener("trackClick",(function(e){e.stopPropagation(),t.onTrackClick(e.detail)})),this.onHover()},i.prototype.getOrientVal=function(t){return"horizontal"===this.attributes.orientation?t[0]:t[1]},i.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},i.tag="scrollbar",i}(Xe),jn={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new F({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};g({},jn,{style:{type:"arc"}}),g({},jn,{style:{}});var _n=yt({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),In=yt({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function Hn(t){return t.reduce((function(t,i,r){return t.push(e([0===r?"M":"L"],n(i),!1)),t}),[])}function Vn(t,i,r){return"surround"===i.type?function(t,i,r){var a=i.connect,o=void 0===a?"line":a,s=i.center;if("line"===o)return Hn(t);if(!s)return[];var l=Xt(t[0],s),u=r?0:1;return t.reduce((function(t,i,r){return 0===r?t.push(e(["M"],n(i),!1)):t.push(e(["A",l,l,0,0,u],n(i),!1)),t}),[])}(t,i,r):Hn(t)}function Fn(t,i,r){var a=r.type,o=r.connect,s=r.center,l=r.closed?[["Z"]]:[],u=n([Vn(t,r),Vn(i.slice().reverse(),r,!0)],2),c=u[0],h=u[1],d=n([t[0],i.slice(-1)[0]],2),p=d[0],f=d[1],y=function(t,e){return[c,t,h,e,l].flat()};if("line"===o||"surround"===a)return y([e(["L"],n(f),!1)],[e(["L"],n(p),!1)]);if(!s)throw new Error("Arc grid need to specified center");var g=n([Xt(f,s),Xt(p,s)],2),v=g[0],b=g[1];return y([e(["A",v,v,0,0,1],n(f),!1),e(["L"],n(f),!1)],[e(["A",b,b,0,0,0],n(p),!1),e(["L"],n(p),!1)])}var Gn=function(a){function o(){return null!==a&&a.apply(this,arguments)||this}return t(o,a),o.prototype.render=function(t,a){t.type,t.center,t.areaFill,t.closed;var o=i(t,["type","center","areaFill","closed"]),s=function(t){var i=t.data,a=void 0===i?[]:i;return t.closed?a.map((function(t){var i=t.points,a=n(i,1)[0];return r(r({},t),{points:e(e([],n(i),!1),[a],!1)})})):a}(t),l=ve(a).maybeAppendByClassName(In.lineGroup,"g"),u=ve(a).maybeAppendByClassName(In.regionGroup,"g"),c=function(t,e,n,i){var a=n.animate,o=n.isBillboard,s=e.map((function(t,e){return{id:t.id||"grid-line-".concat(e),d:Vn(t.points,n)}}));return t.selectAll(In.line.class).data(s,(function(t){return t.id})).join((function(t){return t.append("path").each((function(t,e){var n=dt(pe(r({d:t.d},i)),[t,e,s]);this.attr(r({class:In.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},n))}))}),(function(t){return t.transition((function(t,e){return Ln(this,dt(pe(r({d:t.d},i)),[t,e,s]),a.update)}))}),(function(t){return t.transition((function(){var t=this,e=Bn(this,a.exit);return wn(e,(function(){return t.remove()})),e}))})).transitions()}(l,s,t,o),h=function(t,e,i){var r=i.animate,a=i.connect,o=i.areaFill;if(e.length<2||!o||!a)return[];for(var s=Array.isArray(o)?o:[o,"transparent"],l=function(t){return s[t%s.length]},u=[],c=0;c<e.length-1;c++){var h=n([e[c].points,e[c+1].points],2),d=Fn(h[0],h[1],i);u.push({d:d,fill:l(c)})}return t.selectAll(In.region.class).data(u,(function(t,e){return e})).join((function(t){return t.append("path").each((function(t,e){var n=dt(t,[t,e,u]);this.attr(n)})).attr("className",In.region.name)}),(function(t){return t.transition((function(t,e){return Ln(this,dt(t,[t,e,u]),r.update)}))}),(function(t){return t.transition((function(){var t=this,e=Bn(this,r.exit);return wn(e,(function(){return t.remove()})),e}))})).transitions()}(u,s,t);return e(e([],n(c),!1),n(h),!1)},o}(Xe);function Wn(t,e){return Object.fromEntries(Object.entries(t).map((function(t){var i=n(t,2);return[i[0],dt(i[1],e)]})))}function Dn(t,e){return e&&s(e)?t.filter(e):t}function Rn(t,e){var n=e.startAngle;return(e.endAngle-n)*t+n}function Yn(t,e){if("linear"===e.type){var i=n(e.startPos,2),r=i[0],a=i[1],o=n(e.endPos,2),s=o[0],l=o[1],u=n([s-r,l-a],2);return Jt([u[0],u[1]])}var c=lt(Rn(t,e));return[-Math.sin(c),Math.cos(c)]}function qn(t,e,n){return te(Yn(t,n),"positive"!==e)}function Zn(t,e){return qn(t,e.labelDirection,e)}function Kn(t,e){return"linear"===e.type?function(t,e){var i=n(e.startPos,2),r=i[0],a=i[1],o=n(e.endPos,2),s=o[0],l=o[1],u=n([s-r,l-a],2);return[r+u[0]*t,a+u[1]*t]}(t,e):function(t,e){var i=e.radius,r=n(e.center,2),a=r[0],o=r[1],s=lt(Rn(t,e));return[a+i*Math.cos(s),o+i*Math.sin(s)]}(t,e)}function Un(t){return 0===Yn(0,t)[1]}function $n(t){return 0===Yn(0,t)[0]}function Xn(t,e){return e-t==360}function Jn(t,e,i,r,a){var o=e-t,s=n([a,a],2),l=s[0],u=s[1],c=n([lt(t),lt(e)],2),h=c[0],d=c[1],p=function(t){return[i+a*Math.cos(t),r+a*Math.sin(t)]},f=n(p(h),2),y=f[0],g=f[1],v=n(p(d),2),b=v[0],m=v[1];if(Xn(t,e)){var x=n(p((d+h)/2),2);return[["M",y,g],["A",l,u,0,1,0,x[0],x[1]],["A",l,u,0,1,0,b,m]]}var w=o>180?1:0,S=t>e?0:1;return"M".concat(y,",").concat(g,",A").concat(l,",").concat(u,",0,").concat(w,",").concat(S,",").concat(b,",").concat(m)}function Qn(t,i,r,a){var o=i.startAngle,s=i.endAngle,l=i.center,u=i.radius;return t.selectAll(_n.line.class).data([{d:Jn.apply(void 0,e(e([o,s],n(l),!1),[u],!1))}],(function(t,e){return e})).join((function(t){return t.append("path").attr("className",_n.line.name).styles(i).styles({d:function(t){return t.d}})}),(function(t){return t.transition((function(){var t=this,i=Gt(this,function(t){var i=t.attributes,r=i.startAngle,a=i.endAngle,o=i.center,s=i.radius;return e(e([r,a],n(o),!1),[s],!1)}(this),e(e([o,s],n(l),!1),[u],!1),a.update);if(i){var r=function(){var i=B(t.attributes,"__keyframe_data__");t.style.d=Jn.apply(void 0,e([],n(i),!1))};i.onframe=r,i.onfinish=r}return i})).styles(i)}),(function(t){return t.remove()})).styles(r).transitions()}function ti(t){var e=n(t,2),i=n(e[0],2),r=i[0],a=i[1],o=n(e[1],2);return{x1:r,y1:a,x2:o[0],y2:o[1]}}function ei(t,e,i,r){var a=e.showTrunc,o=e.startPos,s=e.endPos,l=e.truncRange,u=e.lineExtension,c=n([o,s],2),h=n(c[0],2),d=h[0],p=h[1],f=n(c[1],2),y=f[0],g=f[1],v=n(u?function(t,e,i){void 0===i&&(i=[0,0]);var r=n([t,e,i],3),a=n(r[0],2),o=a[0],s=a[1],l=n(r[1],2),u=l[0],c=l[1],h=n(r[2],2),d=h[0],p=h[1],f=n([u-o,c-s],2),y=f[0],g=f[1],v=Math.sqrt(Math.pow(y,2)+Math.pow(g,2)),b=n([-d/v,p/v],2),m=b[0],x=b[1];return[m*y,m*g,x*y,x*g]}(o,s,u):new Array(4).fill(0),4),b=v[0],m=v[1],x=v[2],w=v[3],S=function(e){return t.selectAll(_n.line.class).data(e,(function(t,e){return e})).join((function(t){return t.append("line").attr("className",(function(t){return"".concat(_n.line.name," ").concat(t.className)})).styles(i).transition((function(t){return Ln(this,ti(t.line),!1)}))}),(function(t){return t.styles(i).transition((function(t){return Ln(this,ti(t.line),r.update)}))}),(function(t){return t.remove()})).transitions()};if(!a||!l)return S([{line:[[d+b,p+m],[y+x,g+w]],className:_n.line.name}]);var k=n(l,2),L=k[0],B=k[1],P=y-d,A=g-p,C=n([d+P*L,p+A*L],2),O=C[0],M=C[1],E=n([d+P*B,p+A*B],2),z=E[0],N=E[1],T=S([{line:[[d+b,p+m],[O,M]],className:_n.lineFirst.name},{line:[[z,N],[y+x,g+w]],className:_n.lineSecond.name}]);return function(t,e){e.truncRange,e.truncShape,e.lineExtension}(0,e),T}function ni(t,e,n){var i,r=e.type,a=ze(e,"line");return i="linear"===r?ei(t,e,ue(a,"arrow"),n):Qn(t,e,ue(a,"arrow"),n),function(t,e,n,i){var r,a=n.showArrow,o=n.showTrunc,s=n.lineArrow,l=n.lineArrowOffset,u=n.lineArrowSize;if(r="arc"===e?t.select(_n.line.class):o?t.select(_n.lineSecond.class):t.select(_n.line.class),!a||!s||"arc"===n.type&&Xn(n.startAngle,n.endAngle)){var c=r.node();c&&(c.style.markerEnd=void 0)}else{var h=At(s);h.attr(i),ye(h,u,!0),r.style("markerEnd",h).style("markerEndOffset",-l)}}(t,r,e,a),i}function ii(t){var e=t.type,n=t.gridCenter;return"linear"===e?n:n||t.center}function ri(t,e){var i=e.gridLength;return t.map((function(t,r){var a=t.value,o=n(Kn(a,e),2),s=o[0],l=o[1],u=n(qt(function(t,e){return qn(t,e.gridDirection,e)}(a,e),i),2);return{id:r,points:[[s,l],[s+u[0],l+u[1]]]}}))}function ai(t,e,i,a){var o=ze(i,"grid"),l=o.type,u=o.areaFill,c=ii(i),h=Dn(e,i.gridFilter),d="segment"===l?ri(h,i):function(t,e){var i=e.gridControlAngles,r=ii(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!i||0===i.length)throw new Error("Invalid gridControlAngles");var a=n(r,2),o=a[0],s=a[1];return t.map((function(t,r){var a=t.value,l=n(Kn(a,e),2),u=l[0],c=l[1],h=n([u-o,c-s],2),d=h[0],p=h[1],f=[];return i.forEach((function(t){var e=lt(t),i=n([Math.cos(e),Math.sin(e)],2),r=i[0],a=i[1],l=d*r-p*a+o,u=d*a+p*r+s;f.push([l,u])})),{points:f,id:r}}))}(h,i),p=r(r({},o),{center:c,areaFill:s(u)?h.map((function(t,e){return dt(u,[t,e,h])})):u,animate:a,data:d});return t.selectAll(_n.grid.class).data([1]).join((function(t){return t.append((function(){return new Gn({style:p})})).attr("className",_n.grid.name)}),(function(t){return t.transition((function(){return this.update(p)}))}),(function(t){return t.remove()})).transitions()}var oi=function(){function t(t,e,n,i){this.set(t,e,n,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(t,e,n){var i=this,r=i.x1,a=i.y1,o=i.x2,s=i.y2,l=Math.cos(t),u=Math.sin(t),c=e-e*l+n*u,h=n-e*u-n*l;return[[l*r-u*s+c,u*r+l*s+h],[l*o-u*s+c,u*o+l*s+h],[l*r-u*a+c,u*r+l*a+h],[l*o-u*a+c,u*o+l*a+h]]},t.prototype.set=function(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},t.prototype.defined=function(t){return this[t]!==Number.MAX_VALUE&&this[t]!==-Number.MAX_VALUE},t}();function si(t,e){var i=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),a=n(r.min,2),o=a[0],s=a[1],l=n(r.max,2),u=l[0],c=l[1],h=t.getBBox(),d=h.width,p=h.height,f=0,y=0,g=o,v=s,b=St(t);if(b){p-=1.5;var m=b.style.textAlign,x=b.style.textBaseline;"center"===m?g=(o+u)/2:"right"!==m&&"end"!==m||(g=u),"middle"===x?v=(s+c)/2:"bottom"===x&&(v=c)}var w=n(me(e),4),S=w[0],k=void 0===S?0:S,L=w[1],B=void 0===L?0:L,P=w[2],A=void 0===P?k:P,C=w[3],O=new oi((f+=o)-(void 0===C?B:C),(y+=s)-k,f+d+B,y+p+A);return t.setEulerAngles(i),O.rotatedPoints(lt(i),g,v)}function li(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function ui(t,e,n){var i=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return 0===i?0:i<0?2:1}function ci(t,e){return e.every((function(e){return function(t,e){var n=t.length;if(n<3)return!1;var i,r,a,o,s,l,u=[e,[9999,e[1]]],c=0,h=0;do{var d=[t[h],t[(h+1)%n]];if(r=u,a=void 0,o=void 0,s=void 0,l=void 0,a=ui((i=d)[0],i[1],r[0]),o=ui(i[0],i[1],r[1]),s=ui(r[0],r[1],i[0]),l=ui(r[0],r[1],i[1]),a!==o&&s!==l||0===a&&li(i,r[0])||0===o&&li(i,r[1])||0===s&&li(r,i[0])||0===l&&li(r,i[1])){if(0===ui(d[0],e,d[1]))return li(d,e);c++}h=(h+1)%n}while(0!==h);return!!(1&c)}(t,e)}))}function hi(t,e){return[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]].some((function(t){return function(t,e){var i=n(t,4),r=i[0],a=i[1],o=i[2],s=i[3],l=n(e,4),u=l[0],c=l[1],h=o-r,d=s-a,p=l[2]-u,f=l[3]-c,y=h*f-p*d;if(0===y)return!1;var g=y>0,v=r-u,b=a-c,m=h*b-d*v;if(m<0===g)return!1;var x=p*b-f*v;return x<0!==g&&m>y!==g&&x>y!==g}(e,t)}))}function di(t,e,i){var r,a,s=e.crossPadding,l=new Set,u=null,c=function(t,e){var i=t.type,r=t.labelDirection,a=t.crossSize;if(!a)return!1;if("arc"===i){var o=t.center,s=t.radius,l=n(o,2),u=l[0],c=l[1],h="negative"===r?0:a,d=-s-h,p=s+h,f=n(me(e),4),y=f[0],g=f[1],v=f[2],b=f[3];return new oi(u+d-b,c+d-y,u+p+g,c+p+v)}var m=n(t.startPos,2),x=m[0],w=m[1],S=n(t.endPos,2),k=S[0],L=S[1],B=n($n(t)?[-e,0,e,0]:[0,e,0,-e],4),P=B[0],A=B[1],C=B[2],O=B[3],M=qt(Zn(0,t),a),E=new oi(x,w,k,L);return E.x1+=O,E.y1+=P,E.x2+=A+M[0],E.y2+=C+M[1],E}(e,s),h=function(t){return!c||function(t,e,n){var i=t.x1,r=t.x2,a=t.y1,o=t.y2;return ci([[i,a],[r,a],[r,o],[i,o]],si(e,n))}(c,t)},d=function(t,e){return!t||!t.firstChild||!function(t,e,n){var i,r,a=si(t,n).flat(1),s=si(e,n).flat(1),l=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var u=o(l),c=u.next();!c.done;c=u.next())if(hi(s,c.value))return!0}catch(t){i={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}return!1}(t.firstChild,e.firstChild,me(i))};try{for(var p=o(t),f=p.next();!f.done;f=p.next()){var y=f.value;h(y)?!u||d(u,y)?u=y:(l.add(u),l.add(y)):l.add(y)}}catch(t){r={error:t}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}return Array.from(l)}function pi(t,e){return void 0===e&&(e={}),f(t)?0:"number"==typeof t?t:Math.floor(xt(t,e))}var fi=function(t,e){var n=e.seq,i=void 0===n?2:n;return t.filter((function(t,e){return!(e%i)||(nt(t),!1)}))};var yi=new Map([["hide",function(t,i,r,a){var o=t.length,s=i.keepHeader,l=i.keepTail;if(!(o<=1||2===o&&s&&l)){var u,c,h,d=fi,p=function(t){return t.forEach(a.show),t},f=2,y=t.slice(),g=t.slice(),v=Math.min.apply(Math,e([1],n(t.map((function(t){return t.getBBox().width}))),!1));if("linear"===r.type&&(Un(r)||$n(r))){var b=we(t[0]).left,m=we(t[o-1]).right,x=Math.abs(m-b)||1;f=Math.max(Math.floor(o*v/x),f)}for(s&&(u=y.splice(0,1)[0]),l&&(c=y.splice(-1,1)[0],y.reverse()),p(y);f<t.length&&di((h=c?e(e([c],n(g),!1),[u],!1):e([u],n(g),!1),h.filter(bt)),r,null==i?void 0:i.margin).length;){if(c&&!u&&f%2==0)y.splice(0,1).forEach(a.hide);else if(c&&u){y.splice(0,1).forEach(a.hide)}g=d(p(y),{seq:f}),f++}}}],["rotate",function(t,e,n,i){var r,a,s=e.optionalAngles,l=void 0===s?[0,45,90]:s,u=e.margin,c=e.recoverWhenFailed,h=void 0===c||c,d=t.map((function(t){return t.getLocalEulerAngles()})),p=function(e){return t.forEach((function(t,n){var r=Array.isArray(e)?e[n]:e;i.rotate(t,+r)}))};try{for(var f=o(l),y=f.next();!y.done;y=f.next()){if(p(y.value),di(t,n,u).length<1)return}}catch(t){r={error:t}}finally{try{y&&!y.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}h&&p(d)}],["ellipsis",function(t,e,i,r){if(!(t.length<=1)){var a=e.suffix,o=void 0===a?"...":a,s=e.minLength,l=e.maxLength,u=void 0===l?1/0:l,c=e.step,h=void 0===c?" ":c,d=e.margin,p=void 0===d?[0,0,0,0]:d,y=wt(r.getTextShape(t[0])),g=pi(h,y),v=s?pi(s,y):g,b=pi(u,y);(f(b)||b===1/0)&&(b=Math.max.apply(null,t.map((function(t){return t.getBBox().width}))));var m=t.slice(),x=n(p,4);x[0],x[1],x[2],x[3];for(var w=function(e){if(m.forEach((function(t){r.ellipsis(r.getTextShape(t),e,o)})),(m=di(t,i,p)).length<1)return{value:void 0}},S=b;S>v+g;S-=g){var k=w(S);if("object"==typeof k)return k.value}}}],["wrap",function(t,i,r,a){var o=i.wordWrapWidth,s=void 0===o?50:o,l=i.maxLines,u=void 0===l?3:l,c=i.recoverWhenFailed,h=void 0===c||c,d=i.margin,p=void 0===d?[0,0,0,0]:d,f=t.map((function(t){return t.attr("maxLines")||1})),y=Math.min.apply(Math,e([],n(f),!1)),g=function(t){var e=t.type,n=t.labelDirection;return"linear"===e&&Un(t)?"negative"===n?"bottom":"top":"middle"}(r),v=function(e){return t.forEach((function(t,n){var i=Array.isArray(e)?e[n]:e;a.wrap(t,s,i,g)}))};if(!(y>u)){for(var b=y;b<=u;b++)if(v(b),di(t,r,p).length<1)return;h&&v(f)}}]]);function gi(t,e,n){var i=e.labelOverlap,r=void 0===i?[]:i;r.length&&r.forEach((function(i){var r=i.type,a=yi.get(r);(function(t,e,n){return!(e.labelOverlap.length<1)&&("hide"===n?!ot(t[0]):"rotate"===n?!t.some((function(t){var e;return!!(null===(e=t.attr("transform"))||void 0===e?void 0:e.includes("rotate"))})):"ellipsis"!==n&&"wrap"!==n||t.filter((function(t){return t.querySelector("text")})).length>1)})(t,e,r)&&(null==a||a(t,i,e,n))}))}function vi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e){return t*("positive"===e?-1:1)}),1)}function bi(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function mi(t,e){var i=n(t,2),r=i[0],a=i[1],o=n(e,2),s=o[0],l=o[1],u=n([r*s+a*l,r*l-a*s],2),c=u[0],h=u[1];return Math.atan2(h,c)}function xi(t,e,n){var i,r=n.labelAlign;if(null===(i=e.style.transform)||void 0===i?void 0:i.includes("rotate"))return e.getLocalEulerAngles();var a=Zn(t.value,n),o=Yn(t.value,n);return"horizontal"===r?0:function(t){var e=(t+360)%180;return _t(e,-90,90)||(e+=180),e}(ut("perpendicular"===r?mi([1,0],a):mi([o[0]<0?-1:1,0],o)))}function wi(t,e,n){var i=n.type,r=n.labelAlign,a=Zn(t,n),o=bi(e),s=bi(ut(mi([1,0],a))),l="center",u="middle";return"linear"===i?[90,270].includes(s)&&0===o?(l="center",u=1===a[1]?"top":"bottom"):s%180||![90,270].includes(o)?0===s?(_t(o,0,90,!1,!0)||_t(o,0,90)||_t(o,270,360))&&(l="start"):90===s?_t(o,0,90,!1,!0)?l="start":(_t(o,90,180)||_t(o,270,360))&&(l="end"):270===s?_t(o,0,90,!1,!0)?l="end":(_t(o,90,180)||_t(o,270,360))&&(l="start"):180===s&&(90===o?l="start":(_t(o,0,90)||_t(o,270,360))&&(l="end")):l="center":"parallel"===r?u=_t(s,0,180,!0)?"top":"bottom":"horizontal"===r?_t(s,90,270,!1)?l="end":(_t(s,270,360,!1)||_t(s,0,90))&&(l="start"):"perpendicular"===r&&(l=_t(s,90,270)?"end":"start"),{textAlign:l,textBaseline:u}}function Si(t,e,i){var r=i.showTick,a=i.tickLength,o=i.tickDirection,s=i.labelDirection,l=i.labelSpacing,u=e.indexOf(t),c=dt(l,[t,u,e]),h=n([Zn(t.value,i),vi(s,o)],2),d=h[0],p=1===h[1]?dt(r?a:0,[t,u,e]):0,f=n(Zt(qt(d,c+p),Kn(t.value,i)),2);return{x:f[0],y:f[1]}}function ki(t,e){"text"===t.nodeName&&t.attr(e)}function Li(t){gi(this.node().childNodes,t,{hide:nt,show:et,rotate:function(e,n){!function(t,e,n){e.setLocalEulerAngles(t);var i=wi(e.__data__.value,t,n),r=e.querySelector(_n.labelItem.class);r&&ki(r,i)}(+n,e,t)},ellipsis:function(t,e,n){t&&Lt(t,e||1/0,n)},wrap:function(t,e,n){t&&Bt(t,e,n)},getTextShape:function(t){return t.querySelector("text")}})}function Bi(t,e,a,o,l){var u=a.indexOf(e),c=ve(t).append(function(t,e,n,i){var r=i.labelFormatter;return s(r)?function(){return At(dt(r,[t,e,n,Zn(t.value,i)]))}:function(){return At(t.label||"")}}(e,u,a,l)).attr("className",_n.labelItem.name).node(),h=n(Te(Wn(o,[e,u,a])),2),d=h[0],p=h[1],f=p.transform,y=i(p,["transform"]);Ke(c,f);var g=xi(e,c,l);return c.getLocalEulerAngles()||c.setLocalEulerAngles(g),ki(c,r(r({},wi(e.value,g,l)),d)),t.attr(y),c}function Pi(t,i,a,o){var s=Dn(i,a.labelFilter),l=ze(a,"label");return t.selectAll(_n.label.class).data(s,(function(t,e){return e})).join((function(e){return e.append("g").attr("className",_n.label.name).transition((function(t){Bi(this,t,i,l,a);var e=Si(t,i,a),n=e.x,r=e.y;return this.style.transform="translate(".concat(n,", ").concat(r,")"),null})).call((function(){Li.call(t,a)}))}),(function(s){return s.transition((function(t){var s=function(t,e,i,a){if(void 0===a&&(a="destroy"),function(t,e){return"text"===t.nodeName&&"text"===e.nodeName&&t.attributes.text===e.attributes.text}(t,e))return t.remove(),[null];var o=function(){"destroy"===a?t.destroy():"hide"===a&&nt(t),e.isVisible()&&et(e)};if(!i)return o(),[null];var s=i.duration,l=void 0===s?0:s,u=i.delay,c=void 0===u?0:u,h=Math.ceil(+l/2),d=+l/4,p=n(t.getGeometryBounds().center,2),f=p[0],y=p[1],g=n(e.getGeometryBounds().center,2),v=g[0],b=g[1],m=n([(f+v)/2-f,(y+b)/2-y],2),x=m[0],w=m[1],S=t.style.opacity,k=void 0===S?1:S,L=e.style.opacity,B=void 0===L?1:L,P=t.style.transform||"",A=e.style.transform||"",C=t.animate([{opacity:k,transform:"translate(0, 0) ".concat(P)},{opacity:0,transform:"translate(".concat(x,", ").concat(w,") ").concat(P)}],r(r({fill:"both"},i),{duration:c+h+d})),O=e.animate([{opacity:0,transform:"translate(".concat(-x,", ").concat(-w,") ").concat(A),offset:.01},{opacity:B,transform:"translate(0, 0) ".concat(A)}],r(r({fill:"both"},i),{duration:h+d,delay:c+h-d}));return wn(O,o),[C,O]}(this.querySelector(_n.labelItem.class),Bi(this,t,i,l,a),o.update),u=Si(t,i,a),c=u.x,h=u.y,d=Ln(this,{transform:"translate(".concat(c,", ").concat(h,")")},o.update);return e(e([],n(s),!1),[d],!1)})).call((function(e){var n,i,r=B(e,"_transitions").flat().filter(bt);i=function(){Li.call(t,a)},0===(n=r).length?i():Promise.all(n.map((function(t){return null==t?void 0:t.finished}))).then(i)}))}),(function(t){return t.transition((function(){var t=this,e=Bn(this.childNodes[0],o.exit);return wn(e,(function(){return ve(t).remove()})),e}))})).transitions()}function Ai(t,e){return qn(t,e.tickDirection,e)}function Ci(t,e,i,r,a){var o=a.tickLength,s=n(function(t,e){var i=n(t,2);return[[0,0],[i[0]*e,i[1]*e]]}(r,dt(o,[t,e,i])),2),l=n(s[0],2),u=l[0],c=l[1],h=n(s[1],2);return{x1:u,x2:h[0],y1:c,y2:h[1]}}function Oi(t,e,i,a,o,l){var u=function(t,e,n,i,r){var a=r.tickFormatter,o=Ai(e.value,r),l="line";return s(a)&&(l=function(){return dt(a,[e,n,i,o])}),t.append(l).attr("className",_n.tickItem.name)}(ve(this),t,e,i,a);!function(t,e,i,a,o,s,l){var u=Ai(t.value,s),c=Ci(t,e,i,u,s),h=c.x1,d=c.x2,p=c.y1,f=c.y2,y=n(Te(Wn(l,[t,e,i,u])),2),g=y[0],v=y[1];"line"===a.node().nodeName&&a.styles(r({x1:h,x2:d,y1:p,y2:f},g)),o.attr(v),a.styles(g)}(t,e,i,u,this,a,o);var c=n(Kn(t.value,a),2),h=c[0],d=c[1];return Ln(this,{transform:"translate(".concat(h,", ").concat(d,")")},l)}var Mi=yt({text:"text"},"title");function Ei(t){return/\S+-\S+/g.test(t)?t.split("-").map((function(t){return t[0]})):t.length>2?[t[0]]:t.split("")}function zi(t,e){var i=Object.entries(e).reduce((function(e,i){var r=n(i,2),a=r[0],o=r[1];return t.node().attr(a)||(e[a]=o),e}),{});t.styles(i)}var Ni=function(e){function r(t){return e.call(this,t,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return t(r,e),r.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,i=t.height,r=t.position,a=t.spacing,o=t.inset,s=this.querySelector(Mi.text.class);if(!s)return new ct(0,0,+e,+i);var l=s.getBBox(),u=l.width,c=l.height,h=n(me(a),4),d=h[0],p=h[1],f=h[2],y=h[3],g=n([0,0,+e,+i],4),v=g[0],b=g[1],m=g[2],x=g[3],w=Ei(r);if(w.includes("i"))return new ct(v,b,m,x);w.forEach((function(t,r){var a,o,s,l;"t"===t&&(a=n(0===r?[c+f,+i-c-f]:[0,+i],2),b=a[0],x=a[1]),"r"===t&&(o=n([+e-u-y],1),m=o[0]),"b"===t&&(s=n([+i-c-d],1),x=s[0]),"l"===t&&(l=n(0===r?[u+p,+e-u-p]:[0,+e],2),v=l[0],m=l[1])}));var S=n(me(o),4),k=S[0],L=S[1],B=S[2],P=S[3],A=n([P+L,k+B],2),C=A[0],O=A[1];return new ct(v+P,b+k,m-C,x-O)},r.prototype.getBBox=function(){return this.title?this.title.getBBox():new ct(0,0,0,0)},r.prototype.render=function(t,e){var r=this;t.width,t.height,t.position,t.spacing;var a=i(t,["width","height","position","spacing"]),o=n(Te(a),1)[0],s=function(t){var e,i,r,a,o=t,s=o.width,l=o.height,u=o.position,c=n([+s/2,+l/2],2),h=c[0],d=c[1],p=n([+h,+d,"center","middle"],4),f=p[0],y=p[1],g=p[2],v=p[3],b=Ei(u);return b.includes("l")&&(f=(e=n([0,"start"],2))[0],g=e[1]),b.includes("r")&&(f=(i=n([+s,"end"],2))[0],g=i[1]),b.includes("t")&&(y=(r=n([0,"top"],2))[0],v=r[1]),b.includes("b")&&(y=(a=n([+l,"bottom"],2))[0],v=a[1]),{x:f,y:y,textAlign:g,textBaseline:v}}(t),l=s.x,u=s.y,c=s.textAlign,h=s.textBaseline;jt(!!a.text,ve(e),(function(t){r.title=t.maybeAppendByClassName(Mi.text,"text").styles(o).call(zi,{x:l,y:u,textAlign:c,textBaseline:h}).node()}))},r}(Xe);function Ti(t,e,a,o,s){var l=ze(o,"title"),u=n(Te(l),2),c=u[0],h=u[1],d=h.transform,p=h.transformOrigin,f=i(h,["transform","transformOrigin"]);e.styles(f);var y=d||function(t,e,n){var i=2*t.getGeometryBounds().halfExtents[1];if("vertical"===e){if("left"===n)return"rotate(-90) translate(0, ".concat(i/2,")");if("right"===n)return"rotate(-90) translate(0, -".concat(i/2,")")}return""}(t.node(),c.direction,c.position);t.styles(r(r({},c),{transformOrigin:p})),Ke(t.node(),y);var g=function(t,e,i){var r=i.titlePosition,a=void 0===r?"lb":r,o=i.titleSpacing,s=Ei(a),l=t.node().getLocalBounds(),u=n(l.min,2),c=u[0],h=u[1],d=n(l.halfExtents,2),p=d[0],f=d[1],y=n(e.node().getLocalBounds().halfExtents,2),g=y[0],v=y[1],b=n([c+p,h+f],2),m=b[0],x=b[1],w=n(me(o),4),S=w[0],k=w[1],L=w[2],B=w[3];if(["start","end"].includes(a)&&"linear"===i.type){var P=i.startPos,A=i.endPos,C=n("start"===a?[P,A]:[A,P],2),O=C[0],M=C[1],E=Jt([-M[0]+O[0],-M[1]+O[1]]),z=n(qt(E,S),2),N=z[0],T=z[1];return{x:O[0]+N,y:O[1]+T}}return s.includes("t")&&(x-=f+v+S),s.includes("r")&&(m+=p+g+k),s.includes("l")&&(m-=p+g+B),s.includes("b")&&(x+=f+v+L),{x:m,y:x}}(ve(a._offscreen||a.querySelector(_n.mainGroup.class)),e,o),v=g.x,b=g.y;return Ln(e.node(),{transform:"translate(".concat(v,", ").concat(b,")")},s)}function ji(t,i,r,a){var o=t.showLine,s=t.showTick,l=t.showLabel,u=jt(o,i.maybeAppendByClassName(_n.lineGroup,"g"),(function(e){return ni(e,t,a)}))||[],c=jt(s,i.maybeAppendByClassName(_n.tickGroup,"g"),(function(e){return function(t,e,n,i){var r=Dn(e,n.tickFilter),a=ze(n,"tick");return t.selectAll(_n.tick.class).data(r,(function(t){return t.id||t.label})).join((function(t){return t.append("g").attr("className",_n.tick.name).transition((function(t,e){return Oi.call(this,t,e,r,n,a,!1)}))}),(function(t){return t.transition((function(t,e){return this.removeChildren(),Oi.call(this,t,e,r,n,a,i.update)}))}),(function(t){return t.transition((function(){var t=this,e=Bn(this.childNodes[0],i.exit);return wn(e,(function(){return t.remove()})),e}))})).transitions()}(e,r,t,a)}))||[],h=jt(l,i.maybeAppendByClassName(_n.labelGroup,"g"),(function(e){return Pi(e,r,t,a)}))||[];return e(e(e([],n(u),!1),n(c),!1),n(h),!1).filter((function(t){return!!t}))}var _i=function(i){function r(t){return i.call(this,t,jn)||this}return t(r,i),r.prototype.render=function(t,i,r){var a=this,o=t.titleText,s=t.data,l=t.animate,u=t.showTitle,c=t.showGrid,h=t.dataThreshold,d=t.truncRange,p=fe(s,h).filter((function(t){var e=t.value;return!(d&&e>d[0]&&e<d[1])})),f=xn(void 0===r?l:r),y=jt(c,ve(i).maybeAppendByClassName(_n.gridGroup,"g"),(function(e){return ai(e,p,t,f)}))||[],g=ve(i).maybeAppendByClassName(_n.mainGroup,"g");o&&(!this.initialized&&f.enter||this.initialized&&f.update)&&ji(t,ve(this.offscreenGroup),p,xn(!1));var v=ji(t,ve(g.node()),p,f),b=jt(u,ve(i).maybeAppendByClassName(_n.titleGroup,"g"),(function(e){return function(t,e,n,i){var r=n.titleText;return t.selectAll(_n.title.class).data([{title:r}].filter((function(t){return!!t.title})),(function(t,e){return t.title})).join((function(a){return a.append((function(){return At(r)})).attr("className",_n.title.name).transition((function(){return Ti(ve(this),t,e,n,i.enter)}))}),(function(r){return r.transition((function(){return Ti(ve(this),t,e,n,i.update)}))}),(function(t){return t.remove()})).transitions()}(e,a,t,f)}))||[];return e(e(e([],n(y),!1),n(v),!1),n(b),!1).flat().filter((function(t){return!!t}))},r}(Xe),Ii=function(){},Hi=yt({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Vi=function(a){function o(t){var e,n,i,r=a.call(this,t,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:(e=0,n=0,i=6,[["M",e-i,n-i],["L",e+i,n],["L",e-i,n+i],["Z"]]),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(t,e){return"".concat(t,"/").concat(e)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new j({class:Hi.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new j({class:Hi.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return t(o,a),Object.defineProperty(o.prototype,"defaultPage",{get:function(){var t=this.attributes.defaultPage;return b(t,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pageShape",{get:function(){var t=this.pageViews,i=n(Ue(t.map((function(t){var e=t.getBBox();return[e.width,e.height]}))).map((function(t){return Math.max.apply(Math,e([],n(t),!1))})),2),r=i[0],a=i[1],o=this.attributes,s=o.pageWidth,l=void 0===s?r:s,u=o.pageHeight;return{pageWidth:l,pageHeight:void 0===u?a:u}},enumerable:!1,configurable:!0}),o.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(o.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),o.prototype.getBBox=function(){var t=a.prototype.getBBox.call(this),e=t.x,n=t.y,i=this.controllerShape,r=this.pageShape,o=r.pageWidth,s=r.pageHeight;return new ct(e,n,o+i.width,s)},o.prototype.goTo=function(t){var e=this,i=this.attributes.animate,r=this,a=r.currPage,o=r.playState,s=r.playWindow,l=r.pageViews;if("idle"!==o||t<0||l.length<=0||t>=l.length)return null;l[a].setLocalPosition(0,0),this.prepareFollowingPage(t);var u=n(this.getFollowingPageDiff(t),2),c=u[0],h=u[1];this.playState="running";var d=kn(s,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-c,", ").concat(-h,")")}],i);return wn(d,(function(){e.innerCurrPage=t,e.playState="idle",e.setVisiblePages([t]),e.updatePageInfo()})),d},o.prototype.prev=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n<=0)return null;var i=t?(n-1+e)%e:b(n-1,0,e);return this.goTo(i)},o.prototype.next=function(){var t=this.attributes.loop,e=this.pageViews.length,n=this.currPage;if(!t&&n>=e-1)return null;var i=t?(n+1)%e:b(n+1,0,e);return this.goTo(i)},o.prototype.renderClipPath=function(t){var e=this.pageShape,n=e.pageWidth,i=e.pageHeight;n&&i?(this.clipPath=t.maybeAppendByClassName(Hi.clipPath,"rect").styles({width:n,height:i}),this.contentGroup.attr("clipPath",this.clipPath.node())):this.contentGroup.style.clipPath=void 0},o.prototype.setVisiblePages=function(t){this.playWindow.children.forEach((function(e,n){t.includes(n)?et(e):nt(e)}))},o.prototype.adjustControllerLayout=function(){var t=this,e=t.prevBtnGroup,i=t.nextBtnGroup,r=t.pageInfoGroup,a=this.attributes,o=a.orientation,s=a.controllerPadding,l=r.getBBox(),u=l.width;l.height;var c=n("horizontal"===o?[-180,0]:[-90,90],2),h=c[0],d=c[1];e.setLocalEulerAngles(h),i.setLocalEulerAngles(d);var p=e.getBBox(),f=p.width,y=p.height,g=i.getBBox(),v=g.width,b=g.height,m=Math.max(f,u,v),x="horizontal"===o?{offset:[[0,0],[f/2+s,0],[f+u+2*s,0]],textAlign:"start"}:{offset:[[m/2,-y-s],[m/2,0],[m/2,b+s]],textAlign:"center"},w=n(x.offset,3),S=n(w[0],2),k=S[0],L=S[1],B=n(w[1],2),P=B[0],A=B[1],C=n(w[2],2),O=C[0],M=C[1],E=x.textAlign,z=r.querySelector("text");z&&(z.style.textAlign=E),e.setLocalPosition(k,L),r.setLocalPosition(P,A),i.setLocalPosition(O,M)},o.prototype.updatePageInfo=function(){var t,e=this,n=e.currPage,i=e.pageViews,r=e.attributes.formatter;i.length<2||(null===(t=this.pageInfoGroup.querySelector(Hi.pageInfo.class))||void 0===t||t.attr("text",r(n+1,i.length)),this.adjustControllerLayout())},o.prototype.getFollowingPageDiff=function(t){var e=this.currPage;if(e===t)return[0,0];var n=this.attributes.orientation,i=this.pageShape,r=i.pageWidth,a=i.pageHeight,o=t<e?-1:1;return"horizontal"===n?[o*r,0]:[0,o*a]},o.prototype.prepareFollowingPage=function(t){var e=this.currPage,i=this.pageViews;if(this.setVisiblePages([t,e]),t!==e){var r=n(this.getFollowingPageDiff(t),2),a=r[0],o=r[1];i[t].setLocalPosition(a,o)}},o.prototype.renderController=function(t){var e=this,a=this.attributes.controllerSpacing,o=this.pageShape,s=o.pageWidth,l=o.pageHeight,u=this.pageViews.length>=2,c=t.maybeAppendByClassName(Hi.controller,"g");if(it(c.node(),u),u){var h=ze(this.attributes,"button"),d=ze(this.attributes,"pageNum"),p=n(Te(h),2),f=p[0],y=p[1],g=f.size,v=i(f,["size"]),b=!c.select(Hi.prevBtnGroup.class).node(),m=c.maybeAppendByClassName(Hi.prevBtnGroup,"g").styles(y);this.prevBtnGroup=m.node();var x=m.maybeAppendByClassName(Hi.prevBtn,"path"),w=c.maybeAppendByClassName(Hi.nextBtnGroup,"g").styles(y);this.nextBtnGroup=w.node(),[x,w.maybeAppendByClassName(Hi.nextBtn,"path")].forEach((function(t){t.styles(r(r({},v),{transformOrigin:"center"})),ye(t.node(),g,!0)}));var S=c.maybeAppendByClassName(Hi.pageInfoGroup,"g");this.pageInfoGroup=S.node(),S.maybeAppendByClassName(Hi.pageInfo,"text").styles(d),this.updatePageInfo(),c.node().setLocalPosition(s+a,l/2),b&&(this.prevBtnGroup.addEventListener("click",(function(){e.prev()})),this.nextBtnGroup.addEventListener("click",(function(){e.next()})))}},o.prototype.render=function(t,e){var n=t.x,i=void 0===n?0:n,r=t.y,a=void 0===r?0:r;this.attr("transform","translate(".concat(i,", ").concat(a,")"));var o=ve(e);this.renderClipPath(o),this.renderController(o),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},o.prototype.bindEvents=function(){var t=this,e=P((function(){return t.render(t.attributes,t)}),50);this.playWindow.addEventListener(T.INSERTED,e),this.playWindow.addEventListener(T.REMOVED,e)},o}(Xe);function Fi(t,e,n){return void 0===t&&(t="horizontal"),"horizontal"===t?e:n}an.registerSymbol("hiddenHandle",(function(t,e,n){var i=1.4*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]})),an.registerSymbol("verticalHandle",(function(t,e,n){var i=1.4*n,r=n/2,a=n/6,o=t+.4*i;return[["M",t,e],["L",o,e+r],["L",t+i,e+r],["L",t+i,e-r],["L",o,e-r],["Z"],["M",o,e+a],["L",t+i-2,e+a],["M",o,e-a],["L",t+i-2,e-a]]})),an.registerSymbol("horizontalHandle",(function(t,e,n){var i=1.4*n,r=n/2,a=n/6,o=e+.4*i;return[["M",t,e],["L",t-r,o],["L",t-r,e+i],["L",t+r,e+i],["L",t+r,o],["Z"],["M",t-a,o],["L",t-a,e+i-2],["M",t+a,o],["L",t+a,e+i-2]]}));var Gi=yt({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");var Wi=function(e){function a(t){return e.call(this,t,{span:[1,1],marker:function(){return new V({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return t(a,e),Object.defineProperty(a.prototype,"showValue",{get:function(){var t=this.attributes.valueText;return!!t&&("string"==typeof t||"number"==typeof t?""!==t:"function"==typeof t||""!==t.attr("text"))},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"actualSpace",{get:function(){var t=this.labelGroup,e=this.valueGroup,n=this.attributes.markerSize,i=t.node().getBBox(),r=i.width,a=i.height,o=e.node().getBBox(),s=o.width,l=o.height;return{markerWidth:n,labelWidth:r,valueWidth:s,height:Math.max(n,a,l)}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"span",{get:function(){var t=this.attributes.span;if(!t)return[1,1];var e=n(me(t),2),i=e[0],r=e[1],a=this.showValue?r:0,o=i+a;return[i/o,a/o]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shape",{get:function(){var t,e=this.attributes,i=e.markerSize,r=e.width,a=this.actualSpace,o=a.markerWidth,s=a.height,l=this.actualSpace,u=l.labelWidth,c=l.valueWidth,h=n(this.spacing,2),d=h[0],p=h[1];if(r){var f=r-i-d-p,y=n(this.span,2),g=y[0],v=y[1];u=(t=n([g*f,v*f],2))[0],c=t[1]}return{width:o+u+c+d+p,height:s,markerWidth:o,labelWidth:u,valueWidth:c}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"spacing",{get:function(){var t=this.attributes.spacing;if(!t)return[0,0];var e=n(me(t),2),i=e[0],r=e[1];return this.showValue?[i,r]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"layout",{get:function(){var t=this.shape,e=t.markerWidth,i=t.labelWidth,r=t.valueWidth,a=t.width,o=t.height,s=n(this.spacing,2),l=s[0];return{height:o,width:a,markerWidth:e,labelWidth:i,valueWidth:r,position:[e/2,e+l,e+i+l+s[1]]}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scaleSize",{get:function(){var t=function(t){var e=t.querySelector(Gi.marker.class);return e?e.style:{}}(this.markerGroup.node()),e=this.attributes,n=e.markerSize,i=e.markerStrokeWidth,r=void 0===i?t.strokeWidth:i,a=e.markerLineWidth,o=void 0===a?t.lineWidth:a,s=e.markerStroke,l=void 0===s?t.stroke:s,u=+(r||o||(l?1:0))*Math.sqrt(2),c=this.markerGroup.node().getBBox(),h=c.width,d=c.height;return(1-u/Math.max(h,d))*n},enumerable:!1,configurable:!0}),a.prototype.renderMarker=function(t){var e=this,n=this.attributes.marker,i=ze(this.attributes,"marker");this.markerGroup=t.maybeAppendByClassName(Gi.markerGroup,"g").style("zIndex",0),jt(!!n,this.markerGroup,(function(){var t,a=e.markerGroup.node(),o=null===(t=a.childNodes)||void 0===t?void 0:t[0],s="string"==typeof n?new an({style:{symbol:n},className:Gi.marker.name}):n();o?s.nodeName===o.nodeName?o instanceof an?o.update(r(r({},i),{symbol:n})):(Be(o,s),ve(o).styles(i)):(o.remove(),ve(s).attr("className",Gi.marker.name).styles(i),a.appendChild(s)):(s instanceof an||ve(s).attr("className",Gi.marker.name).styles(i),a.appendChild(s)),e.markerGroup.node().scale(1/e.markerGroup.node().getScale()[0]);var l=ye(e.markerGroup.node(),e.scaleSize,!0);e.markerGroup.node().style._transform="scale(".concat(l,")")}))},a.prototype.renderLabel=function(t){var e=ze(this.attributes,"label"),n=e.text,r=i(e,["text"]);this.labelGroup=t.maybeAppendByClassName(Gi.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Gi.label,(function(){return At(n)})).styles(r)},a.prototype.renderValue=function(t){var e=this,n=ze(this.attributes,"value"),r=n.text,a=i(n,["text"]);this.valueGroup=t.maybeAppendByClassName(Gi.valueGroup,"g").style("zIndex",0),jt(this.showValue,this.valueGroup,(function(){e.valueGroup.maybeAppendByClassName(Gi.value,(function(){return At(r)})).styles(a)}))},a.prototype.renderBackground=function(t){var e=this.shape,n=e.width,i=e.height,a=ze(this.attributes,"background");this.background=t.maybeAppendByClassName(Gi.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Gi.background,"rect").styles(r({width:n,height:i},a))},a.prototype.adjustLayout=function(){var t=this.layout,e=t.labelWidth,i=t.valueWidth,r=t.height,a=n(t.position,3),o=a[0],s=a[1],l=a[2],u=r/2;this.markerGroup.styles({transform:"translate(".concat(o,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(s,", ").concat(u,")")}),Lt(this.labelGroup.select(Gi.label.class).node(),Math.ceil(e)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),Lt(this.valueGroup.select(Gi.value.class).node(),Math.ceil(i)))},a.prototype.render=function(t,e){var n=ve(e),i=t.x,r=void 0===i?0:i,a=t.y,o=void 0===a?0:a;n.styles({transform:"translate(".concat(r,", ").concat(o,")")}),this.renderMarker(n),this.renderLabel(n),this.renderValue(n),this.renderBackground(n),this.adjustLayout()},a}(Xe),Di=yt({page:"item-page",navigator:"navigator",item:"item"},"items"),Ri=function(t,e,n){return void 0===n&&(n=!0),t?e(t):n},Yi=function(i){function a(t){var e=i.call(this,t,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:A,mouseenter:A,mouseleave:A})||this;return e.navigatorShape=[0,0],e}return t(a,i),Object.defineProperty(a.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"grid",{get:function(){var t=this.attributes,e=t.gridRow,n=t.gridCol,i=t.data;if(!e&&!n)throw new Error("gridRow and gridCol can not be set null at the same time");return e&&n?[e,n]:e?[e,i.length]:[i.length,n]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"renderData",{get:function(){var t=this.attributes,e=t.data,i=t.layout,a=ze(this.attributes,"item"),o=e.map((function(t,o){var s=t.id,l=void 0===s?o:s,u=t.label,c=t.value;return{id:"".concat(l),index:o,style:r({layout:i,labelText:u,valueText:c},Object.fromEntries(Object.entries(a).map((function(i){var r=n(i,2);return[r[0],dt(r[1],[t,o,e])]}))))}}));return o},enumerable:!1,configurable:!0}),a.prototype.getGridLayout=function(){var t=this,e=this.attributes,i=e.orientation,r=e.width,a=e.rowPadding,o=e.colPadding,s=n(this.navigatorShape,1)[0],l=n(this.grid,2),u=l[0],c=l[1],h=c*u,d=0;return this.pageViews.children.map((function(e,l){var p,f,y=Math.floor(l/h),g=l%h,v=t.ifHorizontal(c,u),b=[Math.floor(g/v),g%v];"vertical"===i&&b.reverse();var m=n(b,2),x=m[0],w=m[1],S=(r-s-(c-1)*o)/c,k=e.getBBox().height,L=n([0,0],2),B=L[0],P=L[1];return"horizontal"===i?(B=(p=n([d,x*(k+a)],2))[0],P=p[1],d=w===c-1?0:d+S+o):(B=(f=n([w*(S+o),d],2))[0],P=f[1],d=x===u-1?0:d+k+a),{page:y,index:l,row:x,col:w,pageIndex:g,width:S,height:k,x:B,y:P}}))},a.prototype.getFlexLayout=function(){var t=this.attributes,e=t.width,i=t.height,r=t.rowPadding,a=t.colPadding,o=n(this.navigatorShape,1)[0],s=n(this.grid,2),l=s[0],u=s[1],c=n([e-o,i],2),h=c[0],d=c[1],p=n([0,0,0,0,0,0,0,0],8),f=p[0],y=p[1],g=p[2],v=p[3],b=p[4],m=p[5],x=p[6],w=p[7];return this.pageViews.children.map((function(t,e){var i,o,s,c,p=t.getBBox(),S=p.width,k=p.height,L=0===x?0:a,B=x+L+S;return B<=h&&Ri(b,(function(t){return t<u}))?(i=n([x+L,w,B],3),f=i[0],y=i[1],x=i[2],{width:S,height:k,x:f,y:y,page:g,index:e,pageIndex:v++,row:m,col:b++}):(o=n([m+1,0,0,w+k+r],4),m=o[0],b=o[1],x=o[2],(w=o[3])+k<=d&&Ri(m,(function(t){return t<l}))?(s=n([x,w,S],3),f=s[0],y=s[1],x=s[2],{width:S,height:k,x:f,y:y,page:g,index:e,pageIndex:v++,row:m,col:b++}):(c=n([0,0,S,0,g+1,0,0,0],8),f=c[0],y=c[1],x=c[2],w=c[3],g=c[4],v=c[5],m=c[6],b=c[7],{width:S,height:k,x:f,y:y,page:g,index:e,pageIndex:v++,row:m,col:b++}))}))},Object.defineProperty(a.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var t="grid"===this.attributes.layout?this.getGridLayout:this.getFlexLayout,e=t.call(this);return e.slice(-1)[0].page>0?(this.navigatorShape=[55,0],t.call(this)):e},enumerable:!1,configurable:!0}),a.prototype.ifHorizontal=function(t,e){return Fi(this.attributes.orientation,t,e)},a.prototype.flattenPage=function(t){t.querySelectorAll(Di.item.class).forEach((function(e){t.appendChild(e)})),t.querySelectorAll(Di.page.class).forEach((function(e){t.removeChild(e).destroy()}))},a.prototype.renderItems=function(t){var e=this.attributes,n=e.click,i=e.mouseenter,r=e.mouseleave;this.flattenPage(t);var a=this.dispatchCustomEvent.bind(this);ve(t).selectAll(Di.item.class).data(this.renderData,(function(t){return t.id})).join((function(t){return t.append((function(t){var e=t.style;return new Wi({style:e})})).attr("className",Di.item.name).on("click",(function(){null==n||n(this),a("itemClick",{item:this})})).on("pointerenter",(function(){null==i||i(this),a("itemMouseenter",{item:this})})).on("pointerleave",(function(){null==r||r(this),a("itemMouseleave",{item:this})}))}),(function(t){return t.each((function(t){var e=t.style;this.update(e)}))}),(function(t){return t.remove()}))},a.prototype.relayoutNavigator=function(){var t,e=this.attributes,i=e.layout,r=e.width,a=(null===(t=this.pageViews.children[0])||void 0===t?void 0:t.getBBox().height)||0,o=n(this.navigatorShape,2),s=o[0],l=o[1];this.navigator.update("grid"===i?{pageWidth:r-s,pageHeight:a-l}:{})},a.prototype.adjustLayout=function(){var t=this,i=Object.entries(zt(this.itemsLayout,"page")).map((function(t){var e=n(t,2);return{page:e[0],layouts:e[1]}})),r=e([],n(this.navigator.getContainer().children),!1);i.forEach((function(e){var n=e.layouts,i=t.pageViews.appendChild(new j({className:Di.page.name}));n.forEach((function(t){var e=t.x,n=t.y,a=t.index,o=t.width,s=t.height,l=r[a];i.appendChild(l),C(l,"__layout__",t),l.update({x:e,y:n,width:o,height:s})}))})),this.relayoutNavigator()},a.prototype.renderNavigator=function(t){var e=this.attributes.orientation,n=ze(this.attributes,"nav"),i=vt({orientation:e},n),r=this;return t.selectAll(Di.navigator.class).data(["nav"]).join((function(t){return t.append((function(){return new Vi({style:i})})).attr("className",Di.navigator.name).each((function(){r.navigator=this}))}),(function(t){return t.each((function(){this.update(i)}))}),(function(t){return t.remove()})),this.navigator},a.prototype.getBBox=function(){return this.navigator.getBBox()},a.prototype.render=function(t,e){var n=this.attributes.data;if(n&&0!==n.length){var i=this.renderNavigator(ve(e));this.renderItems(i.getContainer()),this.adjustLayout()}},a.prototype.dispatchCustomEvent=function(t,e){var n=new U(t,{detail:e});this.dispatchEvent(n)},a}(Xe),qi=yt({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),Zi={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},Ki=function(e){function a(t){return e.call(this,t,Zi)||this}return t(a,e),a.prototype.render=function(t,e){var n=ve(e).maybeAppendByClassName(qi.markerGroup,"g");this.renderMarker(n);var i=ve(e).maybeAppendByClassName(qi.labelGroup,"g");this.renderLabel(i)},a.prototype.renderMarker=function(t){var e=this,n=this.attributes,i=n.orientation,a=n.markerSymbol,o=void 0===a?Fi(i,"horizontalHandle","verticalHandle"):a;jt(!!o,t,(function(t){var n=ze(e.attributes,"marker"),i=r({symbol:o},n);e.marker=t.maybeAppendByClassName(qi.marker,(function(){return new an({style:i})})).update(i)}))},a.prototype.renderLabel=function(t){var e=this,a=this.attributes,o=a.showLabel,s=a.orientation,l=a.spacing,u=void 0===l?0:l,c=a.formatter;jt(o,t,(function(t){var a,o=ze(e.attributes,"label"),l=o.text,h=i(o,["text"]),d=(null===(a=t.select(qi.marker.class))||void 0===a?void 0:a.node().getBBox())||{},p=d.width,f=void 0===p?0:p,y=d.height,g=n(Fi(s,[0,(void 0===y?0:y)+u,"center","top"],[f+u,0,"start","middle"]),4),v=g[0],b=g[1],m=g[2],x=g[3];t.maybeAppendByClassName(qi.label,"text").styles(r(r({},h),{x:v,y:b,text:c(l).toString(),textAlign:m,textBaseline:x}))}))},a}(Xe),Ui={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},$i=vt({},Ui,{}),Xi=vt({},Ui,Ne(Zi,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),Ji=yt({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),Qi=function(e){function i(t){return e.call(this,t,$i)||this}return t(i,e),i.prototype.renderTitle=function(t,e,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=ze(this.attributes,"title"),u=n(Te(l),2),c=u[0],h=u[1];this.titleGroup=t.maybeAppendByClassName(Ji.titleGroup,"g").styles(h);var d=r(r({width:e,height:i},c),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(Ji.title,(function(){return new Ni({style:d})})).update(d)},i.prototype.renderItems=function(t,e){var i=e.x,a=e.y,o=e.width,s=e.height,l=ze(this.attributes,"title",!0),u=n(Te(l),2),c=u[0],h=u[1],d=r(r({},c),{width:o,height:s,x:0,y:0});this.itemsGroup=t.maybeAppendByClassName(Ji.itemsGroup,"g").styles(r(r({},h),{transform:"translate(".concat(i,", ").concat(a,")")}));var p=this;this.itemsGroup.selectAll(Ji.items.class).data(["items"]).join((function(t){return t.append((function(){return new Yi({style:d})})).attr("className",Ji.items.name).each((function(){p.items=ve(this)}))}),(function(t){return t.update(d)}),(function(t){return t.remove()}))},i.prototype.adjustLayout=function(){if(this.attributes.showTitle){var t=this.title.node().getAvailableSpace(),e=t.x,n=t.y;this.itemsGroup.node().style.transform="translate(".concat(e,", ").concat(n,")")}},Object.defineProperty(i.prototype,"availableSpace",{get:function(){var t=this.attributes,e=t.showTitle,n=t.width,i=t.height;return e?this.title.node().getAvailableSpace():new ct(0,0,n,i)},enumerable:!1,configurable:!0}),i.prototype.getBBox=function(){var t,i,r=null===(t=this.title)||void 0===t?void 0:t.node(),a=null===(i=this.items)||void 0===i?void 0:i.node();return r&&a?function(t,e){var i=t.attributes,r=i.position,a=i.spacing,o=i.inset,s=i.text,l=t.getBBox(),u=e.getBBox(),c=Ei(r),h=n(me(s?a:0),4),d=h[0],p=h[1],f=h[2],y=h[3],g=n(me(o),4),v=g[0],b=g[1],m=g[2],x=g[3],w=n([y+p,d+f],2),S=w[0],k=w[1],L=n([x+b,v+m],2),B=L[0],P=L[1];if("l"===c[0])return new ct(l.x,l.y,u.width+l.width+S+B,Math.max(u.height+P,l.height));if("t"===c[0])return new ct(l.x,l.y,Math.max(u.width+B,l.width),u.height+l.height+k+P);var A=n([e.attributes.width||u.width,e.attributes.height||u.height],2),C=A[0],O=A[1];return new ct(u.x,u.y,C+l.width+S+B,O+l.height+k+P)}(r,a):e.prototype.getBBox.call(this)},i.prototype.render=function(t,e){var n=this.attributes,i=n.width,r=n.height,a=n.x,o=void 0===a?0:a,s=n.y,l=void 0===s?0:s,u=ve(e);e.style.transform="translate(".concat(o,", ").concat(l,")"),this.renderTitle(u,i,r),this.renderItems(u,this.availableSpace),this.adjustLayout()},i}(Xe),tr={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},er=yt({background:"background",labelGroup:"label-group",label:"label"},"indicator"),nr=function(a){function o(t){var e=a.call(this,t,tr)||this;return e.point=[0,0],e.group=e.appendChild(new j({})),e.isMutationObserved=!0,e}return t(o,a),o.prototype.renderBackground=function(){if(this.label){var t=this.attributes,e=t.position,i=t.padding,a=n(me(i),4),o=a[0],s=a[1],l=a[2],u=a[3],c=this.label.node().getLocalBounds(),h=c.min,d=c.max,p=new ct(h[0]-u,h[1]-o,d[0]+s-h[0]+u,d[1]+l-h[1]+o),f=this.getPath(e,p),y=ze(this.attributes,"background");this.background=ve(this.group).maybeAppendByClassName(er.background,"path").styles(r(r({},y),{d:f})),this.group.appendChild(this.label.node())}},o.prototype.renderLabel=function(){var t=this.attributes,e=t.formatter,r=t.labelText,a=ze(this.attributes,"label"),o=n(Te(a),2),s=o[0],l=o[1];s.text;var u=i(s,["text"]);(this.label=ve(this.group).maybeAppendByClassName(er.labelGroup,"g").styles(l),r)&&this.label.maybeAppendByClassName(er.label,(function(){return At(e(r))})).style("text",e(r).toString()).selectAll("text").styles(u)},o.prototype.adjustLayout=function(){var t=n(this.point,2),e=t[0],i=t[1],r=this.attributes,a=r.x,o=r.y;this.group.attr("transform","translate(".concat(a-e,", ").concat(o-i,")"))},o.prototype.getPath=function(t,i){var r=this.attributes.radius,a=i.x,o=i.y,s=i.width,l=i.height,u=[["M",a+r,o],["L",a+s-r,o],["A",r,r,0,0,1,a+s,o+r],["L",a+s,o+l-r],["A",r,r,0,0,1,a+s-r,o+l],["L",a+r,o+l],["A",r,r,0,0,1,a,o+l-r],["L",a,o+r],["A",r,r,0,0,1,a+r,o],["Z"]],c={top:4,right:6,bottom:0,left:2}[t],h=this.createCorner([u[c].slice(-2),u[c+1].slice(-2)]);return u.splice.apply(u,e([c+1,1],n(h),!1)),u[0][0]="M",u},o.prototype.createCorner=function(t,i){void 0===i&&(i=10);var r=ke.apply(void 0,e([],n(t),!1)),a=n(t,2),o=n(a[0],2),s=o[0],l=o[1],u=n(a[1],2),c=u[0],h=u[1],d=n(r?[c-s,[s,c]]:[h-l,[l,h]],2),p=d[0],f=n(d[1],2),y=f[0],g=f[1],v=p/2,b=i*(p/Math.abs(p)),m=b/2,x=b*Math.sqrt(3)/2*.8,w=n([y,y+v-m,y+v,y+v+m,g],5),S=w[0],k=w[1],L=w[2],B=w[3],P=w[4];return r?(this.point=[L,l-x],[["L",S,l],["L",k,l],["L",L,l-x],["L",B,l],["L",P,l]]):(this.point=[s+x,L],[["L",s,S],["L",s,k],["L",s+x,L],["L",s,B],["L",s,P]])},o.prototype.applyVisibility=function(){"hidden"===this.attributes.visibility?nt(this):et(this)},o.prototype.bindEvents=function(){this.label.on(T.BOUNDS_CHANGED,this.renderBackground)},o.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},o}(Xe);function ir(t,e){var i=n(function(t,e){for(var n=1;n<t.length;n+=1){var i=t[n-1],r=t[n];if(e>=i&&e<=r)return[i,r]}return[e,e]}(t,e),2),r=i[0],a=i[1];return{tick:e>(r+a)/2?a:r,range:[r,a]}}var rr=yt({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function ar(t){var e=t.orientation,n=t.size,i=t.length;return Fi(e,[i,n],[n,i])}function or(t){var e=t.type,i=n(ar(t),2),r=i[0],a=i[1];return"size"===e?[["M",0,a],["L",0+r,0],["L",0+r,a],["Z"]]:[["M",0,a],["L",0,0],["L",0+r,0],["L",0+r,a],["Z"]]}function sr(t){return or(t)}function lr(t){var e,n=t.orientation,i=t.color,r=t.block,a=t.partition;if(s(i)){e=new Array(20).fill(0).map((function(t,e,n){return i(e/(n.length-1))}))}else e=i;var o=e.length,l=e.map((function(t){return $(t).toString()}));return o?1===o?l[0]:r?function(t,e,n){var i=Array.from(e),r=t.length;return new Array(r).fill(0).reduce((function(e,n,a){var o=i[a%i.length];return e+" ".concat(t[a],":").concat(o).concat(a<r-1?" ".concat(t[a+1],":").concat(o):"")}),"l(".concat("horizontal"===n?"0":"270",")"))}(a,l,n):l.reduce((function(t,e,n){return t+" ".concat(n/(o-1),":").concat(e)}),"l(".concat(Fi(n,"0","270"),")")):""}function ur(t){var e=t.orientation,i=t.range;if(!i)return[];var r=n(ar(t),2),a=r[0],o=r[1],s=n(i,2),l=s[0],u=s[1],c=Fi(e,l*a,0),h=Fi(e,0,l*o),d=Fi(e,u*a,a),p=Fi(e,o,u*o);return[["M",c,h],["L",c,p],["L",d,p],["L",d,h],["Z"]]}var cr=function(e){function n(t){return e.call(this,t,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return t(n,e),n.prototype.render=function(t,e){!function(t,e){var n=ze(e,"track");t.maybeAppendByClassName(rr.track,"path").styles(r({d:or(e)},n))}(ve(e).maybeAppendByClassName(rr.trackGroup,"g"),t),function(t,e){var n=ze(e,"selection"),i=lr(e),a=t.maybeAppendByClassName(rr.selection,"path").styles(r({d:sr(e),fill:i},n)),o=a.maybeAppendByClassName(rr.clipPath,"path").styles({d:ur(e)}).node();a.style("clipPath",o)}(ve(e).maybeAppendByClassName(rr.selectionGroup,"g"),t)},n}(Xe);var hr=function(i){function a(t){var e=i.call(this,t,Xi)||this;return e.eventToOffsetScale=new J({}),e.innerRibbonScale=new J({}),e.cacheLabelBBox=null,e.cacheHandleBBox=null,e.onHovering=function(t){var n=e.attributes,i=n.data,r=n.block;t.stopPropagation();var a=e.getValueByCanvasPoint(t);if(r){var o=ir(i.map((function(t){return t.value})),a).range,s=e.getRealSelection(o);e.showIndicator((o[0]+o[1])/2,"".concat(s[0],"-").concat(s[1])),e.dispatchIndicated(a,o)}else{var l=e.getTickValue(a);e.showIndicator(l,"".concat(e.getRealValue(l))),e.dispatchIndicated(l)}},e.onDragStart=function(t){return function(n){n.stopPropagation(),e.attributes.slidable&&(e.target=t,e.prevValue=e.getTickValue(e.getValueByCanvasPoint(n)),document.addEventListener("mousemove",e.onDragging),document.addEventListener("touchmove",e.onDragging),document.addEventListener("mouseleave",e.onDragEnd),document.addEventListener("mouseup",e.onDragEnd),document.addEventListener("mouseup",e.onDragEnd),document.addEventListener("touchend",e.onDragEnd))}},e.onDragging=function(t){var i=e.target;e.updateMouse();var r=n(e.selection,2),a=r[0],o=r[1],s=e.getTickValue(e.getValueByCanvasPoint(t)),l=s-e.prevValue;"start"===i?a!==s&&e.updateSelection(s,o):"end"===i?o!==s&&e.updateSelection(a,s):"ribbon"===i&&0!==l&&(e.prevValue=s,e.updateSelection(l,l,!0))},e.onDragEnd=function(){e.style.cursor="pointer",document.removeEventListener("mousemove",e.onDragging),document.removeEventListener("touchmove",e.onDragging),document.removeEventListener("mouseup",e.onDragEnd),document.removeEventListener("touchend",e.onDragEnd)},e}return t(a,i),Object.defineProperty(a.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),a.prototype.getBBox=function(){var t=this.attributes,e=t.width,n=t.height;return new ct(0,0,e,n)},a.prototype.render=function(t,e){var n=this,i=t.showLabel;this.renderTitle(ve(e));var r=this.availableSpace,a=r.x,o=r.y,s=ve(e).maybeAppendByClassName(Ji.contentGroup,"g").styles({transform:"translate(".concat(a,", ").concat(o,")")});jt(!!i,s.maybeAppendByClassName(Ji.labelGroup,"g").styles({zIndex:1}),(function(t){n.renderLabel(t)}));var l=s.maybeAppendByClassName(Ji.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=s.maybeAppendByClassName(Ji.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(l),this.renderIndicator(s),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(a.prototype,"range",{get:function(){var t=this.attributes,i=t.data,r=t.domain;return r?{min:r[0],max:r[1]}:function(t){return{min:Math.min.apply(Math,e([],n(t.map((function(t){return t.value}))),!1)),max:Math.max.apply(Math,e([],n(t.map((function(t){return t.value}))),!1))}}(i)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ribbonScale",{get:function(){var t=this.range,e=t.min,n=t.max;return this.innerRibbonScale.update({domain:[e,n],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ribbonRange",{get:function(){var t=n(this.selection,2),e=t[0],i=t[1],r=this.ribbonScale;return[r.map(e),r.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"selection",{get:function(){var t=this.range,e=t.min,i=t.max,r=this.attributes.defaultValue,a=n(void 0===r?[e,i]:r,2);return[a[0],a[1]]},enumerable:!1,configurable:!0}),a.prototype.ifHorizontal=function(t,e){return Fi(this.attributes.orientation,"function"==typeof t?t():t,"function"==typeof e?e():e)},a.prototype.renderTitle=function(t){var e=this.attributes,n=e.showTitle,i=e.titleText,a=e.width,o=e.height,s=ze(this.attributes,"title"),l=r(r({},s),{width:a,height:o,text:i}),u=this;t.selectAll(Ji.title.class).data(n?[i]:[]).join((function(t){return t.append((function(){return new Ni({style:l})})).attr("className",Ji.title.name).each((function(){u.title=this}))}),(function(t){return t.update(l)}),(function(t){return t.each((function(){u.title=void 0})).remove()}))},Object.defineProperty(a.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var t=this.attributes,e=t.width,n=t.height;return new ct(0,0,e,n)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"labelFixedSpacing",{get:function(){return this.attributes.showTick?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"labelPosition",{get:function(){var t=this.attributes,e=t.orientation,n=t.labelDirection;return{vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}}[e][n]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"labelBBox",{get:function(){var t;if(!this.attributes.showLabel)return new ct(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var e=(null===(t=this.label.querySelector(_n.labelGroup.class))||void 0===t?void 0:t.children.slice(-1)[0]).getBBox(),n=e.width,i=e.height;return this.cacheLabelBBox=new ct(0,0,n,i),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"labelShape",{get:function(){var t=this.attributes,e=t.showLabel,n=t.labelSpacing,i=void 0===n?0:n;if(!e)return{width:0,height:0,size:0,length:0};var r=this.labelBBox,a=r.width,o=r.height;return{width:a,height:o,size:this.ifHorizontal(o,a)+i+this.labelFixedSpacing,length:this.ifHorizontal(a,o)}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ribbonBBox",{get:function(){var t=this.attributes,e=t.showHandle,i=t.ribbonSize,r=this.availableSpace,a=r.width,o=r.height,s=this.labelShape,l=s.size,u=s.length,c=n(this.ifHorizontal([o,a],[a,o]),2),h=c[0],d=c[1],p=e?this.handleShape:{size:0,length:0},f=p.size,y=p.length,g=this.handleOffsetRatio,v=0,b=this.labelPosition;v=i||(["bottom","right"].includes(b)?Math.min(h-l,(h-f)/g):h*(1-g)>f?Math.max(h-l,0):Math.max((h-l-f)/g,0));var m=Math.max(y,u),x=d-m,w=n(this.ifHorizontal([x,v],[v,x]),2),S=w[0],k=w[1],L=["top","left"].includes(b)?l:0,B=n(this.ifHorizontal([m/2,L],[L,m/2]),2),P=B[0],A=B[1];return new ct(P,A,S,k)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ribbonShape",{get:function(){var t=this.ribbonBBox,e=t.width,n=t.height;return this.ifHorizontal({size:n,length:e},{size:e,length:n})},enumerable:!1,configurable:!0}),a.prototype.renderRibbon=function(t){var e=this.attributes,n=e.data,i=e.type,r=e.orientation,a=e.color,o=e.block,s=ze(this.attributes,"ribbon"),l=this.range,u=l.min,c=l.max,h=this.ribbonBBox,d=h.x,p=h.y,f=this.ribbonShape,y=f.length,g=f.size,v=vt({transform:"translate(".concat(d,", ").concat(p,")"),length:y,size:g,type:i,orientation:r,color:a,block:o,partition:n.map((function(t){return(t.value-u)/(c-u)})),range:this.ribbonRange},s);this.ribbon=t.maybeAppendByClassName(Ji.ribbon,(function(){return new cr({style:v})})).update(v)},a.prototype.getHandleClassName=function(t){return"".concat(Ji.prefix("".concat(t,"-handle")))},a.prototype.renderHandles=function(){var t=this.attributes,e=t.showHandle,i=t.orientation,a=ze(this.attributes,"handle"),o=n(this.selection,2),s=o[0],l=o[1],u=r(r({},a),{orientation:i}),c=a.shape,h="basic"===(void 0===c?"slider":c)?Ki:zn,d=this;this.handlesGroup.selectAll(Ji.handle.class).data(e?[{value:s,type:"start"},{value:l,type:"end"}]:[],(function(t){return t.type})).join((function(t){return t.append((function(){return new h({style:u})})).attr("className",(function(t){var e=t.type;return"".concat(Ji.handle," ").concat(d.getHandleClassName(e))})).each((function(t){var e=t.type,n=t.value;this.update({labelText:n});var i="".concat(e,"Handle");d[i]=this,this.addEventListener("pointerdown",d.onDragStart(e))}))}),(function(t){return t.update(u).each((function(t){var e=t.value;this.update({labelText:e})}))}),(function(t){return t.each((function(t){var e=t.type,n="".concat(e,"Handle");d[n]=void 0})).remove()}))},a.prototype.adjustHandles=function(){var t=n(this.selection,2),e=t[0],i=t[1];this.setHandlePosition("start",e),this.setHandlePosition("end",i)},Object.defineProperty(a.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new ct(0,0,0,0);var t=this.startHandle.getBBox(),e=t.width,i=t.height,r=this.endHandle.getBBox(),a=r.width,o=r.height,s=n([Math.max(e,a),Math.max(i,o)],2),l=s[0],u=s[1];return this.cacheHandleBBox=new ct(0,0,l,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"handleShape",{get:function(){var t=this.handleBBox,e=t.width,i=t.height,r=n(this.ifHorizontal([i,e],[e,i]),2);return{width:e,height:i,size:r[0],length:r[1]}},enumerable:!1,configurable:!0}),a.prototype.setHandlePosition=function(t,e){var i=this.attributes.handleFormatter,r=this.ribbonBBox,a=r.x,o=r.y,s=this.ribbonShape.size,l=this.getOffset(e),u=n(this.ifHorizontal([a+l,o+s*this.handleOffsetRatio],[a+s*this.handleOffsetRatio,o+l]),2),c=u[0],h=u[1],d=this.handlesGroup.select(".".concat(this.getHandleClassName(t))).node();null==d||d.update({transform:"translate(".concat(c,", ").concat(h,")"),formatter:i})},a.prototype.renderIndicator=function(t){var e=ze(this.attributes,"indicator");this.indicator=t.maybeAppendByClassName(Ji.indicator,(function(){return new nr({})})).update(e)},Object.defineProperty(a.prototype,"labelData",{get:function(){var t=this;return this.attributes.data.reduce((function(e,i,a,o){var s,l,u=null!==(s=null==i?void 0:i.id)&&void 0!==s?s:a.toString();if(e.push(r(r({},i),{id:u,index:a,type:"value",label:null!==(l=null==i?void 0:i.label)&&void 0!==l?l:i.value.toString(),value:t.ribbonScale.map(i.value)})),a<o.length-1){var c=o[a+1],h=n([i.value,c.value],2),d=h[0],p=h[1],f=(d+p)/2;e.push(r(r({},i),{id:u,index:a,type:"range",range:[d,p],label:[d,p].join("~"),value:t.ribbonScale.map(f)}))}return e}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"labelStyle",{get:function(){var t=n(["center","middle"],2),e=t[0],i=t[1],r=this.labelPosition;return"top"===r?i="bottom":"bottom"===r?i="top":"left"===r?e="end":"right"===r&&(e="start"),{labelTextAlign:e,labelTextBaseline:i}},enumerable:!1,configurable:!0}),a.prototype.renderLabel=function(t){var e=this.attributes,n=e.showTick,i=void 0!==n&&n,a=e.labelFilter,o=e.labelFormatter,s=ze(this.attributes,"tick"),l=ze(this.attributes,"label"),u=l.align,c=vt(r({showLine:!1,showGrid:!1,showTick:i,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Ne(s,"tick"),Ne(l,"label"),{data:this.labelData}),h={tickFilter:function(t,e,n){return"value"===(null==t?void 0:t.type)&&(!a||a(t,t.index,n.filter((function(t){return"value"!==t.type}))))},labelFilter:function(t,e,n){return(null==t?void 0:t.type)===u&&(!a||a(t,t.index,n.filter((function(t){return t.type===u}))))},labelFormatter:o},d=r(r(r({},c),h),{labelOverlap:[{type:"hide"}]});this.label=t.maybeAppendByClassName(Ji.label,(function(){return new _i({style:d})})).node(),this.label.update(d,!1)},Object.defineProperty(a.prototype,"labelAxisStyle",{get:function(){var t=this.attributes,e=t.showTick,i=t.labelDirection,r=t.labelSpacing,a=t.tickLength,o=this.ribbonShape.size,s=this.labelPosition,l=this.labelFixedSpacing,u=n([0,0,0],3),c=u[0],h=u[1],d=u[2],p=null!=a?a:o;return e?(d=p,h=l,"positive"===i?"right"===s?(c=p,d=p):"bottom"===s&&(c=d):"negative"===i&&("top"===s||"left"===s)&&(c=o)):"positive"===i?"right"===s?h=p:"bottom"===s&&(c=o+l,h=r):"negative"===i&&("left"===s||"top"===s)&&(h=r),{offset:c,spacing:h,tickLength:d}},enumerable:!1,configurable:!0}),a.prototype.adjustLabel=function(){if(this.attributes.showLabel){var t=this.ribbonBBox,e=t.x,i=t.y,r=t.width,a=t.height,o=this.labelAxisStyle,s=o.offset,l=o.spacing,u=o.tickLength,c=n(this.ifHorizontal([[e,i+s],[e+r,i+s]],[[e+s,i+a],[e+s,i]]),2),h=c[0],d=c[1];this.label.update({startPos:h,endPos:d,tickLength:u,labelSpacing:l},!1)}},a.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},a.prototype.showIndicator=function(t,e){if(void 0===e&&(e="".concat(t)),this.attributes.showIndicator&&"number"==typeof t){var n=this.range,i=n.min,r=n.max,a=this.ribbonBBox,o=a.x,s=a.y,l=b(t,i,r),u=this.getOffset(l),c=this.ifHorizontal([u+o,s],[o,u+s]);this.indicator.update({x:c[0],y:c[1],position:this.ifHorizontal("top","left"),labelText:e}),et(this.indicator.node())}else this.hideIndicator()},a.prototype.hideIndicator=function(){nt(this.indicator.node())},a.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},a.prototype.setSelection=function(t,e){this.updateSelection(t,e)},a.prototype.updateSelection=function(t,e,i){var r;void 0===i&&(i=!1);var a=n(this.selection,2),o=a[0],s=a[1],l=n([t,e],2),u=l[0],c=l[1];i&&(u+=o,c+=s);var h=this.range,d=h.min,p=h.max;r=n(function(t,e,i,r){var a,o=n(t,2),s=o[0],l=o[1],u=n(e,2),c=u[0],h=u[1],d=n(i,2),p=d[0],f=d[1],y=n([c,h],2),g=y[0],v=y[1],b=v-g;return g>v&&(g=(a=n([v,g],2))[0],v=a[1]),b>l-s?[s,l]:g<s?p===s&&f===v?[s,v]:[s,b+s]:v>l?f===l&&p===g?[g,l]:[l-b,l]:[g,v]}([d,p],[u,c],this.selection),2),u=r[0],c=r[1],this.update({defaultValue:[u,c]}),this.dispatchSelection()},Object.defineProperty(a.prototype,"step",{get:function(){var t=this.attributes.step,e=void 0===t?1:t,n=this.range,i=n.min,r=n.max;return y(e)?ee(.01*(r-i),0):e},enumerable:!1,configurable:!0}),a.prototype.getTickValue=function(t){var e=this.attributes,n=e.data,i=e.block,r=this.range.min;return i?ir(n.map((function(t){return t.value})),t).tick:function(t,e,n){return n+Math.round((t-n)/e)*e}(t,this.step,r)},a.prototype.getValueByCanvasPoint=function(t){var i=this.range,r=i.min,a=i.max,o=n(this.ribbon.node().getPosition(),2),s=o[0],l=o[1],u=this.ifHorizontal(s,l),c=this.ifHorizontal.apply(this,e([],n(Pt(t)),!1))-u;return b(this.getOffset(c,!0),r,a)},a.prototype.getOffset=function(t,e){void 0===e&&(e=!1);var n=this.range,i=n.min,r=n.max,a=this.ribbonShape.length,o=this.eventToOffsetScale;return o.update({domain:[i,r],range:[0,a]}),e?o.invert(t):o.map(t)},a.prototype.getRealSelection=function(t){var e=this.range.max,i=n(t,2),r=i[0],a=i[1];return this.ifHorizontal([r,a],[e-a,e-r])},a.prototype.getRealValue=function(t){var e=this.range.max;return this.ifHorizontal(t,e-t)},a.prototype.dispatchSelection=function(){var t=this.getRealSelection(this.selection),e=new U("valuechange",{detail:{value:t}});this.dispatchEvent(e)},a.prototype.dispatchIndicated=function(t,e){var n=this,i=this.range.max,r=this.ifHorizontal((function(){return{value:t,range:e}}),(function(){return{value:i-t,range:e?n.getRealSelection(e):void 0}})),a=new U("indicate",{detail:r});this.dispatchEvent(a)},a}(Xe);function dr(t){return void 0===t&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var pr={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function fr(t){var e;void 0===t&&(t="");var n=dr(t);return(e={})[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=r({flex:1},pr),e[".".concat(n.VALUE)]=r({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},pr),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var yr=function(a){function o(t){var e,n,i=this,r=null===(n=null===(e=t.style)||void 0===e?void 0:e.template)||void 0===n?void 0:n.prefixCls,o=dr(r);return(i=a.call(this,t,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(o.CONTAINER,'"></div>'),title:'<div class="'.concat(o.TITLE,'"></div>'),item:'<li class="'.concat(o.LIST_ITEM,'" data-index={index}>\n        <span class="').concat(o.NAME,'">\n          <span class="').concat(o.MARKER,'" style="background:{color}"></span>\n          <span class="').concat(o.NAME_LABEL,'" title="{name}">{name}</span>\n        </span>\n        <span class="').concat(o.VALUE,'" title="{value}">{value}</span>\n      </li>')},style:fr(r)})||this).timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return t(o,a),Object.defineProperty(o.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),o.prototype.getContainer=function(){return this.element},Object.defineProperty(o.prototype,"elementSize",{get:function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"HTMLTooltipItemsElements",{get:function(){var t=this.attributes,e=t.data,n=t.template;return e.map((function(t,e){var a=t.name,o=void 0===a?"":a,s=t.color,l=void 0===s?"black":s,u=t.index,c=i(t,["name","color","index"]),h=r({name:o,color:l,index:null!=u?u:e},c);return O(M(n.item,h))}))},enumerable:!1,configurable:!0}),o.prototype.render=function(t,e){this.renderHTMLTooltipElement(),this.updatePosition()},o.prototype.destroy=function(){var t;null===(t=this.element)||void 0===t||t.remove(),a.prototype.destroy.call(this)},o.prototype.show=function(t,e){var n=this;if(void 0!==t&&void 0!==e){var i=function(){n.attributes.x=null!=t?t:n.attributes.x,n.attributes.y=null!=e?e:n.attributes.y,n.updatePosition()};"hidden"===this.element.style.visibility?this.closeTransition(i):i()}this.element.style.visibility="visible"},o.prototype.hide=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.attributes.enterable&&this.isCursorEntered(t,e)||(this.element.style.visibility="hidden")},o.prototype.initShape=function(){var t=this.attributes.template;this.element=O(t.container),this.id&&this.element.setAttribute("id",this.id)},o.prototype.renderCustomContent=function(){if(void 0===this.prevCustomContentKey||this.prevCustomContentKey!==this.attributes.contentKey){this.prevCustomContentKey=this.attributes.contentKey;var t=this.attributes.content;t&&("string"==typeof t?this.element.innerHTML=t:this.element.replaceChildren(t))}},o.prototype.renderHTMLTooltipElement=function(){var t,i,r=this.attributes,a=r.template,o=r.title,s=r.enterable,l=r.style,u=r.content,c=dr(a.prefixCls),h=this.element;if(this.element.style.pointerEvents=s?"auto":"none",u)this.renderCustomContent();else{o?(h.innerHTML=a.title,h.getElementsByClassName(c.TITLE)[0].innerHTML=o):null===(i=null===(t=h.getElementsByClassName(c.TITLE))||void 0===t?void 0:t[0])||void 0===i||i.remove();var d=this.HTMLTooltipItemsElements,p=document.createElement("ul");p.className=c.LIST,p.replaceChildren.apply(p,e([],n(d),!1));var f=this.element.querySelector(".".concat(c.LIST));f?f.replaceWith(p):h.appendChild(p)}Me(h,l)},o.prototype.getRelativeOffsetFromCursor=function(t){var e=this.attributes,i=e.position,r=e.offset,a=(t||i).split("-"),o={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},s=this.elementSize,l=s.width,u=s.height,c=[-l/2,-u/2];return a.forEach((function(t){var e=n(c,2),i=e[0],a=e[1],s=n(o[t],2),h=s[0],d=s[1];c=[i+(l/2+r[0])*h,a+(u/2+r[1])*d]})),c},o.prototype.setOffsetPosition=function(t){var e=n(t,2),i=e[0],r=e[1],a=this.attributes,o=a.x,s=void 0===o?0:o,l=a.y,u=void 0===l?0:l,c=a.container,h=c.x,d=c.y;this.element.style.left="".concat(+s+h+i,"px"),this.element.style.top="".concat(+u+d+r,"px")},o.prototype.updatePosition=function(){var t=this.attributes.showDelay,e=void 0===t?60:t,n=Date.now();this.timestamp>0&&n-this.timestamp<e||(this.timestamp=n,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},o.prototype.autoPosition=function(t){var e=n(t,2),i=e[0],r=e[1],a=this.attributes,o=a.x,s=a.y,l=a.bounding,u=a.position;if(!l)return[i,r];var c=this.element,h=c.offsetWidth,d=c.offsetHeight,p=n([+o+i,+s+r],2),f=p[0],y=p[1],g={left:"right",right:"left",top:"bottom",bottom:"top"},v=l.x,b=l.y,m={left:f<v,right:f+h>v+l.width,top:y<b,bottom:y+d>b+l.height},x=[];u.split("-").forEach((function(t){m[t]?x.push(g[t]):x.push(t)}));var w=x.join("-");return this.getRelativeOffsetFromCursor(w)},o.prototype.isCursorEntered=function(t,e){if(this.element){var n=this.element.getBoundingClientRect(),i=n.x,r=n.y,a=n.width,o=n.height;return new ct(i,r,a,o).isPointIn(t,e)}return!1},o.prototype.closeTransition=function(t){var e=this,n=this.element.style.transition;this.element.style.transition="none",t(),setTimeout((function(){e.element.style.transition=n}),10)},o.tag="tooltip",o}(Xe),gr={default:{sizeStyle:{width:44,height:22,radius:11},tagStyle:{textStyle:{fontSize:12,lineHeight:16,fill:"#fff"},padding:0},markerStyle:{size:11}},small:{sizeStyle:{width:28,height:16,radius:8},tagStyle:{textStyle:{fontSize:10,lineHeight:14,fill:"#fff"},padding:0},markerStyle:{size:8}},mini:{sizeStyle:{width:20,height:14,radius:7},tagStyle:{textStyle:{fontSize:7,lineHeight:10,fill:"#fff"},padding:0},markerStyle:{size:7}}};function vr(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!0);var i=Number(t.style.height)-2*e;return{x:n?Number(t.style.width)+Number(t.style.x)-e-i:Number(t.style.x)+e,y:Number(t.style.y)+e,width:i,height:i,radius:i/2}}var br=function(e){function n(t){return e.call(this,t,{x:0,y:0,size:"default",spacing:2,checked:!0,disabled:!1})||this}return t(n,e),n.prototype.render=function(t,e){var n=this,i=t.size,a=t.spacing,o=t.disabled,s=t.checked,l=t.unCheckedChildren,u=t.checkedChildren,c=ve(e).maybeAppendByClassName("switch-content","g").node(),h=c.getLocalBounds(),d=B(gr,i,gr.default),p=d.sizeStyle,f=d.tagStyle,y=o?"no-drop":"pointer",g=s?"#1890FF":"#00000040",v=p,b=s?u:l;(u||l)&&ve(c).maybeAppendByClassName("switch-tag",(function(){return new on({})})).call((function(t){var e=t.node();e.update(r(r({cursor:y,backgroundStyle:null,text:!1,marker:!1},f),b));var n=(null==e?void 0:e.getLocalBounds())||{},i=n.max,a=n.min,o=i[0]-a[0]+p.radius,l=i[1]-a[1],u=Math.max(o+p.height+2,p.width);v=r(r({},p),{width:u}),e.update(function(t,e,n,i){var r=e.width,a=e.height;return void 0===n&&(n=0),void 0===i&&(i=!0),{x:i?Number(t.x)+n:Number(t.width)+Number(t.x)-r,y:Number(t.y)+(Number(t.height)-a)/2}}({x:h.min[0],y:h.min[1],width:u,height:v.height},{width:o,height:l},v.radius,s))}));var x=ve(c).maybeAppendByClassName("switch-background","rect").styles(r({zIndex:(c.style.zIndex||0)-1,x:h.min[0],y:h.min[1],fill:g,cursor:y,fillOpacity:o?.4:1},v)).node(),w=ve(c).maybeAppendByClassName("switch-background-stroke","rect").styles(r({zIndex:(c.style.zIndex||0)-2,x:h.min[0],y:h.min[1],stroke:g,lineWidth:0},v)).node();ve(c).maybeAppendByClassName("switch-handle","rect").styles({fill:"#fff",cursor:y}).call((function(t){var e,i,r=t.node(),o=vr(x,a,s),l=vr(x,a,!s);r.attr("x")&&!m(o,l)&&n.checked!==s?(r.attr(l),null===(e=r.getAnimations()[0])||void 0===e||e.cancel(),null===(i=w.getAnimations()[0])||void 0===i||i.cancel(),r.animate([{x:l.x},{x:o.x}],{duration:120,fill:"both"}),w.animate([{lineWidth:0,strokeOpacity:.5},{lineWidth:14,strokeOpacity:0}],{duration:400,easing:"ease-on"})):r.attr(o)})),this.checked=!!s},n.tag="switch",n}(Xe),mr={tagText:"",lineStroke:"#416180",lineStrokeOpacity:.45,lineLineWidth:1,lineLineDash:[5,5]},xr=vt({},mr,{type:"line",tagPosition:"start",tagAlign:"center",tagVerticalAlign:"bottom"}),wr=vt({},mr,{type:"circle",defaultRadius:0}),Sr=vt({},mr,{type:"polygon",defaultRadius:0,startAngle:0}),kr=function(e){function i(t){return e.call(this,t,mr)||this}return t(i,e),Object.defineProperty(i.prototype,"localPointer",{get:function(){var t=n(this.getPosition(),2),e=t[0],i=t[1],r=n(this.pointer,2);return[r[0]-e,r[1]-i]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tagStyle",{get:function(){return ze(this.attributes,"tag")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"crosshairStyle",{get:function(){var t=ze(this.attributes,"line");return r(r({},t),{d:this.crosshairPath})},enumerable:!1,configurable:!0}),i.prototype.render=function(t,e){var n=ve(e).maybeAppendByClassName(".crosshair-group","g").node();this.shapesGroup=n;var i=this.tagStyle,r=this.crosshairStyle;this.tagShape=ve(n).maybeAppendByClassName("crosshair-tag",(function(){return new on({style:i})})).styles(i).node(),this.crosshairShape=ve(n).maybeAppendByClassName(".crosshair-path","path").styles(r).node(),this.adjustLayout()},i.prototype.setPointer=function(t){this.pointer=t},i.tag="crosshair-base",i}(Xe),Lr=function(e){function i(t){return e.call(this,vt({},i.defaultOptions,t))||this}return t(i,e),Object.defineProperty(i.prototype,"crosshairPath",{get:function(){var t=this.attributes,e=n(t.startPos,2),i=e[0],r=e[1],a=n(t.endPos,2);return[["M",0,0],["L",a[0]-i,a[1]-r],["Z"]]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localPointer",{get:function(){if(!this.pointer)return this.attributes.startPos;var t=n(this.getPosition(),2),e=t[0],i=t[1],r=n(this.pointer,2);return[r[0]-e,r[1]-i]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isVertical",{get:function(){var t=this.attributes,e=n(t.startPos,2),i=e[0],r=e[1],a=n(t.endPos,2),o=a[0],s=a[1];return i===o&&r!==s},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tagShapeSpace",{get:function(){var t=xe(this.tagShape);return{width:t.width,height:t.height}},enumerable:!1,configurable:!0}),i.prototype.update=function(t){e.prototype.update.call(this,t)},i.prototype.setPointer=function(t){e.prototype.setPointer.call(this,t),this.adjustPosition()},i.prototype.setText=function(t){this.tagShape.update({text:t}),this.adjustTag()},i.prototype.adjustLayout=function(){this.adjustPosition(),this.adjustTag()},i.prototype.adjustPosition=function(){var t=n(this.localPointer,2),e=t[0],i=t[1],r=n(this.attributes.startPos,2),a=r[0],o=r[1],s=this.getOrientVal([a,i],[e,o]);this.shapesGroup.setLocalPosition(s)},i.prototype.adjustTag=function(){var t=this.attributes,e=t.tagText,i=t.tagPosition,r=n(t.startPos,2),a=r[0],o=r[1],s=n(t.endPos,2),l=s[0],u=s[1];if(e&&""!==e){et(this.tagShape);var c=this.tagShapeSpace,h=c.width,d=c.height,p=n(this.getOrientVal({start:[-h/2,d/2],end:[l-a+h/2,d/2]},{start:[0,0],end:[0,u-o+d]})[i],2),f=p[0],y=p[1];this.tagShape.setLocalPosition(f,y)}else nt(this.tagShape)},i.prototype.getOrientVal=function(t,e){return this.isVertical?e:t},i.tag="line-crosshair",i.defaultOptions={style:xr},i}(kr),Br=function(e){function i(t){return e.call(this,vt({},i.defaultOptions,t))||this}return t(i,e),Object.defineProperty(i.prototype,"crosshairPath",{get:function(){return this.createCirclePath()},enumerable:!1,configurable:!0}),i.prototype.update=function(t){e.prototype.update.call(this,t)},i.prototype.setPointer=function(t){var i=n(t,2),r=i[0],a=i[1];e.prototype.setPointer.call(this,[r,a]);var o=n(this.localPointer,2),s=o[0],l=o[1],u=n(this.attributes.center,2),c=u[0],h=u[1],d=this.createCirclePath(Math.pow(Math.pow(s-c,2)+Math.pow(l-h,2),.5));this.crosshairShape.attr({d:d})},i.prototype.adjustLayout=function(){nt(this.tagShape)},i.prototype.createCirclePath=function(t){var e=this.attributes,i=n(e.center,2),r=i[0],a=i[1],o=e.defaultRadius;return Je(r,a,t||o)},i.tag="circle-crosshair",i.defaultOptions={style:wr},i}(kr),Pr=function(e){function i(t){return e.call(this,vt({},i.defaultOptions,t))||this}return t(i,e),Object.defineProperty(i.prototype,"crosshairPath",{get:function(){return this.createPolygonPath()},enumerable:!1,configurable:!0}),i.prototype.update=function(t){e.prototype.update.call(this,t)},Object.defineProperty(i.prototype,"points",{get:function(){for(var t=this.attributes,e=t.startAngle,n=t.sides,i=2*Math.PI/n,r=[1,0],a=[],o=0;o<n;o+=1)a.push(Qt(r,[0,0],e/180*Math.PI+i*o));return a},enumerable:!1,configurable:!0}),i.prototype.setPointer=function(t){var i=n(t,2),r=i[0],a=i[1];e.prototype.setPointer.call(this,[r,a]);var o=n(this.localPointer,2),s=o[0],l=o[1],u=this.attributes.center,c=n(this.intersection([s,l]),2),h=c[0],d=c[1];if(h&&d){var p=Et(u,[s,l])/Et(u,[h,d]),f=this.createPolygonPath(p);this.crosshairShape.attr({d:f})}},i.prototype.adjustLayout=function(){nt(this.tagShape)},i.prototype.createPolygonPath=function(t){var e=this.attributes,i=e.defaultRadius,r=n(e.center,2),a=r[0],o=r[1],s=this.points.map((function(e,r){var s=n(e,2),l=s[0],u=s[1],c=n(qt([l,u],t||i),2),h=c[0],d=c[1];return[0===r?"M":"L",a+h,o+d]}));return s.push(["Z"]),s},i.prototype.intersection=function(t){for(var e,i,r,a=n(t,2),o=a[0],s=a[1],l=this.points,u=n(this.attributes.center,2),c=u[0],h=u[1],d=1;d<=l.length;d+=1){var p=n(l[d-1],2),f=p[0],y=p[1],g=n(l[d%l.length],2),v=Mt([o,s],[c,h],[f+c,y+h],[g[0]+c,g[1]+h]);0!==v.length&&(i=(e=n(v,2))[0],r=e[1])}return[i,r]},i.tag="polygon-crosshair",i.defaultOptions={style:Sr},i}(kr),Ar=Ne({fill:"rgba(0,0,0,0.45)",fontSize:10,textAlign:"start",textBaseline:"middle",overflow:"clip"},"label"),Cr={default:{width:12,height:12,radius:2,stroke:"#dadada",lineWidth:1,fill:"#ffffff",cursor:"pointer"},selected:{width:12,height:12,radius:2,stroke:"#3471F9",lineWidth:1,fill:"#3471F9",cursor:"pointer"}},Or={d:[["M",3,6],["L","5","8.5"],["L","8.5","4"]],lineWidth:1,cursor:"pointer"};var Mr,Er=function(e){function n(t){return e.call(this,t,r({labelText:"",spacing:4,checked:!1},Ar))||this}return t(n,e),n.prototype.render=function(t,e){var n=t.checked,i=t.spacing;this.checked=!!n;var a=be(e,".checkbox-content","g").attr("className","checkbox-content").node(),o=ze(t,"box"),s=ze(t,"checked"),l=ze(t,"label"),u=r(r({},this.checked?Cr.selected:Cr.default),o),c=r(r({},Or),s);this.checkboxBoxShape=be(a,".checkbox-box","rect").styles(r({className:"checkbox-box",zIndex:(a.style.zIndex||0)-1},u)).node(),be(this.checkboxBoxShape,".checkbox-checked","path").styles(r({className:"checkbox-box-checked",stroke:"#fff"},c));var h=function(t,e){var n=t.getLocalBounds();return{x:n.halfExtents[0]?n.max[0]+(e||0):t.style.x,y:n.halfExtents[1]?(n.min[1]+n.max[1])/2:t.style.y}}(this.checkboxBoxShape,Number(i)),d=h.x,p=h.y;be(a,".checkbox-label","text").styles(r({className:"checkbox-label",x:d,y:p},l))},n.tag="checkbox",n}(Xe),zr="component-poptip",Nr="component-poptip-arrow",Tr="component-poptip-text",jr=((Mr={})[".".concat(zr)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},Mr[".".concat(Tr)]={"text-align":"center"},Mr[".".concat(zr,"[data-position='top']")]={transform:"translate(-50%, -100%)"},Mr[".".concat(zr,"[data-position='left']")]={transform:"translate(-100%, -50%)"},Mr[".".concat(zr,"[data-position='right']")]={transform:"translate(0, -50%)"},Mr[".".concat(zr,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},Mr[".".concat(zr,"[data-position='top-left']")]={transform:"translate(0,-100%)"},Mr[".".concat(zr,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},Mr[".".concat(zr,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},Mr[".".concat(zr,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},Mr[".".concat(zr,"[data-position='right-top']")]={transform:"translate(0, 0)"},Mr[".".concat(zr,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},Mr[".".concat(zr,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},Mr[".".concat(zr,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},Mr[".".concat(Nr)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},Mr[".".concat(zr,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},Mr["[data-position='top'] .".concat(Nr)]={bottom:"-2px"},Mr[".".concat(zr,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},Mr["[data-position='left'] .".concat(Nr)]={right:"-2px"},Mr[".".concat(zr,"[data-position='right']")]={transform:"translate(5px, -50%)"},Mr["[data-position='right'] .".concat(Nr)]={left:"-2px"},Mr[".".concat(zr,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},Mr["[data-position='bottom'] .".concat(Nr)]={top:"-2px"},Mr[".".concat(zr,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},Mr["[data-position='top-left'] .".concat(Nr)]={left:"10px",bottom:"-2px"},Mr[".".concat(zr,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},Mr["[data-position='top-right'] .".concat(Nr)]={right:"10px",bottom:"-2px"},Mr[".".concat(zr,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},Mr["[data-position='left-top'] .".concat(Nr)]={right:"-2px",top:"8px"},Mr[".".concat(zr,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},Mr["[data-position='left-bottom'] .".concat(Nr)]={right:"-2px",bottom:"8px"},Mr[".".concat(zr,"[data-position='right-top']")]={transform:"translate(5px, 0)"},Mr["[data-position='right-top'] .".concat(Nr)]={left:"-2px",top:"8px"},Mr[".".concat(zr,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},Mr["[data-position='right-bottom'] .".concat(Nr)]={left:"-2px",bottom:"8px"},Mr[".".concat(zr,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},Mr["[data-position='bottom-left'] .".concat(Nr)]={top:"-2px",left:"8px"},Mr[".".concat(zr,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},Mr["[data-position='bottom-right'] .".concat(Nr)]={top:"-2px",right:"8px"},Mr);function _r(t){var e=t&&document.getElementById(t);return e||((e=document.createElement("div")).setAttribute("id",t),document.body.appendChild(e)),e}var Ir=function(r){function a(t){var e=r.call(this,g({style:{id:"component-poptip"}},a.defaultOptions,t))||this;return e.visibility="visible",e.map=new Map,e.domStyles="",e.initShape(),e.render(e.attributes,e),e}return t(a,r),Object.defineProperty(a.prototype,"visible",{get:function(){return"visible"===this.visibility},enumerable:!1,configurable:!0}),a.prototype.render=function(t,e){this.visibility=this.style.visibility,this.updatePoptipElement()},a.prototype.update=function(t){this.attr(g({},this.style,t)),this.render(this.attributes,this)},a.prototype.bind=function(t,e){var r=this;if(t){var a=this.style.text,o=function(o){var s=t,l=r.style,u=a;if(e){var c="function"==typeof e?e.call(null,o):e,h=c.html,d=c.target,p=i(c,["html","target"]);l=z({},r.style,p),(d||!1===d)&&(s=d),"string"==typeof h&&(u=h)}var f=l.position,y=l.arrowPointAtCenter,g=l.follow,v=l.offset;if(s){var b=o,m=b.clientX,x=b.clientY,w=n(function(t,e,n,i,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),a)return[t,e];var o=n.getBoundingClientRect(),s=o.x,l=o.y,u=o.width,c=o.height;switch(i){case"top":return r?[s+u/2,l]:[t,l];case"left":return r?[s,l+c/2]:[s,e];case"bottom":return r?[s+u/2,l+c]:[t,l+c];case"right":return r?[s+u,l+c/2]:[s+u,e];case"top-right":case"right-top":return[s+u,l];case"left-bottom":case"bottom-left":return[s,l+c];case"right-bottom":case"bottom-right":return[s+u,l+c];default:return[s,l]}}(m,x,s,f,y,g),2),S=w[0],k=w[1];r.showTip(S,k,{text:u,position:f,offset:v})}else r.hideTip()},s=function(){r.hideTip()};t.addEventListener("mousemove",o),t.addEventListener("mouseleave",s),this.map.set(t,[o,s])}},a.prototype.unbind=function(t){if(this.map.has(t)){var e=n(this.map.get(t)||[],2),i=e[0],r=e[1];i&&t.removeEventListener("mousemove",i),r&&t.removeEventListener("mouseleave",r),this.map.delete(t)}},a.prototype.clear=function(){this.container.innerHTML=""},a.prototype.destroy=function(){var t,i=this;e([],n(this.map.keys()),!1).forEach((function(t){return i.unbind(t)})),null===(t=this.container)||void 0===t||t.remove(),r.prototype.destroy.call(this)},a.prototype.showTip=function(t,e,n){var i=B(n,"text");if((!i||"string"==typeof i)&&(this.applyStyles(),t&&e&&n)){var r=n.offset,a=n.position;if(a&&this.container.setAttribute("data-position",a),this.setOffsetPosition(t,e,r),"string"==typeof i){var o=this.container.querySelector(".".concat(Tr));o&&(o.innerHTML=i)}this.visibility="visible",this.container.style.visibility="visible"}},a.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},a.prototype.getContainer=function(){return this.container},a.prototype.getClassName=function(){var t=this.style.containerClassName;return"".concat(zr).concat(t?" ".concat(t):"")},a.prototype.initShape=function(){var t=this,e=this.style.id;this.container=function(t){var e,n,i=(e=_r,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return n||(n=e.apply(void 0,t)),n})(t);return i}(e),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",(function(){return t.showTip()})),this.container.addEventListener("mouseleave",(function(){return t.hideTip()}))},a.prototype.updatePoptipElement=function(){var t=this.container;this.clear();var e=this.style,n=e.id,i=e.template,r=e.text;this.container.setAttribute("id",n),this.container.className=this.getClassName();var a='<span class="'.concat(Nr,'"></span>');t.innerHTML=a,h(i)?t.innerHTML+=i:i&&E(i)&&t.appendChild(i),r&&(t.getElementsByClassName(Tr)[0].textContent=r),this.applyStyles(),this.container.style.visibility=this.visibility},a.prototype.applyStyles=function(){var t=vt({},jr,this.style.domStyles),e=Object.entries(t).reduce((function(t,e){var i=n(e,2),r=i[0],a=i[1],o=Object.entries(a).reduce((function(t,e){var i=n(e,2),r=i[0],a=i[1];return"".concat(t).concat(r,": ").concat(a,";")}),"");return"".concat(t).concat(r,"{").concat(o,"}")}),"");if(this.domStyles!==e){this.domStyles=e;var i=this.container.querySelector("style");i&&this.container.removeChild(i),(i=document.createElement("style")).innerHTML=e,this.container.appendChild(i)}},a.prototype.setOffsetPosition=function(t,e,i){void 0===i&&(i=this.style.offset);var r=n(i,2),a=r[0],o=void 0===a?0:a,s=r[1],l=void 0===s?0:s;this.container.style.left="".concat(t+o,"px"),this.container.style.top="".concat(e+l,"px")},a.tag="poptip",a.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:jr,template:'<div class="'.concat(Tr,'"></div>')}},a}(Xe),Hr=function(e){function i(t){var n=e.call(this,t)||this;n.layoutEvents=[T.BOUNDS_CHANGED,T.INSERTED,T.REMOVED],n.$margin=me(0),n.$padding=me(0);var i=t.style||{},r=i.margin,a=void 0===r?0:r,o=i.padding,s=void 0===o?0:o;return n.margin=a,n.padding=s,n.isMutationObserved=!0,n.bindEvents(),n}return t(i,e),Object.defineProperty(i.prototype,"margin",{get:function(){return this.$margin},set:function(t){this.$margin=me(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this.$padding},set:function(t){this.$padding=me(t)},enumerable:!1,configurable:!0}),i.prototype.getBBox=function(){var t=this.attributes,e=t.x,i=void 0===e?0:e,r=t.y,a=void 0===r?0:r,o=t.width,s=t.height,l=n(this.$margin,4),u=l[0],c=l[1],h=l[2],d=l[3];return new ct(i-d,a-u,o+d+c,s+u+h)},i.prototype.appendChild=function(t,n){return t.isMutationObserved=!0,e.prototype.appendChild.call(this,t,n),t},i.prototype.getAvailableSpace=function(){var t=this.attributes,e=t.width,i=t.height,r=n(this.$padding,4),a=r[0],o=r[1],s=r[2],l=r[3],u=n(this.$margin,4),c=u[0],h=u[3];return new ct(l+h,a+c,e-l-o,i-a-s)},i.prototype.layout=function(){if(this.attributes.display&&this.isConnected&&!this.children.some((function(t){return!t.isConnected})))try{var t=this.attributes,e=t.x,n=t.y;this.style.transform="translate(".concat(e,", ").concat(n,")");var i=Yt(this.getAvailableSpace(),this.children.map((function(t){return t.getBBox()})),this.attributes);this.children.forEach((function(t,e){var n=i[e],r=n.x,a=n.y;t.style.transform="translate(".concat(r,", ").concat(a,")")}))}catch(t){}},i.prototype.bindEvents=function(){var t=this;this.layoutEvents.forEach((function(e){t.addEventListener(e,(function(e){e.target.isMutationObserved=!0,t.layout()}))}))},i.prototype.attributeChangedCallback=function(t,e,n){"margin"===t?this.margin=n:"padding"===t&&(this.padding=n),this.layout()},i}(j),Vr=function(e){function i(t){var n=e.call(this,vt({},i.defaultOptions,t))||this;return n.hoverColor="#f5f5f5",n.selectedColor="#e6f7ff",n.background=n.appendChild(new H({})),n.label=n.background.appendChild(new j({})),n}return t(i,e),Object.defineProperty(i.prototype,"padding",{get:function(){return me(this.style.padding)},enumerable:!1,configurable:!0}),i.prototype.renderLabel=function(){var t=this.style,e=t.label,n=t.value,i=ze(this.attributes,"label");ve(this.label).maybeAppend(".label",(function(){return At(e)})).attr("className","label").styles(i),this.label.attr("__data__",n)},i.prototype.renderBackground=function(){var t=this.label.getBBox(),e=n(this.padding,4),i=e[0],a=e[1],o=e[2],s=e[3],l=t.width,u=t.height,c=l+s+a,h=u+i+o,d=ze(this.attributes,"background"),p=this.style,f=p.width,y=void 0===f?0:f,g=p.height,v=void 0===g?0:g,b=p.selected;this.background.attr(r(r({},d),{width:Math.max(c,y),height:Math.max(h,v),fill:b?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(s,", ").concat((h-u)/2,")")})},i.prototype.render=function(){this.renderLabel(),this.renderBackground()},i.prototype.bindEvents=function(){var t=this;this.addEventListener("pointerenter",(function(){t.style.selected||t.background.attr("fill",t.hoverColor)})),this.addEventListener("pointerleave",(function(){t.style.selected||t.background.attr("fill",t.style.backgroundFill)}));var e=this;this.addEventListener("click",(function(){var n=t.style,i=n.label,r=n.value,a=n.onClick;null==a||a(r,{label:i,value:r},e)}))},i.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},i}(Xe),Fr=function(e){function n(t){var i,r,a=e.call(this,vt({},n.defaultOptions,t))||this;a.currentValue=null===(i=n.defaultOptions.style)||void 0===i?void 0:i.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new H({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new H({className:"dropdown"}));var o=a.style.defaultValue;return o&&(null===(r=a.style.options)||void 0===r?void 0:r.some((function(t){return t.value===o})))&&(a.currentValue=o),a}return t(n,e),n.prototype.setValue=function(t){this.currentValue=t,this.render()},n.prototype.getValue=function(){return this.currentValue},Object.defineProperty(n.prototype,"dropdownPadding",{get:function(){return me(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),n.prototype.renderSelect=function(){var t,e=this,n=this.style,i=n.x,a=n.y,o=n.width,s=n.height,l=n.bordered,u=n.showDropdownIcon,c=ze(this.attributes,"select"),h=ze(this.attributes,"placeholder");this.select.attr(r(r({x:i,y:a,width:o,height:s},c),{fill:"#fff",strokeWidth:l?1:0}));var d=this.dropdownPadding;u&&ve(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(i+o-10-d[1]-d[3],", ").concat(a+s/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var p=null===(t=this.style.options)||void 0===t?void 0:t.find((function(t){return t.value===e.currentValue})),f=r({x:i+d[3]},h);ve(this.select).selectAll(".placeholder").data(p?[]:[1]).join((function(t){return t.append("text").attr("className","placeholder").styles(f).style("y",(function(){var t=this.getBBox();return a+(s-t.height)/2}))}),(function(t){return t.styles(f)}),(function(t){return t.remove()}));var y=ze(this.attributes,"optionLabel"),g=r({x:i+d[3]},y);ve(this.select).selectAll(".value").data(p?[p]:[]).join((function(t){return t.append((function(t){return At(t.label)})).attr("className","value").styles(g).style("y",(function(){var t=this.getBBox();return a+(s-t.height)/2}))}),(function(t){return t.styles(g)}),(function(t){return t.remove()}))},n.prototype.renderDropdown=function(){var t,e,n=this,i=this.style,a=i.x,o=i.y,s=i.width,l=i.height,u=i.options,c=i.onSelect,h=i.open,d=ze(this.attributes,"dropdown"),p=ze(this.attributes,"option"),f=this.dropdownPadding;ve(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,(function(t){return t.value})).join((function(t){return t.append((function(t){return new Vr({className:"dropdown-item",style:r(r(r({},t),p),{width:s-f[1]-f[3],selected:t.value===n.currentValue,onClick:function(t,e,i){n.setValue(t),null==c||c(t,e,i),n.dispatchEvent(new U("change",{detail:{value:t,option:e,item:i}})),nt(n.dropdown)}})})})).each((function(t,e){var n,i=(null===(n=this.parentNode)||void 0===n?void 0:n.children).reduce((function(t,n,i){return i<e&&(t+=n.getBBox().height),t}),0);this.attr("transform","translate(".concat(f[3],", ").concat(f[0]+i,")"))}))}),(function(t){return t.update((function(t){return{selected:t.value===n.currentValue}}))}),(function(t){return t.remove()}));var y=null===(e=null===(t=this.dropdown.getElementsByClassName("dropdown-container"))||void 0===t?void 0:t[0])||void 0===e?void 0:e.getBBox(),g=d.spacing;this.dropdown.attr(r({transform:"translate(".concat(a,", ").concat(o+l+g,")"),width:y.width+f[1]+f[3],height:y.height+f[0]+f[2]},d)),!h&&nt(this.dropdown)},n.prototype.render=function(){this.renderSelect(),this.renderDropdown()},n.prototype.bindEvents=function(){var t=this;this.addEventListener("click",(function(t){t.stopPropagation()})),this.select.addEventListener("click",(function(){"visible"===t.dropdown.style.visibility?nt(t.dropdown):et(t.dropdown)})),this.addEventListener("pointerenter",(function(){t.isPointerInSelect=!0})),this.addEventListener("pointerleave",(function(){t.isPointerInSelect=!1})),null===document||void 0===document||document.addEventListener("click",(function(){t.isPointerInSelect||nt(t.dropdown)}))},n.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},n}(Xe),Gr=function(e){function i(t){var n=e.call(this,vt({},{style:{backgroundOpacity:i.backgroundOpacities.default}},i.defaultOptions,t))||this;return n.showBackground=!0,n.background=n.appendChild(new H({})),n.icon=n.appendChild(new j({})),n}return t(i,e),Object.defineProperty(i.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return me(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"iconSize",{get:function(){var t=this.attributes.size,e=n(this.padding,4),i=e[0],r=e[1],a=e[2],o=e[3];return Math.max(t-Math.max(o+r,i+a),2*this.lineWidth+1)},enumerable:!1,configurable:!0}),i.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,i=t.size,a=i/2,o=ze(this.attributes,"background");this.background.attr(r({x:e-a,y:n-a,width:i,height:i},o))},i.prototype.showIndicator=function(){if(this.label){var t=this.attributes.size,e=this.background.getBBox(),n=e.x,i=e.y;this.indicator.update({x:n+t/2,y:i-5,labelText:this.label,visibility:"visible"})}},i.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},i.prototype.connectedCallback=function(){var t;e.prototype.connectedCallback.call(this);var n=this.attributes.size,i=this.background.getBBox(),r=i.x,a=i.y,o=null===(t=this.ownerDocument)||void 0===t?void 0:t.defaultView;o&&(this.indicator=o.appendChild(new nr({style:{x:r+n/2,y:a-n/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},i.prototype.disconnectedCallback=function(){this.indicator.destroy()},i.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},i.prototype.bindEvents=function(){var t=this,e=this.attributes.onClick;if(this.addEventListener("click",(function(){null==e||e(t)})),this.showBackground){var n=function(){return t.background.attr({opacity:i.backgroundOpacities.default})};this.addEventListener("pointerenter",(function(){t.background.attr({opacity:i.backgroundOpacities.hover}),t.showIndicator()})),this.addEventListener("pointerleave",(function(){n(),t.hideIndicator()})),this.addEventListener("pointerdown",(function(){t.background.attr({opacity:i.backgroundOpacities.active})})),this.addEventListener("pointerup",(function(){n()}))}},i.tag="IconBase",i.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},i.backgroundOpacities={default:0,hover:.8,active:1},i}(Xe),Wr=function(t,e){return void 0===e&&(e="#565758"),new F({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},Dr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i.prototype.arcPath=function(t,e,i){var r=n([i,i],2),a=r[0],o=r[1],s=function(n){return[t+i*Math.cos(n),e+i*Math.sin(n)]},l=n(s(-5/4*Math.PI),2),u=l[0],c=l[1],h=n(s(1/4*Math.PI),2),d=h[0],p=h[1];return"M".concat(u,",").concat(c,",A").concat(a,",").concat(o,",0,1,1,").concat(d,",").concat(p)},Object.defineProperty(i.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),i.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth,o=a+.5;ve(this.icon).maybeAppend(".reset","path").styles({stroke:i,lineWidth:a,d:this.arcPath(e,n,r/2-a),markerStart:Wr(o,i)})},i}(Gr),Rr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/2,o=r/2/Math.pow(3,.5),s=[[e,n],[e,n-o],[e-a,n],[e,n+o],[e,n],[e+a,n-o],[e+a,n+o],[e,n]];ve(this.icon).maybeAppend(".backward","polygon").styles({points:s,fill:i})},n}(Gr),Yr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/2,o=r/2/Math.pow(3,.5),s=[[e,n],[e,n-o],[e+a,n],[e,n+o],[e,n],[e-a,n-o],[e-a,n+o],[e,n]];ve(this.icon).maybeAppend(".forward","polygon").styles({points:s,fill:i})},n}(Gr),qr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/3*Math.pow(3,.5)*.8,o=[[e+a,n],[e-a/2,n-r/2*.8],[e-a/2,n+r/2*.8],[e+a,n]];ve(this.icon).maybeAppend(".play","polygon").styles({points:o,fill:i})},n}(Gr),Zr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=r/3,o=[[e-a,n-r/2],[e-a,n+r/2],[e-a/2,n+r/2],[e-a/2,n-r/2],[e-a,n-r/2],[e+a/2,n-r/2],[e+a/2,n+r/2],[e+a,n+r/2],[e+a,n-r/2]];ve(this.icon).maybeAppend(".pause","polygon").styles({points:o,fill:i})},n}(Gr),Kr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth,o=a;ve(this.icon).maybeAppend(".left-line","line").styles({x1:e-r/2,y1:n-r/2,x2:e-r/2,y2:n+r/2,stroke:i,lineWidth:a}),ve(this.icon).maybeAppend(".right-line","line").styles({x1:e+r/2,y1:n-r/2,x2:e+r/2,y2:n+r/2,stroke:i,lineWidth:a}),ve(this.icon).maybeAppend(".left-arrow","line").styles({x1:e,y1:n,x2:e-r/2+2*o,y2:n,stroke:i,lineWidth:a,markerEnd:Wr(2*a,i)}),ve(this.icon).maybeAppend(".right-arrow","line").styles({x1:e,y1:n,x2:e+r/2-2*o,y2:n,stroke:i,lineWidth:a,markerEnd:Wr(2*a,i)})},n}(Gr),Ur=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;ve(this.icon).maybeAppend(".line","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:a});var o=a;ve(this.icon).maybeAppend(".left-arrow","line").styles({x1:e-r/2-2*o,y1:n,x2:e-2*o,y2:n,stroke:i,lineWidth:a,markerEnd:Wr(2*a,i)}),ve(this.icon).maybeAppend(".right-arrow","line").styles({x1:e+r/2+2*o,y1:n,x2:e+2*o,y2:n,stroke:i,lineWidth:a,markerEnd:Wr(2*a,i)})},n}(Gr),$r=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},Xr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),Object.defineProperty(i.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),i.prototype.renderIcon=function(){var t=this.attributes,e=t.x,i=t.y,r=t.color,a=this.iconSize,o=this.lineWidth,s=(a-2*o-o)/4,l=(a-2*o-o)/2,u=n([e-a/2+o,i+a/2-2*o],2),c=u[0],h=u[1];ve(this.icon).maybeAppend(".coordinate","polyline").styles({points:$r(a).map((function(t){var r=n(t,2),a=r[0],o=r[1];return[a+e,o+i]})),stroke:r,lineWidth:o}),ve(this.icon).maybeAppend(".line","polyline").styles({points:[[c,h],[c+s,h-l],[c+2*s,h],[c+4*s,h-2*l]],stroke:r,lineWidth:o})},i}(Gr),Jr=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),Object.defineProperty(i.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),i.prototype.renderIcon=function(){var t=this.data,e=this.attributes,i=e.x,r=e.y,a=e.color,o=this.iconSize,s=this.lineWidth,l=s,u=(o-l)/t.length,c=(o-2*l)/4,h=n([i-o/2+2*l,r+o/2-l],2),d=h[0],p=h[1];ve(this.icon).maybeAppend(".coordinate","polyline").styles({points:$r(o).map((function(t){var e=n(t,2),a=e[0],o=e[1];return[a+i,o+r]})),stroke:a,lineWidth:s}),ve(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map((function(t,e){return{value:t,index:e}}))).join((function(t){return t.append("line").attr("className","column").style("x1",(function(t){var e=t.index;return d+u*e})).style("y1",p).style("x2",(function(t){var e=t.index;return d+u*e})).style("y2",(function(t){var e=t.value;return p-c*e})).styles({y1:p,stroke:a,lineWidth:s})}))},i}(Gr),Qr=function(e){function n(t){var n=e.call(this,vt({},{style:{color:"#d8d9d9"}},t))||this;return n.showBackground=!1,n}return t(n,e),n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.color,r=this.iconSize,a=this.lineWidth;ve(this.icon).maybeAppend(".split","line").styles({x1:e,y1:n-r/2,x2:e,y2:n+r/2,stroke:i,lineWidth:a})},n}(Gr),ta=function(i){function a(){var t=i.apply(this,e([],n(arguments),!1))||this;return t.showBackground=!1,t}return t(a,i),Object.defineProperty(a.prototype,"padding",{get:function(){return me(0)},enumerable:!1,configurable:!0}),a.prototype.renderIcon=function(){var t=this.iconSize,e=this.attributes,n=e.x,i=e.y,a=e.speed,o=void 0===a?1:a,s=N(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),l=b(t,20,1/0),u=r(r({},s),{x:n-l/2,y:i-10,width:l,height:20,defaultValue:o,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:t/5,placeholderFontSize:t/2,optionPadding:0,optionLabelFontSize:t/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});ve(this.icon).maybeAppend(".speed",(function(){return new Fr({style:u})})).attr("className","speed").each((function(){this.update(u)}))},a.tag="SpeedSelect",a}(Gr),ea=function(e){function r(t){var n=e.call(this,t)||this;return n.icon=n.appendChild(new j({})),n.currentType=n.attributes.type,n}return t(r,e),r.prototype.getType=function(){return this.currentType},r.prototype.render=function(){var t=this,e=this.attributes;e.onChange;var r=i(e,["onChange"]);ve(this.icon).selectAll(".icon").data([this.currentType]).join((function(e){return e.append((function(e){var i,r=null===(i=t.toggles.find((function(t){return n(t,1)[0]===e})))||void 0===i?void 0:i[1];if(!r)throw new Error("Invalid type: ".concat(e));return new r({})})).attr("className","icon").styles(r,!1).update({})}),(function(t){return t.styles({restStyles:r}).update({})}),(function(t){return t.remove()}))},r.prototype.bindEvents=function(){var t=this,e=this.attributes.onChange;this.addEventListener("click",(function(i){i.preventDefault(),i.stopPropagation();var r=(t.toggles.findIndex((function(e){return n(e,1)[0]===t.currentType}))+1)%t.toggles.length,a=t.toggles[r][0];null==e||e(t.currentType),t.currentType=a,t.render()}))},r.tag="ToggleIcon",r}(Xe),na=function(e){function n(t){var n=e.call(this,vt({},{style:{type:"play"}},t))||this;return n.toggles=[["play",qr],["pause",Zr]],n}return t(n,e),n}(ea),ia=function(e){function n(t){var n=e.call(this,vt({},{style:{type:"range"}},t))||this;return n.toggles=[["range",Kr],["value",Ur]],n}return t(n,e),n}(ea),ra=function(e){function n(t){var n=e.call(this,vt({},{style:{type:"column"}},t))||this;return n.toggles=[["line",Xr],["column",Jr]],n}return t(n,e),n}(ea),aa={reset:Dr,speed:ta,backward:Rr,playPause:na,forward:Yr,selectionType:ia,chartType:ra,split:Qr},oa=function(i){function a(t){var e=i.call(this,vt({},a.defaultOptions,t))||this;return e.background=e.appendChild(new H({})),e.functions=e.appendChild(new j({})),e}return t(a,i),Object.defineProperty(a.prototype,"padding",{get:function(){return me(this.attributes.padding)},enumerable:!1,configurable:!0}),a.prototype.renderBackground=function(){var t=this.style,e=t.x,n=t.y,i=t.width,a=t.height,o=ze(this.attributes,"background");this.background.attr(r({x:e,y:n,width:i,height:a},o))},a.prototype.renderFunctions=function(){var t,i=this,a=this.attributes,o=a.functions,s=a.iconSize,l=a.iconSpacing,u=a.x,c=a.y,h=a.width,d=a.height,p=a.align,f=n(this.padding,4),y=f[1],g=f[3],v=o.reduce((function(t,i){return t.length&&i.length?t.concat.apply(t,e(["split"],n(i),!1)):t.concat.apply(t,e([],n(i),!1))}),[]),b=v.length*(s+l)-l,m={left:g+s/2,center:(h-b)/2+s/2,right:h-b-g-y+s/2}[p]||0;null===(t=this.speedSelect)||void 0===t||t.destroy(),this.functions.removeChildren(),v.forEach((function(t,e){var n,a=aa[t],o={x:u+e*(s+l)+m,y:c+d/2,size:s};if(a===ta?(o.speed=i.attributes.speed,o.onSelect=function(e){return i.handleFunctionChange(t,{value:e})}):[na,ia,ra].includes(a)?(o.onChange=function(e){return i.handleFunctionChange(t,{value:e})},a===na&&(o.type="play"===i.attributes.state?"pause":"play"),a===ia&&(o.type="range"===i.attributes.selectionType?"value":"range"),a===ra&&(o.type="line"===i.attributes.chartType?"column":"line")):o.onClick=function(){return i.handleFunctionChange(t,{value:t})},a===ta){var h=null===(n=i.ownerDocument)||void 0===n?void 0:n.defaultView;h&&(i.speedSelect=new a({style:r(r({},o),{zIndex:100})}),h.appendChild(i.speedSelect))}else i.functions.appendChild(new a({style:o}))}))},a.prototype.disconnectedCallback=function(){var t;i.prototype.disconnectedCallback.call(this),null===(t=this.speedSelect)||void 0===t||t.destroy()},a.prototype.render=function(){this.renderBackground(),this.renderFunctions()},a.prototype.handleFunctionChange=function(t,e){var n=this.attributes.onChange;null==n||n(t,e)},a.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},a}(Xe),sa=function(e){function n(t){var i=e.call(this,vt({},n.defaultOptions,t))||this;return i.bindEvents(),i}return t(n,e),n.prototype.bindEvents=function(){var t=this;this.addEventListener("mouseenter",(function(){t.attr("lineWidth",Math.ceil(+(t.style.r||0)/2))})),this.addEventListener("mouseleave",(function(){t.attr("lineWidth",0)}))},n.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},n}(V),la=function(e){function n(t){return e.call(this,vt({},n.defaultOptions,t))||this}return t(n,e),n.prototype.renderBackground=function(){var t=this.attributes,e=t.x,n=t.y,i=t.width,a=t.height,o=ze(this.attributes,"background");ve(this).maybeAppend("background","rect").attr("className","background").styles(r({x:e-i/2,y:n-a/2,width:i,height:a},o))},n.prototype.renderIcon=function(){var t=this.attributes,e=t.x,n=t.y,i=t.iconSize,a=ze(this.attributes,"icon"),o=i/2;ve(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(r({x1:e-1,y1:n-o,x2:e-1,y2:n+o},a)),ve(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(r({x1:e+1,y1:n-o,x2:e+1,y2:n+o},a))},n.prototype.renderBorder=function(){var t=this.attributes,e=t.x,n=t.y,i=t.width,a=t.height,o=t.type,s=ze(this.attributes,"border"),l="start"===o?+i/2:-i/2;ve(this).maybeAppend("border","line").attr("className","border").styles(r({x1:l+e,y1:n-a/2,x2:l+e,y2:n+a/2},s))},n.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},n.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},n}(Xe);function ua(t,e){return"number"==typeof t?ca(t):function(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&0===n.getMinutes()?We(n,"HH:mm\nYYYY-MM-DD"):We(n,"HH:mm");case"half-day":return n.getHours()<12?"AM\n".concat(We(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?We(n,"DD\nYYYY-MM"):We(n,"DD");case"week":return n.getDate()<=7?We(n,"DD\nYYYY-MM"):We(n,"DD");case"month":return[0,6].includes(n.getMonth())?We(n,"MM月\nYYYY"):We(n,"MM月");case"season":return[0].includes(n.getMonth())?We(n,"MM月\nYYYY"):We(n,"MM月");case"year":return We(n,"YYYY");default:return We(n,"YYYY-MM-DD HH:mm")}}(t,e)}function ca(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),i=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(i):"".concat(e,":").concat(n,":").concat(i)}var ha=function(a){function o(t){var i=a.call(this,vt({},o.defaultOptions,t))||this;i.axis=i.appendChild(new _i({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),i.timeline=i.appendChild(new Nn({style:{onChange:function(t){i.handleSliderChange(t)}}})),i.controller=i.appendChild(new oa({})),i.states={},i.handleSliderChange=function(t){var r,a=(r=i.states.values,Array.isArray(r)?e([],n(r),!1):r);i.setBySliderValues(t),i.dispatchOnChange(a)};var r=i.attributes,s=r.selectionType,l=r.chartType,u=r.speed,c=r.state,h=r.playMode,d=r.values;return i.states={chartType:l,playMode:h,selectionType:s,speed:u,state:c},i.setByTimebarValues(d),i}return t(o,a),Object.defineProperty(o.prototype,"data",{get:function(){return this.attributes.data.sort((function(t,e){return t.time<e.time?-1:t.time>e.time?1:0}))},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"space",{get:function(){var t=this.attributes,e=t.x,n=t.y,i=t.width,r=t.height,a=t.type,o=t.controllerHeight,s=b(+r-o,0,+r),l=new ct(e,n+ +r-o,+i,o),u=0,c="time"===a?10:s;return{axisBBox:"chart"===a?new ct(e,n+s-(u=35),+i,u):new ct,controllerBBox:l,timelineBBox:new ct(e,n+("time"===a?s:s-c),+i,c-u)}},enumerable:!1,configurable:!0}),o.prototype.setBySliderValues=function(t){var e,i,r=this.data,a=n(Array.isArray(t)?t:[0,t],2),o=a[0],s=a[1],l=r.length,u=r[Math.floor(o*l)],c=r[Math.ceil(s*l)-(Array.isArray(t)?0:1)];this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:r[0].time,null!==(i=null==c?void 0:c.time)&&void 0!==i?i:1/0]},o.prototype.setByTimebarValues=function(t){var e,i,r,a=this.data,o=n(Array.isArray(t)?t:[void 0,t],2),s=o[0],l=o[1],u=a.find((function(t){return t.time===s})),c=a.find((function(t){return t.time===l}));this.states.values=[null!==(e=null==u?void 0:u.time)&&void 0!==e?e:null===(i=a[0])||void 0===i?void 0:i.time,null!==(r=null==c?void 0:c.time)&&void 0!==r?r:1/0]},o.prototype.setByIndex=function(t){var e,i,r,a,o=this.data,s=n(t,2),l=s[0],u=s[1];this.states.values=[null!==(i=null===(e=o[l])||void 0===e?void 0:e.time)&&void 0!==i?i:o[0].time,null!==(a=null===(r=this.data[u])||void 0===r?void 0:r.time)&&void 0!==a?a:1/0]},Object.defineProperty(o.prototype,"sliderValues",{get:function(){var t,e=this.states,i=e.values,r=e.selectionType,a=n(Array.isArray(i)?i:[void 0,i],2),o=a[0],s=a[1],l=this.data,u=l.length,c="value"===r;return[(t=l.findIndex((function(t){return t.time===o})),c?0:t>-1?t/u:0),function(){if(s===1/0)return 1;var t=l.findIndex((function(t){return t.time===s}));return t>-1?t/u:c?.5:1}()]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"values",{get:function(){var t=this.states,e=t.values,i=t.selectionType,r=n(Array.isArray(e)?e:[this.data[0].time,e],2),a=r[0],o=r[1];return"value"===i?o:[a,o]},enumerable:!1,configurable:!0}),o.prototype.getDatumByRatio=function(t){var e=this.data,n=e.length;return e[Math.floor(t*(n-1))]},Object.defineProperty(o.prototype,"chartHandleIconShape",{get:function(){var t=this.states.selectionType,e=this.space.timelineBBox.height;return"range"===t?function(t){return new la({style:{type:t,height:e,iconSize:e/6}})}:function(){return new D({style:{x1:0,y1:-e/2,x2:0,y2:e/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),o.prototype.getChartStyle=function(t){var e=this,n=t.x,a=t.y,o=t.width,s=t.height,l=this.states,u=l.selectionType,c=l.chartType,h=this.data,d=this.attributes,p=d.type,f=d.labelFormatter,y=ze(this.attributes,"chart");y.type;var g=i(y,["type"]),v="range"===u;if("time"===p)return r({handleIconShape:function(){return new sa({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:v?-15:0,autoFitLabel:v,handleSpacing:v?-15:0,trackFill:"#edeeef",trackLength:o,trackOpacity:.5,trackRadius:s/2,trackSize:s/2,type:u,values:this.sliderValues,formatter:function(t){if(f)return f(t);var n=e.getDatumByRatio(t).time;return"number"==typeof n?ca(n):We(n,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(n,", ").concat(a,")"),zIndex:1},g);var b="range"===u?5:0,m=h.map((function(t){return t.value}));return r({handleIconOffset:b,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:m,sparklineType:c,sparklineScale:.8,trackLength:o,trackSize:s,type:u,values:this.sliderValues,transform:"translate(".concat(n,", ").concat(a,")"),zIndex:1},g)},o.prototype.renderChart=function(t){void 0===t&&(t=this.space.timelineBBox),this.timeline.update(this.getChartStyle(t))},o.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},o.prototype.getAxisStyle=function(t){var i=this.data,a=this.attributes,o=a.interval,s=a.labelFormatter,l=ze(this.attributes,"axis"),u=t.x,c=t.y,h=t.width,d=e(e([],n(i),!1),[{time:0}],!1).map((function(t,e,n){var i=t.time;return{label:"".concat(i),value:e/(n.length-1),time:i}})),p=r({startPos:[u,c],endPos:[u+h,c],data:d,labelFilter:function(t,e){return e<d.length-1},labelFormatter:function(t){var e=t.time;return s?s(e):ua(e,o)}},l);return p},o.prototype.renderAxis=function(t){void 0===t&&(t=this.space.axisBBox),"chart"===this.attributes.type&&this.axis.update(this.getAxisStyle(t))},o.prototype.renderController=function(t){void 0===t&&(t=this.space.controllerBBox);var e=this.attributes.type,n=this.states,i=n.state,a=n.speed,o=n.selectionType,s=n.chartType,l=ze(this.attributes,"controller"),u=this,c=r(r(r({},t),{iconSize:20,speed:a,state:i,selectionType:o,chartType:s,onChange:function(t,e){var n=e.value;switch(t){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(n);break;case"backward":u.internalBackward();break;case"playPause":"play"===n?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(n);break;case"chartType":u.handleChartTypeChange(n)}}}),l);"time"===e&&(c.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(c)},o.prototype.dispatchOnChange=function(t){var e=this.data,i=this.attributes.onChange,r=this.states,a=r.values,o=r.selectionType,s=n(a,2),l=s[0],u=s[1],c=u===1/0?e.at(-1).time:u;t&&function(t,e){if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t[0]===e[0]){if(t[1]===e[1])return!0;if(t[1]===1/0||e[1]===1/0)return!0}return!1}return!Array.isArray(e)&&t===e}(t,"range"===o?[l,c]:c)||null==i||i("range"===o?[l,c]:c)},o.prototype.internalReset=function(t){var e,n,i=this.states.selectionType;this.internalPause(),this.setBySliderValues("range"===i?[0,1]:[0,0]),this.renderController(),this.updateSelection(),t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onReset)||void 0===n||n.call(e),this.dispatchOnChange())},o.prototype.reset=function(){this.internalReset()},o.prototype.moveSelection=function(t,e){var i=this.data,r=i.length,a=this.states,o=a.values,s=a.selectionType,l=a.playMode,u=n(o,2),c=u[0],h=u[1],d=i.findIndex((function(t){return t.time===c})),p=i.findIndex((function(t){return t.time===h}));-1===p&&(p=r);var f,y="backward"===t?-1:1;"range"===s?"acc"===l?(f=[d,p+y],-1===y&&d===p&&(f=[d,r])):f=[d+y,p+y]:f=[d,p+y];var g=function(t){var e=n(t.sort((function(t,e){return t-e})),2),i=e[0],a=e[1],o=function(t){return b(t,0,r)};return a>r?"value"===s?[0,0]:"acc"===l?[o(i),o(i)]:[0,o(a-i)]:i<0?"acc"===l?[0,o(a)]:[o(i+r-a),r]:[o(i),o(a)]}(f);return this.setByIndex(g),this.updateSelection(),g},o.prototype.internalBackward=function(t){var e,n,i=this.moveSelection("backward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onBackward)||void 0===n||n.call(e),this.dispatchOnChange()),i},o.prototype.backward=function(){this.internalBackward()},o.prototype.internalPlay=function(t){var e,n,i=this,r=this.data,a=this.attributes.loop,o=this.states.speed,s=void 0===o?1:o;this.playInterval=window.setInterval((function(){i.internalForward()[1]!==r.length||a||(i.internalPause(),i.renderController())}),1e3/s),this.states.state="play",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPlay)||void 0===n||n.call(e))},o.prototype.play=function(){this.internalPlay()},o.prototype.internalPause=function(t){var e,n;clearInterval(this.playInterval),this.states.state="pause",!t&&(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onPause)||void 0===n||n.call(e))},o.prototype.pause=function(){this.internalPause()},o.prototype.internalForward=function(t){var e,n,i=this.moveSelection("forward",t);return t||(null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onForward)||void 0===n||n.call(e),this.dispatchOnChange()),i},o.prototype.forward=function(){this.internalForward()},o.prototype.handleSpeedChange=function(t){var e,n;this.states.speed=t,"play"===this.states.state&&(this.internalPause(!0),this.internalPlay(!0)),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSpeedChange)||void 0===n||n.call(e,t)},o.prototype.handleSelectionTypeChange=function(t){var e,n;this.states.selectionType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onSelectionTypeChange)||void 0===n||n.call(e,t)},o.prototype.handleChartTypeChange=function(t){var e,n;this.states.chartType=t,this.renderChart(),null===(n=null===(e=this.attributes)||void 0===e?void 0:e.onChartTypeChange)||void 0===n||n.call(e,t)},o.prototype.render=function(){var t=this.space,e=t.axisBBox,n=t.controllerBBox,i=t.timelineBBox;this.renderController(n),this.renderAxis(e),this.renderChart(i),"play"===this.states.state&&this.internalPlay()},o.prototype.destroy=function(){a.prototype.destroy.call(this),this.internalPause(!0)},o.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},o}(Xe);export{_i as Axis,ct as BBox,hn as Breadcrumb,cn as Button,Qi as Category,Er as Checkbox,Br as CircleCrosshair,hr as Continuous,Hr as Layout,Lr as LineCrosshair,an as Marker,Vi as Navigator,he as PRIMILTIVE_ATTRIBUTES,Pr as PolygonCrosshair,Ir as Poptip,Tn as Scrollbar,Fr as Select,ge as Selection,Nn as Slider,mn as Sparkline,br as Switch,on as Tag,ha as Timebar,Ii as Timeline,yr as Tooltip,Zt as add,Ce as addPrefix,Me as applyStyleSheet,kt as applyToText,Ht as arrayInterpolate,Yt as calcLayout,ce as catmullRom2Bezier,yt as classNames,Be as copyAttributes,at as createOffscreenGroup,Se as createTempText,vt as deepAssign,bt as defined,lt as degToRad,Xt as distance,Lt as ellipsisIt,Dt as flex,We as formatTime,dt as getCallbackValue,Pt as getEventPos,wt as getFont,we as getLocalBBox,Ge as getMask,pe as getPrimitiveAttributes,ht as getRenderBBox,xe as getShapeSpace,De as getTimeDiff,Re as getTimeScale,Ye as getTimeStart,Ze as getTranslate,Rt as grid,zt as groupBy,nt as hide,ae as ifNegative,oe as ifPositive,jt as ifShow,_t as inRange,Ft as interpolate,Mt as intersection,ke as isHorizontal,ot as isInOffscreenGroup,de as isPrimitiveAttribute,Le as isVertical,Gt as keyframeInterpolate,Et as lineLen,$t as max,be as maybeAppend,xt as measureTextWidth,le as mid,Ut as min,se as multi,Jt as normalize,It as numberInterpolate,Vt as objectInterpolate,ue as omit,Fe as parseDate,Tt as parseHTML,me as parseSeriesAttr,je as path2marker,Ke as percentTransform,ut as radToDeg,Oe as removePrefix,At as renderExtDo,Qt as rotate,fe as sampling,qt as scale,ye as scaleToPixel,ve as select,mt as setMockMeasureTextWidth,et as show,Te as splitStyle,Nt as stringToHTML,Kt as sub,ze as subStyleProps,Ne as superStyleProps,_e as svg2marker,St as textOf,Ie as throttle,qe as timer,re as toKNotation,Ae as toLowercaseFirstLetter,ee as toPrecision,ie as toScientificNotation,ne as toThousands,Pe as toUppercaseFirstLetter,Ue as transpose,tt as traverse,te as vertical,it as visibility,Bt as wrapIt};export default null;
